(()=>{var t={539:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),u=new T(n||[]);return i(a,"_invoke",{value:S(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function v(){}function y(){}var m={};l(m,u,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(_([])));b&&b!==e&&r.call(b,u)&&(m=b);var w=y.prototype=d.prototype=Object.create(m);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function o(i,a,u,c){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,u,c)}),(function(t){o("throw",t,u,c)})):e.resolve(f).then((function(t){l.value=t,u(l)}),(function(t){return o("throw",t,u,c)}))}c(s.arg)}var a;i(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function S(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return A()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function _(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return v.prototype=y,i(w,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(w),l(w,s,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function u(t){i(a,n,o,u,c,"next",t)}function c(t){i(a,n,o,u,c,"throw",t)}u(void 0)}))}}var u=r.g||window||self;u.__gobridge__||(u.__gobridge__={});var c=u.__gobridge__;e.A=function(t){var e=!1;function r(){return(r=a(o().mark((function r(){var n,i,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=new u.Go,r.next=3,t;case 3:return i=r.sent,r.next=6,WebAssembly.instantiate(i,n.importObject);case 6:a=r.sent,n.run(a.instance),e=!0;case 9:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),new Proxy({},{get:function(t,r){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return new Promise(function(){var t=a(o().mark((function t(i,a){var u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u=function(){c[r].apply(void 0,[].concat(n,[function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t?a(t):i.apply(void 0,r)}]))};case 1:if(e){t.next=6;break}return t.next=4,new Promise(requestAnimationFrame);case 4:t.next=1;break;case 6:if(r in c){t.next=9;break}return a('There is nothing defined with the name "'.concat(r.toString(),'"')),t.abrupt("return");case 9:if("function"==typeof c[r]){t.next=12;break}return i(c[r]),t.abrupt("return");case 12:u();case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())}}})}},528:function(t,e){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.TargettedClient=e.Client=void 0;var i=function(){function t(t,e,r,n){if(void 0===e&&(e=!0),void 0===r&&(r="sendMessage"),this.strict=!1,this.module=t,this.extensionId=n,!this.extensionId)throw new Error('Extension id must be provided "'.concat(this.method,'"'));switch(typeof r){case"string":this.method=r,this.strict=e;break;case"boolean":this.method="sendMessage",this.strict=Boolean(r)}if("function"!=typeof this.module[this.method])throw new Error("this module doesn't have valid method with name \"".concat(this.method,'"'))}return t.for=function(t,e,r,n,o){return void 0===r&&(r=!0),void 0===n&&(n="sendMessage"),new a(e,t,r,n,o)},t.connect=function(t,e,r,n){return void 0===e&&(e=null),void 0===r&&(r={}),new this(t.connect(e,r),!0,"postMessage",n)},t.prototype.message=function(t,e,r){var n=this,i=Array.prototype.slice.call(arguments);return"string"==typeof i[0]&&("object"==typeof i[1]?(i[1].action=i[0],i=i.slice(1)):i[0]={action:i[0]}),new Promise((function(t,e){var r,a=n._expandArgumentsForChromeMethod(i,t,e);a.length>1&&a.unshift(n.extensionId),(r=n.module[n.method]).call.apply(r,o([n.module],a,!1))}))},t.prototype.tab=function(t,e,r,n){return void 0===e&&(e=!0),void 0===r&&(r="sendMessage"),new a(t,this.module,e,r,n)},t.prototype._expandArgumentsForChromeMethod=function(t,e,r){var n=this,o=this._isStrictMode(t);if("function"==typeof t[t.length-1]){var i=t[t.length-1];t[t.length-1]=function(t){return i(t),e(),!0}}else{t.push((function(t){return void 0===t&&(t={status:202}),n._finally(o,t,e,r),!0}))}return t},t.prototype._isStrictMode=function(t){return"boolean"==typeof t[t.length-1]?t[t.length-1]:this.strict},t.prototype._finally=function(t,e,r,n){var o=parseInt(e.status,10);t&&(o<200||400<=o)?n(e):r(e)},t}();e.Client=i;var a=function(t){function e(e,r,n,o,i){void 0===n&&(n=!0),void 0===o&&(o="sendMessage");var a=t.call(this,r,n,o,i)||this;return a.tabId=e,a}return n(e,t),e.prototype._expandArgumentsForChromeMethod=function(e,r,n){return e.unshift(this.tabId),t.prototype._expandArgumentsForChromeMethod.call(this,e,r,n)},e}(i);e.TargettedClient=a},883:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DummyLogger=e.WARN=e.INFO=e.DEBUG=e.Logger=void 0;var r=function(){function t(t,r){void 0===t&&(t=e.DEBUG),void 0===r&&(r={write:function(){Array.prototype.slice.call(arguments)}}),this.level=t,this.writer=r}return t.prototype.debug=function(t,r){if(!(this.level>e.DEBUG)){var n=arguments.length>=2?[t,r]:[this.fromStack(),t],o=n[0],i=n[1];this.writer.write("%c[".concat(o,"]"),"color: #ddd; font-weight: bold;",i)}},t.prototype.info=function(t,r){if(!(this.level>e.INFO)){var n=arguments.length>=2?[t,r]:[this.fromStack(),t],o=n[0],i=n[1];this.writer.write("%c[".concat(o,"]%c"),"color: blue; font-weight: bold;","",i)}},t.prototype.warn=function(t,r){if(!(this.level>e.WARN)){var n=arguments.length>=2?[t,r]:[this.fromStack(),t],o=n[0],i=n[1];this.writer.write("%c[".concat(o,"]%c"),"color: orange; font-weight: bold;","",i)}},t.prototype.fromStack=function(t){return void 0===t&&(t=3),(new Error).stack.split("\n")[t].trim()},t}();e.Logger=r,e.DEBUG=0,e.INFO=1,e.WARN=2;var n=function(){function t(){}return t.prototype.debug=function(){},t.prototype.info=function(){},t.prototype.warn=function(){},t}();e.DummyLogger=n},13:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var r=function(){function t(t){void 0===t&&(t=null),this.resolveFunc=t,this.routes={}}return t._NotFoundController=function(t){return{message:'routing not found for "'.concat(t.action||t.act,'"'),status:404}},t.prototype.on=function(t,e){this.routes=this.routes||{},this.routes[t]=e},t.prototype.listener=function(){return this.listen.bind(this)},t.prototype.listen=function(t,e,r){var n=this;void 0===r&&(r=function(t){});try{var o=this.match(t,e);if(!o)return!0;var i=o.call({message:t,sender:e},t,e);return void 0===i||(i instanceof Promise?(i.then((function(t){r(n._formatResponse(t))})).catch((function(t){r(n._formatResponse(t))})),!0):(r(this._formatResponse(i)),!0))}catch(t){return r(this._formatResponse({message:"Unhandled Background Error: "+String(t),status:500})),!0}},t.prototype.match=function(t,e){var r=this._resolveRoute(t,e).name,n=this.routes[r],o=this.constructor;return n||(n=o._NotFoundController),n},t.prototype._resolveRoute=function(t,e){return"function"==typeof this.resolveFunc?this.resolveFunc(t,e):this._defaultResolveFunc(t)},t.prototype._defaultResolveFunc=function(t){return"string"==typeof t?{name:t,params:{}}:"string"==typeof t.act?{name:t.act,params:{}}:"string"==typeof t.action?{name:t.action,params:{}}:{name:"__notfound",params:{}}},t.prototype._formatResponse=function(t){return t instanceof Error?{data:{message:t.message},error:{message:t.message,name:t.name,stack:t.stack},status:500}:t&&Number.isInteger(t.status)?t:{status:200,data:t.data||t}},t}();e.Router=r},849:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SerialRouter=void 0;var r=function(){function t(t,e){void 0===t&&(t=4),void 0===e&&(e={}),this.routes=[],this.poollength=t,this.sequencepool=[],this.resolver=function(){if("function"==typeof e)return e;var t={};return Object.keys(e).map((function(r){"function"==typeof e[r]&&(t[r]=e[r])})),t}();for(var r=0;r<t;r++)this.sequencepool.push({})}return t.prototype.on=function(t,e){var r=this;if("function"==typeof t)return this.routes.push({matchFunc:t,handlerFunc:e}),this;if(Array.isArray(t)&&0!==t.length){var n=t.map((function(t){switch(typeof t){case"boolean":return function(){return t};case"string":if("function"!=typeof r.resolver)throw new Error("resolver must be given when you use simple string matcher");return function(e){return t===r.resolver(e)};case"object":return function(e){return Object.keys(t).every((function(n){return t[n]instanceof RegExp?t[n].test(e[n]):"string"==typeof t[n]&&("function"==typeof r.resolver[n]?t[n]===r.resolver[n](e[n],e):t[n]===e[n])}))};default:return function(){return!1}}}));this.routes.push({matchFunc:function(t){return n.every((function(e,r){return e(t[r])}))},handlerFunc:e})}return this},t.prototype.match=function(){for(var t=0,e=this.routes;t<e.length;t++){var r=e[t];if(r.matchFunc.call(this,this.sequencepool.slice(0)))return r.handlerFunc}},t.prototype.listen=function(t){this.sequencepool.unshift(t),this.sequencepool=this.sequencepool.slice(0,this.poollength);var e=this.match();return e&&e.call({sequence:this.sequencepool.slice(0)},t),!0},t.prototype.listener=function(){return this.listen.bind(this)},t}();e.SerialRouter=r},526:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SerialRouter=e.Router=void 0;var n=r(13);Object.defineProperty(e,"Router",{enumerable:!0,get:function(){return n.Router}});var o=r(849);Object.defineProperty(e,"SerialRouter",{enumerable:!0,get:function(){return o.SerialRouter}})},622:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),o(r(528),e),o(r(526),e),o(r(883),e)},29:(t,e,r)=>{t=r.nmd(t),(()=>{if(void 0!==r.g);else if("undefined"!=typeof window)window.global=window;else{if("undefined"==typeof self)throw new Error("cannot export Go (neither global, window nor self is defined)");self.global=self}const e=()=>{const t=new Error("not implemented");return t.code="ENOSYS",t};if(!r.g.fs){let t="";r.g.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(e,r){t+=o.decode(r);const n=t.lastIndexOf("\n");return-1!=n&&(t=t.substr(n+1)),r.length},write(t,r,n,o,i,a){if(0!==n||o!==r.length||null!==i)return void a(e());a(null,this.writeSync(t,r))},chmod(t,r,n){n(e())},chown(t,r,n,o){o(e())},close(t,r){r(e())},fchmod(t,r,n){n(e())},fchown(t,r,n,o){o(e())},fstat(t,r){r(e())},fsync(t,e){e(null)},ftruncate(t,r,n){n(e())},lchown(t,r,n,o){o(e())},link(t,r,n){n(e())},lstat(t,r){r(e())},mkdir(t,r,n){n(e())},open(t,r,n,o){o(e())},read(t,r,n,o,i,a){a(e())},readdir(t,r){r(e())},readlink(t,r){r(e())},rename(t,r,n){n(e())},rmdir(t,r){r(e())},stat(t,r){r(e())},symlink(t,r,n){n(e())},truncate(t,r,n){n(e())},unlink(t,r){r(e())},utimes(t,r,n,o){o(e())}}}r.g.process||(r.g.process={getuid:()=>-1,getgid:()=>-1,geteuid:()=>-1,getegid:()=>-1,getgroups(){throw e()},pid:-1,ppid:-1,umask(){throw e()},cwd(){throw e()},chdir(){throw e()}}),r.g.performance||(r.g.performance={now(){const[t,e]=process.hrtime();return 1e3*t+e/1e6}});const n=new TextEncoder("utf-8"),o=new TextDecoder("utf-8");let i=new DataView(new ArrayBuffer(8));var a=[];if(r.g.Go=class{constructor(){this._callbackTimeouts=new Map,this._nextCallbackTimeoutID=1;const t=()=>new DataView(this._inst.exports.memory.buffer),e=t=>{i.setBigInt64(0,t,!0);const e=i.getFloat64(0,!0);if(0===e)return;if(!isNaN(e))return e;const r=0xffffffffn&t;return this._values[r]},u=r=>{let n=t().getBigUint64(r,!0);return e(n)},c=t=>{const e=0x7FF80000n;if("number"==typeof t)return isNaN(t)?e<<32n:0===t?e<<32n|1n:(i.setFloat64(0,t,!0),i.getBigInt64(0,!0));switch(t){case void 0:return 0n;case null:return e<<32n|2n;case!0:return e<<32n|3n;case!1:return e<<32n|4n}let r=this._ids.get(t);void 0===r&&(r=this._idPool.pop(),void 0===r&&(r=BigInt(this._values.length)),this._values[r]=t,this._goRefCounts[r]=0,this._ids.set(t,r)),this._goRefCounts[r]++;let n=1n;switch(typeof t){case"string":n=2n;break;case"symbol":n=3n;break;case"function":n=4n}return r|(e|n)<<32n},s=(e,r)=>{let n=c(r);t().setBigUint64(e,n,!0)},l=(t,e,r)=>new Uint8Array(this._inst.exports.memory.buffer,t,e),f=(t,e,r)=>{const n=new Array(e);for(let r=0;r<e;r++)n[r]=u(t+8*r);return n},h=(t,e)=>o.decode(new DataView(this._inst.exports.memory.buffer,t,e)),p=Date.now()-performance.now();this.importObject={wasi_snapshot_preview1:{fd_write:function(e,r,n,i){let u=0;if(1==e)for(let e=0;e<n;e++){let n=r+8*e,i=t().getUint32(n+0,!0),c=t().getUint32(n+4,!0);u+=c;for(let e=0;e<c;e++){let r=t().getUint8(i+e);if(13==r);else if(10==r){o.decode(new Uint8Array(a));a=[]}else a.push(r)}}return t().setUint32(i,u,!0),0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit:t=>{if(!r.g.process)throw"trying to exit with code "+t;process.exit(t)},random_get:(t,e)=>(crypto.getRandomValues(l(t,e)),0)},gojs:{"runtime.ticks":()=>p+performance.now(),"runtime.sleepTicks":t=>{setTimeout(this._inst.exports.go_scheduler,t)},"syscall/js.finalizeRef":r=>{const n=t().getUint32(e(r),!0);if(this._goRefCounts[n]--,0===this._goRefCounts[n]){const t=this._values[n];this._values[n]=null,this._ids.delete(t),this._idPool.push(n)}},"syscall/js.stringVal":(t,e)=>{const r=h(t,e);return c(r)},"syscall/js.valueGet":(t,r,n)=>{let o=h(r,n),i=e(t),a=Reflect.get(i,o);return c(a)},"syscall/js.valueSet":(t,r,n,o)=>{const i=e(t),a=h(r,n),u=e(o);Reflect.set(i,a,u)},"syscall/js.valueDelete":(t,r,n)=>{const o=e(t),i=h(r,n);Reflect.deleteProperty(o,i)},"syscall/js.valueIndex":(t,r)=>c(Reflect.get(e(t),r)),"syscall/js.valueSetIndex":(t,r,n)=>{Reflect.set(e(t),r,e(n))},"syscall/js.valueCall":(r,n,o,i,a,u,c)=>{const l=e(n),p=h(o,i),d=f(a,u);try{const e=Reflect.get(l,p);s(r,Reflect.apply(e,l,d)),t().setUint8(r+8,1)}catch(e){s(r,e),t().setUint8(r+8,0)}},"syscall/js.valueInvoke":(r,n,o,i,a)=>{try{const a=e(n),u=f(o,i);s(r,Reflect.apply(a,void 0,u)),t().setUint8(r+8,1)}catch(e){s(r,e),t().setUint8(r+8,0)}},"syscall/js.valueNew":(r,n,o,i,a)=>{const u=e(n),c=f(o,i);try{s(r,Reflect.construct(u,c)),t().setUint8(r+8,1)}catch(e){s(r,e),t().setUint8(r+8,0)}},"syscall/js.valueLength":t=>e(t).length,"syscall/js.valuePrepareString":(r,o)=>{const i=String(e(o)),a=n.encode(i);s(r,a),t().setInt32(r+8,a.length,!0)},"syscall/js.valueLoadString":(t,r,n,o)=>{const i=e(t);l(r,n).set(i)},"syscall/js.valueInstanceOf":(t,r)=>e(t)instanceof e(r),"syscall/js.copyBytesToGo":(r,n,o,i,a)=>{let u=r,c=r+4;const s=l(n,o),f=e(a);if(!(f instanceof Uint8Array||f instanceof Uint8ClampedArray))return void t().setUint8(c,0);const h=f.subarray(0,s.length);s.set(h),t().setUint32(u,h.length,!0),t().setUint8(c,1)},"syscall/js.copyBytesToJS":(r,n,o,i,a)=>{let u=r,c=r+4;const s=e(n),f=l(o,i);if(!(s instanceof Uint8Array||s instanceof Uint8ClampedArray))return void t().setUint8(c,0);const h=f.subarray(0,s.length);s.set(h),t().setUint32(u,h.length,!0),t().setUint8(c,1)}}},this.importObject.env=this.importObject.gojs}async run(t){this._inst=t,this._values=[NaN,0,null,!0,!1,r.g,this],this._goRefCounts=[],this._ids=new Map,this._idPool=[],this.exited=!1;new DataView(this._inst.exports.memory.buffer);for(;;){const t=new Promise((t=>{this._resolveCallbackPromise=()=>{if(this.exited)throw new Error("bad callback: Go program has already exited");setTimeout(t,0)}}));if(this._inst.exports._start(),this.exited)break;await t}}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(t){const e=this;return function(){const r={id:t,this:this,args:arguments};return e._pendingEvent=r,e._resume(),r.result}}},r.g.require&&r.g.require.main===t&&r.g.process&&r.g.process.versions&&!r.g.process.versions.electron){3!=process.argv.length&&process.exit(1);const t=new Go;WebAssembly.instantiate(fs.readFileSync(process.argv[2]),t.importObject).then((e=>t.run(e.instance))).catch((t=>{process.exit(1)}))}})()},46:t=>{var e=9007199254740991,r="[object Arguments]",n="[object Function]",o="[object GeneratorFunction]",i=/^(?:0|[1-9]\d*)$/;var a=Object.prototype,u=a.hasOwnProperty,c=a.toString,s=a.propertyIsEnumerable,l=Math.max;function f(t,e){var n=y(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&m(t)}(t)&&u.call(t,"callee")&&(!s.call(t,"callee")||c.call(t)==r)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=n.length,i=!!o;for(var a in t)!e&&!u.call(t,a)||i&&("length"==a||d(a,o))||n.push(a);return n}function h(t,e,r){var n=t[e];u.call(t,e)&&v(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function p(t){if(!g(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e,r,n,o=(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||a,e===n),i=[];for(var c in t)("constructor"!=c||!o&&u.call(t,c))&&i.push(c);return i}function d(t,r){return!!(r=null==r?e:r)&&("number"==typeof t||i.test(t))&&t>-1&&t%1==0&&t<r}function v(t,e){return t===e||t!=t&&e!=e}var y=Array.isArray;function m(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}(t.length)&&!function(t){var e=g(t)?c.call(t):"";return e==n||e==o}(t)}function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var b,w=(b=function(t,e){!function(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var a=e[o],u=n?n(r[a],t[a],a,r,t):void 0;h(r,a,void 0===u?t[a]:u)}}(e,function(t){return m(t)?f(t,!0):p(t)}(e),t)},function(t,e){return e=l(void 0===e?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=l(r.length-e,0),i=Array(o);++n<o;)i[n]=r[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=r[n];return a[e]=i,function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,a)}}((function(t,e){var r=-1,n=e.length,o=n>1?e[n-1]:void 0,i=n>2?e[2]:void 0;for(o=b.length>3&&"function"==typeof o?(n--,o):void 0,i&&function(t,e,r){if(!g(r))return!1;var n=typeof e;return!!("number"==n?m(r)&&d(e,r.length):"string"==n&&e in r)&&v(r[e],t)}(e[0],e[1],i)&&(o=n<3?void 0:o,n=1),t=Object(t);++r<n;){var a=e[r];a&&b(t,a,r,o)}return t})));t.exports=w}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";const t=["https://user1.setupvpn.com","https://user2.setupvpn.com","https://user3.setupvpn.com","https://user4.setupvpn.com","https://user5.setupvpn.com","https://user6.setupvpn.com","https://user7.setupvpn.com","https://user8.setupvpn.com","https://user9.setupvpn.com","https://user10.setupvpn.com","https://user11.setupvpn.com","https://user12.setupvpn.com","https://user13.setupvpn.com","https://user14.setupvpn.com","https://user15.setupvpn.com"];var e;function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i="ext_";const a={VERSION:"4.0.7",PLATFORM:"chrome",IMAGES:{ONICON:"icon128.png",OFFICON:"officon128.png"},TIMEOUT:{PROXYSETTING:{SCHEME:"https",HOST:"127.0.0.1",PORT:65534}},MAINUIS:t,STORAGEKEYS:(e={BASELINK:"".concat(i,"baselink"),LASTBASELINK:"".concat(i,"lastBaselink"),BASELINKNOTFOUND:"".concat(i,"baselinkNotFound"),LOCALE:"".concat(i,"locale"),LANGUAGE:"".concat(i,"language"),USERDATA:"userData",CONFIGDATA:"".concat(i,"configData"),CONFIGDATATTL:"".concat(i,"configDataTTL"),PROXYSEARCHFAILED:"".concat(i,"proxySearchFailed"),PROXYSEARCHFAILEDCOUNTRY:"".concat(i,"proxySearchFailedCountry"),PROXYSEARCHLOCK:"".concat(i,"proxySearchLock"),ISPROXYON:"".concat(i,"isProxyOn"),CURRENTPROXY:"".concat(i,"currentSelectedProxy"),DCACHE:"".concat(i,"dCache"),NOTIFICATIONS:"".concat(i,"cachedNotifications"),RATEUSNEXTTIME:"".concat(i,"ratingNextTime"),PROXYEXTENSIONS:"".concat(i,"activeProxyExtensionList"),IPLOOKUPURL:"".concat(i,"ipLookUpUrl"),STICKEDCOUNTRIES:"".concat(i,"stickedCountries"),ISCOUNTRYSORTED:"".concat(i,"isCountrySorted"),LASTSELECTEDTAB:"".concat(i,"lastSelectedTab"),BYPASSLIST:"".concat(i,"bypassList"),ISINAPPNOTIFICATIONOFF:"".concat(i,"isInAppNotificationOff"),LASTLOGINRESULT:"".concat(i,"lastLoginResult"),INSTALLID:"".concat(i,"installId"),LASTRESENDACTIVATION:"".concat(i,"lastResendActivation"),SERVERSJSON:"".concat(i,"serversJson"),TIERNEXTUPDATE:"".concat(i,"tierNextUpdate"),ERRCACHE:"".concat(i,"errCache"),ECACHE:"".concat(i,"eCache"),RCACHE:"".concat(i,"rCache"),HASHCACHE:"".concat(i,"hashCache"),BASELINKTYPE:"".concat(i,"baselinkType"),DEBUGVAL:"".concat(i,"debugVal"),TIMEOUTSETTINGS:"".concat(i,"timeoutSettings"),TEASERNEXT:"".concat(i,"teaserNext"),VERSIONSTATUSNEXTUPDATE:"".concat(i,"versionStatusNextTime"),VERSIONSTATUS:"".concat(i,"versionStatus"),LOGINTYPE:"".concat(i,"logintype"),LSER:"".concat(i,"localeLser"),COUNTRYLOCALE:"".concat(i,"countryLocale"),CONFIGHARDTTL:"".concat(i,"configHardTTL"),LASTLOGOUTREASON:"".concat(i,"lastLogoutReason"),COUNTRYSESSIONSTATE:"".concat(i,"countrySessionState"),LASTFAILEDSERVER:"".concat(i,"lastFailedServer"),LASTHB:"".concat(i,"lastHB"),BYPASSHOSTS:"".concat(i,"bypassHosts"),SHOWWP:"showWP",LASTBASELINKTTL:"".concat(i,"lastBaselinkTTL")},o(e,"INSTALLID","".concat(i,"installID")),o(e,"INSTALLIDTIME","".concat(i,"installIDTime")),o(e,"VERSIONUPDATE","".concat(i,"versionUpdate")),o(e,"READNOTIFICATION","".concat(i,"readNotification")),o(e,"MARKEDBASELINK","".concat(i,"markBaselink")),o(e,"MARKEDCONFIG","".concat(i,"markedConfig")),o(e,"LASTSESSION","".concat(i,"lastSession")),o(e,"PROXYSEARCH","".concat(i,"proxySearch")),o(e,"NOTIFYHISTORY","".concat(i,"notifyHistory")),o(e,"EXPIRATIONTIME","".concat(i,"expirationTime")),o(e,"TIMELEFT","".concat(i,"timeLeft")),e),ERRORCODES:{CONNECTIONERROR:"net::ERR_PROXY_CONNECTION_FAILED",VERIFYERROR:"net::ERR_NAME_NOT_RESOLVED"},TTL:{TIER:86400,VERSIONSTATUS:86400}};r(46);const u="chromex.dispatch",c="chromex.port_name",s=t=>t,l=(t,e=s)=>({...t,...t.payload?{payload:e(t.payload)}:{}}),f=(t=s)=>e=>(r,n)=>e(((t,e=s,r)=>r?(n,...o)=>r(n,...o)?t(l(n,e),...o):t(n,...o):(r,...n)=>t(l(r,e),...n))(r,t,n)),h="updated",p="removed";const d={portName:c,dispatchResponder:(t,e)=>{Promise.resolve(t).then((t=>{e({error:null,value:t})})).catch((t=>{e({error:t.message,value:null})}))},serializer:s,deserializer:s,diffStrategy:function(t,e){const r=[];return Object.keys(e).forEach((n=>{t[n]!==e[n]&&r.push({key:n,value:e[n],change:h})})),Object.keys(t).forEach((t=>{e.hasOwnProperty(t)||r.push({key:t,change:p})})),r}};function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function y(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v(e)?e:String(e)}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=y(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function b(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var w="function"==typeof Symbol&&Symbol.observable||"@@observable",x=function(){return Math.random().toString(36).substring(7).split("").join(".")},E={INIT:"@@redux/INIT"+x(),REPLACE:"@@redux/REPLACE"+x(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+x()}};function S(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function O(t,e,r){var n;if("function"==typeof e&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(b(0));if("function"==typeof e&&void 0===r&&(r=e,e=void 0),void 0!==r){if("function"!=typeof r)throw new Error(b(1));return r(O)(t,e)}if("function"!=typeof t)throw new Error(b(2));var o=t,i=e,a=[],u=a,c=!1;function s(){u===a&&(u=a.slice())}function l(){if(c)throw new Error(b(3));return i}function f(t){if("function"!=typeof t)throw new Error(b(4));if(c)throw new Error(b(5));var e=!0;return s(),u.push(t),function(){if(e){if(c)throw new Error(b(6));e=!1,s();var r=u.indexOf(t);u.splice(r,1),a=null}}}function h(t){if(!S(t))throw new Error(b(7));if(void 0===t.type)throw new Error(b(8));if(c)throw new Error(b(9));try{c=!0,i=o(i,t)}finally{c=!1}for(var e=a=u,r=0;r<e.length;r++){(0,e[r])()}return t}return h({type:E.INIT}),(n={dispatch:h,subscribe:f,getState:l,replaceReducer:function(t){if("function"!=typeof t)throw new Error(b(10));o=t,h({type:E.REPLACE})}})[w]=function(){var t,e=f;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(b(11));function r(){t.next&&t.next(l())}return r(),{unsubscribe:e(r)}}})[w]=function(){return this},t},n}function L(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}var k=function(t){return"@@redux-saga/"+t},T=k("CANCEL_PROMISE"),_=k("CHANNEL_END"),A=k("IO"),P=k("MATCH"),j=k("MULTICAST"),N=k("SAGA_ACTION"),C=k("SELF_CANCELLATION"),R=k("TASK"),I=k("TASK_CANCEL"),U=k("TERMINATE"),G=k("LOCATION");function F(){return F=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},F.apply(this,arguments)}var D=function(t){return null==t},M=function(t){return null!=t},Y=function(t){return"function"==typeof t},H=function(t){return"string"==typeof t},q=Array.isArray,B=function(t){return t&&Y(t.then)},V=function(t){return t&&Y(t.next)&&Y(t.throw)},W=function t(e){return e&&(H(e)||X(e)||Y(e)||q(e)&&e.every(t))},K=function(t){return t&&Y(t.take)&&Y(t.close)},z=function(t){return Y(t)&&t.hasOwnProperty("toString")},X=function(t){return Boolean(t)&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype},J=function(t){return K(t)&&t[j]},Q=function(t){return function(){return t}}(!0),$=function(){};var Z=function(t){return t};"function"==typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var tt=function(t,e){F(t,e),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach((function(r){t[r]=e[r]}))};function et(t,e){var r=t.indexOf(e);r>=0&&t.splice(r,1)}var rt=function(t){throw t},nt=function(t){return{value:t,done:!0}};function ot(t,e,r){void 0===e&&(e=rt),void 0===r&&(r="iterator");var n={meta:{name:r},next:t,throw:e,return:nt,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(n[Symbol.iterator]=function(){return n}),n}function it(t,e){e.sagaStack}var at=function(t){return Array.apply(null,new Array(t))},ut=function(t){return function(e){return t(Object.defineProperty(e,N,{value:!0}))}},ct=function(t){return t===U},st=function(t){return t===I},lt=function(t){return ct(t)||st(t)};function ft(t,e){var r=Object.keys(t),n=r.length;var o,i=0,a=q(t)?at(n):{},u={};return r.forEach((function(t){var r=function(r,u){o||(u||lt(r)?(e.cancel(),e(r,u)):(a[t]=r,++i===n&&(o=!0,e(a))))};r.cancel=$,u[t]=r})),e.cancel=function(){o||(o=!0,r.forEach((function(t){return u[t].cancel()})))},u}function ht(t){return{name:t.name||"anonymous",location:pt(t)}}function pt(t){return t[G]}function dt(t,e){void 0===t&&(t=10);var r=new Array(t),n=0,o=0,i=0,a=function(e){r[o]=e,o=(o+1)%t,n++},u=function(){if(0!=n){var e=r[i];return r[i]=null,n--,i=(i+1)%t,e}},c=function(){for(var t=[];n;)t.push(u());return t};return{isEmpty:function(){return 0==n},put:function(u){var s;if(n<t)a(u);else switch(e){case 1:throw new Error("Channel's Buffer overflow!");case 3:r[o]=u,i=o=(o+1)%t;break;case 4:s=2*t,r=c(),n=r.length,o=r.length,i=0,r.length=s,t=s,a(u)}},take:u,flush:c}}var vt=function(t){return dt(t,4)},yt="TAKE",mt="PUT",gt="ALL",bt="RACE",wt="CALL",xt="CPS",Et="FORK",St="JOIN",Ot="CANCEL",Lt="SELECT",kt="ACTION_CHANNEL",Tt="CANCELLED",_t="FLUSH",At="GET_CONTEXT",Pt="SET_CONTEXT",jt=function(t,e){var r;return(r={})[A]=!0,r.combinator=!1,r.type=t,r.payload=e,r},Nt=function(t){return jt(Et,F({},t.payload,{detached:!0}))};function Ct(t,e){return void 0===t&&(t="*"),W(t)?(M(e),jt(yt,{pattern:t})):J(t)&&M(e)&&W(e)?jt(yt,{channel:t,pattern:e}):K(t)?(M(e),jt(yt,{channel:t})):void 0}function Rt(t,e){return D(e)&&(e=t,t=void 0),jt(mt,{channel:t,action:e})}function It(t){var e=jt(gt,t);return e.combinator=!0,e}function Ut(t,e){var r,n=null;return Y(t)?r=t:(q(t)?(n=t[0],r=t[1]):(n=t.context,r=t.fn),n&&H(r)&&Y(n[r])&&(r=n[r])),{context:n,fn:r,args:e}}function Gt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return jt(wt,Ut(t,r))}function Ft(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return jt(Et,Ut(t,r))}function Dt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Nt(Ft.apply(void 0,[t].concat(r)))}function Mt(t){return void 0===t&&(t=C),jt(Ot,t)}function Yt(t){void 0===t&&(t=Z);for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return jt(Lt,{selector:t,args:r})}function Ht(){var t={};return t.promise=new Promise((function(e,r){t.resolve=e,t.reject=r})),t}const qt=Ht;var Bt=[],Vt=0;function Wt(t){try{Xt(),t()}finally{Jt()}}function Kt(t){Bt.push(t),Vt||(Xt(),Qt())}function zt(t){try{return Xt(),t()}finally{Qt()}}function Xt(){Vt++}function Jt(){Vt--}function Qt(){var t;for(Jt();!Vt&&void 0!==(t=Bt.shift());)Wt(t)}var $t=function(t){return function(e){return t.some((function(t){return ne(t)(e)}))}},Zt=function(t){return function(e){return t(e)}},te=function(t){return function(e){return e.type===String(t)}},ee=function(t){return function(e){return e.type===t}},re=function(){return Q};function ne(t){var e="*"===t?re:H(t)?te:q(t)?$t:z(t)?te:Y(t)?Zt:X(t)?ee:null;if(null===e)throw new Error("invalid pattern: "+t);return e(t)}var oe={type:_},ie=function(t){return t&&t.type===_};function ae(t){void 0===t&&(t=vt());var e=!1,r=[];return{take:function(n){e&&t.isEmpty()?n(oe):t.isEmpty()?(r.push(n),n.cancel=function(){et(r,n)}):n(t.take())},put:function(n){if(!e){if(0===r.length)return t.put(n);r.shift()(n)}},flush:function(r){e&&t.isEmpty()?r(oe):r(t.flush())},close:function(){if(!e){e=!0;var t=r;r=[];for(var n=0,o=t.length;n<o;n++){(0,t[n])(oe)}}}}}function ue(){var t,e,r,n,o,i,a=(e=!1,n=r=[],o=function(){n===r&&(n=r.slice())},i=function(){e=!0;var t=r=n;n=[],t.forEach((function(t){t(oe)}))},(t={})[j]=!0,t.put=function(t){if(!e)if(ie(t))i();else for(var o=r=n,a=0,u=o.length;a<u;a++){var c=o[a];c[P](t)&&(c.cancel(),c(t))}},t.take=function(t,r){var i,a;void 0===r&&(r=re),e?t(oe):(t[P]=r,o(),n.push(t),t.cancel=(i=function(){o(),et(n,t)},a=!1,function(){a||(a=!0,i())}))},t.close=i,t),u=a.put;return a.put=function(t){t[N]?u(t):Kt((function(){u(t)}))},a}var ce=0,se=1,le=2,fe=3;function he(t,e){var r=t[T];Y(r)&&(e.cancel=r),t.then(e,(function(t){e(t,!0)}))}var pe,de=0,ve=function(){return++de};function ye(t){t.isRunning()&&t.cancel()}var me=((pe={})[yt]=function(t,e,r){var n=e.channel,o=void 0===n?t.channel:n,i=e.pattern,a=e.maybe,u=function(t){t instanceof Error?r(t,!0):!ie(t)||a?r(t):r(U)};try{o.take(u,M(i)?ne(i):null)}catch(t){return void r(t,!0)}r.cancel=u.cancel},pe[mt]=function(t,e,r){var n=e.channel,o=e.action,i=e.resolve;Kt((function(){var e;try{e=(n?n.put:t.dispatch)(o)}catch(t){return void r(t,!0)}i&&B(e)?he(e,r):r(e)}))},pe[gt]=function(t,e,r,n){var o=n.digestEffect,i=de,a=Object.keys(e);if(0!==a.length){var u=ft(e,r);a.forEach((function(t){o(e[t],i,u[t],t)}))}else r(q(e)?[]:{})},pe[bt]=function(t,e,r,n){var o=n.digestEffect,i=de,a=Object.keys(e),u=q(e)?at(a.length):{},c={},s=!1;a.forEach((function(t){var e=function(e,n){s||(n||lt(e)?(r.cancel(),r(e,n)):(r.cancel(),s=!0,u[t]=e,r(u)))};e.cancel=$,c[t]=e})),r.cancel=function(){s||(s=!0,a.forEach((function(t){return c[t].cancel()})))},a.forEach((function(t){s||o(e[t],i,c[t],t)}))},pe[wt]=function(t,e,r,n){var o=e.context,i=e.fn,a=e.args,u=n.task;try{var c=i.apply(o,a);if(B(c))return void he(c,r);if(V(c))return void _e(t,c,u.context,de,ht(i),!1,r);r(c)}catch(t){r(t,!0)}},pe[xt]=function(t,e,r){var n=e.context,o=e.fn,i=e.args;try{var a=function(t,e){D(t)?r(e):r(t,!0)};o.apply(n,i.concat(a)),a.cancel&&(r.cancel=a.cancel)}catch(t){r(t,!0)}},pe[Et]=function(t,e,r,n){var o=e.context,i=e.fn,a=e.args,u=e.detached,c=n.task,s=function(t){var e=t.context,r=t.fn,n=t.args;try{var o=r.apply(e,n);if(V(o))return o;var i=!1;return ot((function(t){return i?{value:t,done:!0}:(i=!0,{value:o,done:!B(o)})}))}catch(t){return ot((function(){throw t}))}}({context:o,fn:i,args:a}),l=function(t,e){return t.isSagaIterator?{name:t.meta.name}:ht(e)}(s,i);zt((function(){var e=_e(t,s,c.context,de,l,u,void 0);u?r(e):e.isRunning()?(c.queue.addTask(e),r(e)):e.isAborted()?c.queue.abort(e.error()):r(e)}))},pe[St]=function(t,e,r,n){var o=n.task,i=function(t,e){if(t.isRunning()){var r={task:o,cb:e};e.cancel=function(){t.isRunning()&&et(t.joiners,r)},t.joiners.push(r)}else t.isAborted()?e(t.error(),!0):e(t.result())};if(q(e)){if(0===e.length)return void r([]);var a=ft(e,r);e.forEach((function(t,e){i(t,a[e])}))}else i(e,r)},pe[Ot]=function(t,e,r,n){var o=n.task;e===C?ye(o):q(e)?e.forEach(ye):ye(e),r()},pe[Lt]=function(t,e,r){var n=e.selector,o=e.args;try{r(n.apply(void 0,[t.getState()].concat(o)))}catch(t){r(t,!0)}},pe[kt]=function(t,e,r){var n=e.pattern,o=ae(e.buffer),i=ne(n),a=function e(r){ie(r)||t.channel.take(e,i),o.put(r)},u=o.close;o.close=function(){a.cancel(),u()},t.channel.take(a,i),r(o)},pe[Tt]=function(t,e,r,n){r(n.task.isCancelled())},pe[_t]=function(t,e,r){e.flush(r)},pe[At]=function(t,e,r,n){r(n.task.context[e])},pe[Pt]=function(t,e,r,n){var o=n.task;tt(o.context,e),r()},pe);function ge(t,e){return t+"?"+e}function be(t){var e=t.name,r=t.location;return r?e+"  "+ge(r.fileName,r.lineNumber):e}function we(t){var e,r,n,o=(e=function(t){return t.cancelledTasks},r=t,(n=[]).concat.apply(n,r.map(e)));return o.length?["Tasks cancelled due to error:"].concat(o).join("\n"):""}var xe=null,Ee=[],Se=function(t){t.crashedEffect=xe,Ee.push(t)},Oe=function(){xe=null,Ee.length=0},Le=function(t){xe=t},ke=function(){var t=Ee[0],e=Ee.slice(1),r=t.crashedEffect?function(t){var e=pt(t);return e?e.code+"  "+ge(e.fileName,e.lineNumber):""}(t.crashedEffect):null;return["The above error occurred in task "+be(t.meta)+(r?" \n when executing effect "+r:"")].concat(e.map((function(t){return"    created by "+be(t.meta)})),[we(Ee)]).join("\n")};function Te(t,e,r,n,o,i,a){var u;void 0===a&&(a=$);var c,s,l=ce,f=null,h=[],p=Object.create(r),d=function(t,e,r){var n,o=[],i=!1;function a(t){e(),c(),r(t,!0)}function u(e){o.push(e),e.cont=function(u,c){i||(et(o,e),e.cont=$,c?a(u):(e===t&&(n=u),o.length||(i=!0,r(n))))}}function c(){i||(i=!0,o.forEach((function(t){t.cont=$,t.cancel()})),o=[])}return u(t),{addTask:u,cancelAll:c,abort:a,getTasks:function(){return o}}}(e,(function(){h.push.apply(h,d.getTasks().map((function(t){return t.meta.name})))}),v);function v(e,r){if(r){if(l=le,Se({meta:o,cancelledTasks:h}),y.isRoot){var n=ke();Oe(),t.onError(e,{sagaStack:n})}s=e,f&&f.reject(e)}else e===I?l=se:l!==se&&(l=fe),c=e,f&&f.resolve(e);y.cont(e,r),y.joiners.forEach((function(t){t.cb(e,r)})),y.joiners=null}var y=((u={})[R]=!0,u.id=n,u.meta=o,u.isRoot=i,u.context=p,u.joiners=[],u.queue=d,u.cancel=function(){l===ce&&(l=se,d.cancelAll(),v(I,!1))},u.cont=a,u.end=v,u.setContext=function(t){tt(p,t)},u.toPromise=function(){return f||(f=qt(),l===le?f.reject(s):l!==ce&&f.resolve(c)),f.promise},u.isRunning=function(){return l===ce},u.isCancelled=function(){return l===se||l===ce&&e.status===se},u.isAborted=function(){return l===le},u.result=function(){return c},u.error=function(){return s},u);return y}function _e(t,e,r,n,o,i,a){var u=t.finalizeRunEffect((function(e,r,n){if(B(e))he(e,n);else if(V(e))_e(t,e,s.context,r,o,!1,n);else if(e&&e[A]){(0,me[e.type])(t,e.payload,n,l)}else n(e)}));f.cancel=$;var c={meta:o,cancel:function(){c.status===ce&&(c.status=se,f(I))},status:ce},s=Te(t,c,r,n,o,i,a),l={task:s,digestEffect:h};return a&&(a.cancel=s.cancel),f(),s;function f(t,r){try{var o;r?(o=e.throw(t),Oe()):st(t)?(c.status=se,f.cancel(),o=Y(e.return)?e.return(I):{done:!0,value:I}):o=ct(t)?Y(e.return)?e.return():{done:!0}:e.next(t),o.done?(c.status!==se&&(c.status=fe),c.cont(o.value)):h(o.value,n,f)}catch(t){if(c.status===se)throw t;c.status=le,c.cont(t,!0)}}function h(e,r,n,o){void 0===o&&(o="");var i,a=ve();function c(r,o){i||(i=!0,n.cancel=$,t.sagaMonitor&&(o?t.sagaMonitor.effectRejected(a,r):t.sagaMonitor.effectResolved(a,r)),o&&Le(e),n(r,o))}t.sagaMonitor&&t.sagaMonitor.effectTriggered({effectId:a,parentEffectId:r,label:o,effect:e}),c.cancel=$,n.cancel=function(){i||(i=!0,c.cancel(),c.cancel=$,t.sagaMonitor&&t.sagaMonitor.effectCancelled(a))},u(e,a,c)}}function Ae(t,e){var r=t.channel,n=void 0===r?ue():r,o=t.dispatch,i=t.getState,a=t.context,u=void 0===a?{}:a,c=t.sagaMonitor,s=t.effectMiddlewares,l=t.onError,f=void 0===l?it:l;for(var h=arguments.length,p=new Array(h>2?h-2:0),d=2;d<h;d++)p[d-2]=arguments[d];var v=e.apply(void 0,p);var y,m=ve();if(c&&(c.rootSagaStarted=c.rootSagaStarted||$,c.effectTriggered=c.effectTriggered||$,c.effectResolved=c.effectResolved||$,c.effectRejected=c.effectRejected||$,c.effectCancelled=c.effectCancelled||$,c.actionDispatched=c.actionDispatched||$,c.rootSagaStarted({effectId:m,saga:e,args:p})),s){var g=L.apply(void 0,s);y=function(t){return function(e,r,n){return g((function(e){return t(e,r,n)}))(e)}}}else y=Z;var b={channel:n,dispatch:ut(o),getState:i,sagaMonitor:c,onError:f,finalizeRunEffect:y};return zt((function(){var t=_e(b,v,u,m,ht(e),!0,void 0);return c&&c.effectResolved(m,t),t}))}const Pe=function(t){var e,r=void 0===t?{}:t,n=r.context,o=void 0===n?{}:n,i=r.channel,a=void 0===i?ue():i,u=r.sagaMonitor,c=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(r,["context","channel","sagaMonitor"]);function s(t){var r=t.getState,n=t.dispatch;return e=Ae.bind(null,F({},c,{context:o,channel:a,dispatch:n,getState:r,sagaMonitor:u})),function(t){return function(e){u&&u.actionDispatched&&u.actionDispatched(e);var r=t(e);return a.put(e),r}}}return s.run=function(){return e.apply(void 0,arguments)},s.setContext=function(t){tt(o,t)},s},je=Pe;var Ne="persist:",Ce="persist/FLUSH",Re="persist/REHYDRATE",Ie="persist/PAUSE",Ue="persist/PERSIST",Ge="persist/PURGE",Fe="persist/REGISTER";function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function Me(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ye(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function He(t,e,r,n){n.debug;var o=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Me(r,!0).forEach((function(e){Ye(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Me(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},r);return t&&"object"===De(t)&&Object.keys(t).forEach((function(n){"_persist"!==n&&e[n]===r[n]&&(o[n]=t[n])})),o}function qe(t){var e,r=t.blacklist||null,n=t.whitelist||null,o=t.transforms||[],i=t.throttle||0,a="".concat(void 0!==t.keyPrefix?t.keyPrefix:Ne).concat(t.key),u=t.storage;e=!1===t.serialize?function(t){return t}:"function"==typeof t.serialize?t.serialize:Be;var c=t.writeFailHandler||null,s={},l={},f=[],h=null,p=null;function d(){if(0===f.length)return h&&clearInterval(h),void(h=null);var t=f.shift(),r=o.reduce((function(e,r){return r.in(e,t,s)}),s[t]);if(void 0!==r)try{l[t]=e(r)}catch(t){}else delete l[t];0===f.length&&(Object.keys(l).forEach((function(t){void 0===s[t]&&delete l[t]})),p=u.setItem(a,e(l)).catch(y))}function v(t){return(!n||-1!==n.indexOf(t)||"_persist"===t)&&(!r||-1===r.indexOf(t))}function y(t){c&&c(t)}return{update:function(t){Object.keys(t).forEach((function(e){v(e)&&s[e]!==t[e]&&-1===f.indexOf(e)&&f.push(e)})),Object.keys(s).forEach((function(e){void 0===t[e]&&v(e)&&-1===f.indexOf(e)&&void 0!==s[e]&&f.push(e)})),null===h&&(h=setInterval(d,i)),s=t},flush:function(){for(;0!==f.length;)d();return p||Promise.resolve()}}}function Be(t){return JSON.stringify(t)}function Ve(t){var e,r=t.transforms||[],n="".concat(void 0!==t.keyPrefix?t.keyPrefix:Ne).concat(t.key),o=t.storage;t.debug;return e=!1===t.deserialize?function(t){return t}:"function"==typeof t.deserialize?t.deserialize:We,o.getItem(n).then((function(t){if(t)try{var n={},o=e(t);return Object.keys(o).forEach((function(t){n[t]=r.reduceRight((function(e,r){return r.out(e,t,o)}),e(o[t]))})),n}catch(t){throw t}}))}function We(t){return JSON.parse(t)}function Ke(t){0}function ze(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Xe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ze(r,!0).forEach((function(e){Je(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ze(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Je(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qe(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function $e(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ze(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ze(r,!0).forEach((function(e){er(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ze(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function er(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var rr={registry:[],bootstrapped:!1},nr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Fe:return tr({},t,{registry:[].concat($e(t.registry),[e.key])});case Re:var r=t.registry.indexOf(e.key),n=$e(t.registry);return n.splice(r,1),tr({},t,{registry:n,bootstrapped:0===n.length});default:return t}};var or="INIT_STORE",ir="SAGA_START_BASELINK_SEARCH",ar="SAGA_UPDATE_BASELINK_SEARCH",ur="SAGA_CANCEL_BASELINK_SEARCH",cr="SAGA_TRYAGAIN_BASELINK_SEARCH",sr="SAGA_SET_BASELINK",lr="LOGOUT",fr="UPDATE_PROXYSETTING",hr="UPDATE_TESTREQUEST",pr="SAGA_BROWSER_PERMISSIONS_CHANGED",dr="SAGA_SET_PERMISSION",vr="UPDATE_USER",yr="UPDATE_CONFIG",mr="SET_IID",gr="SET_OS",br="SET_EXTID",wr="SET_VERSION",xr="SAGA_UPDATE_EXTERNAL_HOST",Er="UPDATE_EXTERNAL_HOST",Sr="UPDATE_WELCOMEPAGE",Or="UPDATE_TIMEOUT",Lr="UPDATE_NEXTTIERTTL",kr="UPDATE_SERVERSJSON",Tr="UPDATE_NEXTSTATUSTTL",_r="UPDATE_VERSIONSTATUS",Ar="UPDATE_PROXYEXTENSIONS",Pr="UPDATE_TOKENTTL";const jr=JSON.parse('{"retcode":200,"data":{"version":4,"update_interval_hours":6,"settings":{"tierbase_search_timeout":15000,"mainbase_search_timeout":20000,"tierbase_api_timeout":35000,"mainbase_api_timeout":30000,"proxy_search_timeout":30000,"mirror_timeout":20000,"base_ttl_days":90,"bs_consequtive_fails":42},"uibase":["https://user1.setupvpn.com","https://user2.setupvpn.com","https://user3.setupvpn.com","https://user4.setupvpn.com","https://user5.setupvpn.com","https://user6.setupvpn.com","https://user7.setupvpn.com","https://user8.setupvpn.com","https://user9.setupvpn.com","https://user10.setupvpn.com","https://user11.setupvpn.com","https://user13.setupvpn.com","https://user14.setupvpn.com","https://user15.setupvpn.com"],"mainbase":["https://sxkk.mouse.pics","https://xcxx.mouse.pics","https://mjgu.mouse.pics","https://tpkp.mouse.pics","https://kzfv.mouse.pics","https://plbu.defined.pics","https://1.foreground.work","https://1.awakened.work","https://1.6912044.cc","https://1.chairs-notify.top","https://1.discs-bound.top","https://1.absolute-refined.top"],"tierbase":["https://ehih.mouse.pics","https://kzsx.slight.pics","https://uaia.mouse.pics","https://icax.defined.pics","https://clrz.mouse.pics","https://jyvx.defined.pics","https://api.keepthisdomain.com","https://1.amino-vertical.top","https://1.ranks-learning.top","https://1.brass-gardens.top","https://1.rather-times.top","https://1.actually-rewards.top","https://1.treasure-equipped.top","https://1.bidder-sessions.top","https://1.luther-episodes.top","https://1.advise-stomach.top","https://1.glossary-titled.top","https://1.reward-reserved.top","https://1.online-device.top","https://1.makeup-melissa.top","https://1.shine-styles.top","https://1.wireless-bailey.top","https://1.depth-crafts.top","https://1.bright-motion.top","https://1.generic-partial.top","https://1.property-reward.top","https://1.manner-obesity.top","https://1.people-borough.top","https://1.trainers-wooden.top","https://1.summit-integral.top","https://1.framed-watch.top","https://1.fitted-bruce.top","https://1.hampton-warned.top","https://1.reality-clearing.top","https://1.static-firms.top","https://1.instant-drama.top","https://1.expand-herein.top","https://1.coated-textiles.top","https://1.wesley-reviewed.top","https://1.familiar-malaysia.top","https://1.heretowe.win","https://topluok.uk","https://listitnow.org","https://baseserver.uk","https://datacntech.com","https://1.default2024.uk","https://1.sahi.uk","https://1.area9.uk","https://1.allnine.uk","https://ksho.uk"],"t":1718226131460,"mirrors":["https://tierbase3.fra1.cdn.digitaloceanspaces.com/tierssv.json","https://tierbase4.s3.amazonaws.com/tierssv.json","https://pub-8029ed10cf4e4db0b3757e6b82ef7a40.r2.dev/tierssv.json","https://ams1.vultrobjects.com/tierupdate2/tierssv.json","https://mirror4.es-mad-1.linodeobjects.com/tierssv.json","https://raw.githubusercontent.com/the7c/update/master/master/ui/data.json","https://bitbucket.org/the7c/update/raw/master/edge/pub/data.json"]}}');var Nr;function Cr(t){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cr(t)}function Rr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Cr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Cr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Cr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ir="configdata",Ur="user",Gr="session",Fr="baselink",Dr="baselinksearch",Mr="proxysearch",Yr="proxysetting",Hr="testrequest",qr="serversjson",Br="permission",Vr="defaults",Wr="iid",Kr="extid",zr="welcompage",Xr="timeout",Jr="bypasslist",Qr="nexttierupdate",$r="nextstatusupdate",Zr="versionstatus",tn="proxyextensions",en="logoutreason",rn="notifications",nn="favorites",on="webpage",an="tokenttl",un="baselinkttl",cn=(Rr(Nr={},un,0),Rr(Nr,an,0),Rr(Nr,on,null),Rr(Nr,nn,[]),Rr(Nr,rn,[]),Rr(Nr,en,null),Rr(Nr,tn,[]),Rr(Nr,Zr,null),Rr(Nr,$r,0),Rr(Nr,Qr,0),Rr(Nr,Jr,["checkout.stripe.com","localhost","127.0.0.1","local","intra","intranet","onion"]),Rr(Nr,Xr,{deadline:0,interval:0,locked:!1}),Rr(Nr,"isextstore",!1),Rr(Nr,zr,!1),Rr(Nr,Ir,null),Rr(Nr,Ur,null),Rr(Nr,Wr,null),Rr(Nr,Kr,null),Rr(Nr,Gr,[]),Rr(Nr,Fr,{link:null,type:null,last:null,lastTTL:null}),Rr(Nr,Dr,{running:!1,error:null,progress:0}),Rr(Nr,Mr,{running:!1,error:null,progress:0}),Rr(Nr,Yr,{host:null,port:null,scheme:null,country:null,mode:null}),Rr(Nr,Hr,{id:null,count:0,host:null}),Rr(Nr,qr,jr),Rr(Nr,Br,!0),Rr(Nr,Vr,{cv:"4.0.7",platform:"chrome",os:null,brand:"sv"}),Nr);function sn(t){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sn(t)}function ln(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ln(Object(r),!0).forEach((function(e){hn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ln(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function hn(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==sn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===sn(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const pn=[function(t,e){var r,n,o,i,a,u=fn({},t);switch(e.type){case Ar:u=fn(fn({},u),{},hn({},tn,e.payload));break;case kr:u=fn(fn({},u),{},hn({},qr,e.payload));break;case Lr:u=fn(fn({},u),{},hn({},Qr,e.payload));break;case Tr:u=fn(fn({},u),{},hn({},$r,e.payload));break;case _r:u=fn(fn({},u),{},hn({},Zr,e.payload));break;case Or:u=fn(fn({},u),{},hn({},Xr,fn(fn({},u[Xr]),e.payload)));break;case vr:u=fn(fn({},u),{},hn({},Ur,{email:e.payload.email,hpassword:e.payload.hpassword,isGuest:e.payload.isGuest||!1}));break;case"REMOVE_CONFIG":u=fn(fn({},u),{},(hn(r={},Ir,cn[Ir]),hn(r,Gr,[]),r));break;case yr:u=fn(fn({},u),{},(hn(n={},Ir,fn(fn({},u[Ir]),e.payload)),hn(n,Gr,[]),n));break;case"UPDATE_CONFIG_AND_USER":u=fn(fn({},u),{},(hn(o={},Ir,fn(fn({},u[Ir]),e.payload.config)),hn(o,Ur,{email:e.payload.user.email,hpassword:e.payload.user.hpassword,isGuest:e.payload.isGuest||!1}),hn(o,Gr,[]),o));break;case ar:u=fn(fn({},u),{},hn({},Dr,fn(fn({},u[Dr]),e.payload)));break;case"UPDATE_PROXYSEARCH":u=fn(fn({},u),{},hn({},Mr,fn(fn({},u[Mr]),e.payload)));break;case"CANCEL_PROXYSEARCH":u=fn(fn({},u),{},hn({},Mr,{running:!1,error:null,progress:0}));break;case sr:u=fn(fn({},u),{},(hn(i={},Fr,fn({},e.baselink)),hn(i,Ir,fn(fn({},u[Ir]),{},{pendingDel:!0})),i));break;case dr:u=fn(fn({},u),{},hn({},Br,e.payload.permission));break;case lr:u=fn(fn({},u),{},(hn(a={},Ur,cn[Ur]),hn(a,Ir,cn[Ir]),hn(a,Mr,cn[Mr]),hn(a,Gr,cn[Gr]),hn(a,en,e.payload),a));break;case"CLEAR_LOGOUTREASON":u=fn(fn({},u),{},hn({},en,null));break;case fr:u=fn(fn({},u),{},hn({},Yr,e.payload));break;case hr:u=fn(fn({},u),{},hn({},Hr,fn(fn({},u[Hr]),e.payload)));break;case mr:u=fn(fn({},u),{},hn({},Wr,{id:e.payload.id,t:e.payload.t}));break;case gr:u=fn(fn({},u),{},hn({},Vr,fn(fn({},u[Vr]),{},{os:e.payload.os})));break;case br:u=fn(fn({},u),{},hn({},Kr,e.payload));break;case wr:u=fn(fn({},u),{},hn({},Vr,fn(fn({},u[Vr]),{},{cv:e.payload})));break;case"ADD_SESSION_IDENTIFIER":u=fn(fn({},u),{},hn({},Gr,e.payload));break;case Sr:u=fn(fn({},u),{},hn({},zr,e.payload));break;case"UPDATE_NOTIFICATIONS":u=fn(fn({},u),{},hn({},rn,e.payload));break;case"UPDATE_FAVORITES":u=fn(fn({},u),{},hn({},nn,e.payload));break;case"UPDATE_WEBPAGE":u=fn(fn({},u),{},hn({},on,e.payload));break;case Pr:u=fn(fn({},u),{},hn({},an,e.payload));break;case"UPDATE_BASELINKTTL":u=fn(fn({},u),{},hn({},un,e.payload));break;default:return u}return u}];var dn=function(t){return{done:!0,value:t}},vn={};function yn(t){return K(t)?"channel":z(t)?String(t):Y(t)?t.name:String(t)}function mn(t,e,r){var n,o,i,a=e;function u(e,r){if(a===vn)return dn(e);if(r&&!o)throw a=vn,r;n&&n(e);var u=r?t[o](r):t[a]();return a=u.nextState,i=u.effect,n=u.stateUpdater,o=u.errorState,a===vn?dn(e):i}return ot(u,(function(t){return u(null,t)}),r)}function gn(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];var i,a={done:!1,value:Ct(t)},u=function(t){return i=t};return mn({q1:function(){return{nextState:"q2",effect:a,stateUpdater:u}},q2:function(){return{nextState:"q1",effect:(t=i,{done:!1,value:Ft.apply(void 0,[e].concat(n,[t]))})};var t}},"q1","takeEvery("+yn(t)+", "+e.name+")")}function bn(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];var i,a,u={done:!1,value:Ct(t)},c=function(t){return{done:!1,value:Ft.apply(void 0,[e].concat(n,[t]))}},s=function(t){return{done:!1,value:Mt(t)}},l=function(t){return i=t},f=function(t){return a=t};return mn({q1:function(){return{nextState:"q2",effect:u,stateUpdater:f}},q2:function(){return i?{nextState:"q3",effect:s(i)}:{nextState:"q1",effect:c(a),stateUpdater:l}},q3:function(){return{nextState:"q1",effect:c(a),stateUpdater:l}}},"q1","takeLatest("+yn(t)+", "+e.name+")")}function wn(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return Ft.apply(void 0,[gn,t,e].concat(n))}function xn(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return Ft.apply(void 0,[bn,t,e].concat(n))}var En=function(t){return t[Ir]},Sn=function(t){return t[Fr]},On=function(t){return t[qr]},Ln=function(t){return t[zr]},kn=function(t){return t[Jr]};function Tn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Tn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==Nn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function _n(t){return function(t){if(Array.isArray(t))return An(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return An(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return An(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pn(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function jn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Pn(i,n,o,a,u,"next",t)}function u(t){Pn(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Nn(t){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nn(t)}function Cn(t){if("object"!==Nn(t)||null===t)return!1;if("number"!=typeof t.retcode||200!==t.retcode)return!1;var e=t.data;return"object"===Nn(e)&&null!==e&&(!(!Array.isArray(e.mainbase)||e.mainbase.length<=2)&&!(!Array.isArray(e.tierbase)||e.tierbase.length<=2))}function Rn(t){return null!==t&&"object"===Nn(t)&&!Array.isArray(t)}function In(t,e){if(!Rn(t))return!1;if(!t.hasOwnProperty("settings"))return!1;if(!t.settings.hasOwnProperty(e))return!1;var r=t.settings[e];return!!(r&&qn(r)&&r>=1e4&&r<6e4)}function Un(t,e){switch(t){case"mainbase_api_timeout":case"mainbase_search_timeout":case"tierbase_search_timeout":case"mirror_timeout":return In(e,t)?e.settings[t]:3e4}}function Gn(){return Math.floor(Date.now()/1e3)}function Fn(t){return Dn.apply(this,arguments)}function Dn(){return(Dn=jn(Tn().mark((function t(e){var r,n,o,i;return Tn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(new TextEncoder).encode(e),t.next=3,crypto.subtle.digest("SHA-512",r);case 3:return n=t.sent,o=Array.from(new Uint8Array(n)),i=o.map((function(t){return t.toString(16).padStart(2,"0")})).join(""),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Mn(){return!1}function Yn(t){return Hn.apply(this,arguments)}function Hn(){return(Hn=jn(Tn().mark((function t(e){return Tn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){setTimeout(t,1e3*e)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function qn(t){return!isNaN(t)&&(0|(e=parseFloat(t)))===e;var e}function Bn(t){return t+"/ui"}function Vn(t,e){var r=e(t)||{};return JSON.parse(JSON.stringify(r))}const Wn={isValidServersJson:Cn,isValidObject:Rn,selectTimeoutByKey:Un,currentTime:Gn,isPremium:function(t){var e,r,n;return 0!==(null==t||null===(e=t.config)||void 0===e?void 0:e.user_premium)&&(null==t||null===(r=t.config)||void 0===r?void 0:r.user_premium)>(null==t||null===(n=t.config)||void 0===n?void 0:n.time)},sha512hash:Fn,isDev:Mn,projectRoot:function(){return"/ui/"},waitSeconds:Yn,escapeParamsOfUrl:function(t){var e=""+t;return e.indexOf("?")>-1&&(e=e.substr(0,e.indexOf("?"))),e},getDateMid:function(){return Math.floor((new Date).setUTCHours(0,0,0,0)/1e3)},isInt:qn,getDateNow:function(){return Math.floor(Date.now()/1e3)},hello:function(){},isObject:function(t){return"object"===Nn(t)&&null!==t},getBypassList:function(e){var r,n,o=[],i=On(e.getState()),a=Array.isArray(kn(e.getState()))?kn(e.getState()):[];if(Array.isArray(null==i||null===(r=i.data)||void 0===r?void 0:r.mainbase))for(var u=0;u<i.data.mainbase.length;u++){var c=i.data.mainbase[u];try{o.push(new URL(c).host)}catch(t){}}if(Array.isArray(null==i||null===(n=i.data)||void 0===n?void 0:n.tierbase))for(var s=0;s<i.data.tierbase.length;s++){var l=i.data.tierbase[s];try{o.push(new URL(l).host)}catch(t){}}if(Array.isArray(t))for(var f=0;f<t.length;f++){var h=t[f];try{o.push(new URL(h).host)}catch(t){}}var p=Sn(e.getState());try{o.push(new URL(p.link).host)}catch(t){}var d=[].concat(_n(a),o);return _n(new Set(d))},getUILink:Bn,getNoCacheUILink:function(t){return Bn(t)+"?d="+(new Date).getTime()},cloneState:Vn,getUserExpirationData:function(t){var e=new Date(t),r=e.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()];return e.getDate()+". "+n+" "+r},getTestRequest:function(t){if(null!=t&&t.tu)try{var e=new URL(t.tu);return{testUrl:t.tu,testDomain:e.hostname}}catch(t){}return{testUrl:"".concat(t.scheme,"://").concat(t.host,":").concat(t.port,"/index.php"),testDomain:t.host}}};var Kn="4.0.7",zn="chrome",Xn="sv";function Jn(t){return Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jn(t)}function Qn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Qn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==Jn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function $n(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Zn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){$n(i,n,o,a,u,"next",t)}function u(t){$n(i,n,o,a,u,"throw",t)}a(void 0)}))}}var to,eo,ro,no,oo={proxy:{settings:{get:(no=Zn(Qn().mark((function t(){return Qn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){chrome.proxy.settings.get({},(function(e){t(e)}))})));case 4:return t.next=6,oo.proxy.settings.get({});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)}))),function(){return no.apply(this,arguments)}),set:(ro=Zn(Qn().mark((function t(e){return Qn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){chrome.proxy.settings.set(e,(function(){t(!0)}))})));case 5:return t.abrupt("return",oo.proxy.settings.set(e));case 6:case"end":return t.stop()}}),t)}))),function(t){return ro.apply(this,arguments)}),clear:function(){return new Promise((function(t,e){chrome.proxy.settings.clear({},(function(){t(!0)}))}))}}},runtime:{getPlatformInfo:(eo=Zn(Qn().mark((function t(){var e;return Qn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,chrome.runtime.getPlatformInfo();case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,oo.runtime.getPlatformInfo();case 8:t.t0=t.sent;case 9:return e=t.t0,t.abrupt("return",e);case 11:case"end":return t.stop()}}),t)}))),function(){return eo.apply(this,arguments)})},permissions:{onAdded:function(t){chrome.permissions.onAdded.addListener(t)},onRemoved:function(t){chrome.permissions.onRemoved.addListener(t)}},management:{getAll:(to=Zn(Qn().mark((function t(){return Qn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",chrome.management.getAll());case 4:return t.abrupt("return",oo.management.getAll());case 5:case"end":return t.stop()}}),t)}))),function(){return to.apply(this,arguments)})}};const io=oo;function ao(t){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ao(t)}function uo(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */uo=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==ao(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function co(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function so(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){co(i,n,o,a,u,"next",t)}function u(t){co(i,n,o,a,u,"throw",t)}a(void 0)}))}}var lo="/api2/p";function fo(t){return Rn(t)&&200===t.retcode}function ho(t,e){return po.apply(this,arguments)}function po(){return po=so(uo().mark((function t(e,r){var n,o,i,a,u,c,s,l,f,h,p,d,v,y,m,g,b,w,x,E=arguments;return uo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=(n=E.length>2&&void 0!==E[2]?E[2]:{}).signal,i=n.baselink,a=n.requestUrl,u=n.timeout,c=n.defaults,s=i,l=a||s+e,f=go(),h=mo(f),p={method:"POST",headers:h},!c){t.next=12;break}t.t0=c,t.next=15;break;case 12:return t.next=14,vo();case 14:t.t0=t.sent;case 15:return d=t.t0,v=Object.assign({},r,d),"POST"===p.method&&r&&(p.body=bo(v,f)),y=new AbortController,p.signal=y.signal,m=function(){y.abort()},g=setTimeout(m,u),o instanceof AbortSignal&&o.addEventListener("abort",m),t.prev=24,t.next=27,fetch(l,p);case 27:b=t.sent,t.next=33;break;case 30:t.prev=30,t.t1=t.catch(24);case 33:return t.prev=33,clearTimeout(g),o instanceof AbortController&&o.removeEventListener("abort",m),t.finish(33);case 37:if(b){t.next=40;break}return t.abrupt("return",null);case 40:return w="",t.prev=41,t.t2=wo,t.next=45,b.text();case 45:t.t3=t.sent,t.t4=f,x=(0,t.t2)(t.t3,t.t4),w=JSON.parse(x),t.next=54;break;case 51:t.prev=51,t.t5=t.catch(41);case 54:return t.abrupt("return",w);case 56:case"end":return t.stop()}}),t,null,[[24,30,33,37],[41,51]])}))),po.apply(this,arguments)}function vo(){return yo.apply(this,arguments)}function yo(){return(yo=so(uo().mark((function t(){var e,r;return uo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,io.runtime.getPlatformInfo();case 2:return e=t.sent,r=e.os,t.abrupt("return",{os:r,cv:Kn,platform:zn,brand:Xn});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mo(t){return{"Content-Type":"text/plain",Authorization:"Basic "+btoa(t+":"+go(Math.round(3+5*Math.random())))}}function go(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.round(3+61*Math.random()),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="",n=0;n<t;n++)r+=e.charAt(Math.floor(Math.random()*e.length));return r}function bo(t,e){return btoa(xo(function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}(t),e))}function wo(t,e){return xo(decodeURIComponent(escape(atob(t))),e)}function xo(t,e){t=t.split(""),e=e.split("");for(var r=t.length,n=e.length,o=String.fromCharCode,i=0;i<r;i++)t[i]=o(t[i].charCodeAt(0)^e[i%n].charCodeAt(0));return t.join("")}function Eo(t){var e=t?a.IMAGES.ONICON:a.IMAGES.OFFICON;chrome.action.setIcon({path:{38:e}})}var So=Lo().mark(Ko),Oo=Lo().mark(zo);function Lo(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Lo=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==No(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function ko(t){return function(t){if(Array.isArray(t))return jo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Po(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function To(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function _o(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){To(i,n,o,a,u,"next",t)}function u(t){To(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Ao(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Po(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function Po(t,e){if(t){if("string"==typeof t)return jo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jo(t,e):void 0}}function jo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function No(t){return No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},No(t)}function Co(t){if(!Array.isArray(t)||0===t.length)return null;var e=t.filter((function(t){return t&&"object"===No(t)&&"string"==typeof t.baselink&&t.baselink}));if(0===e.length)return null;var r,n=0,o=Ao(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;("number"!=typeof i.weight||i.weight<=0)&&(i.weight=1),n+=i.weight}}catch(t){o.e(t)}finally{o.f()}var a,u=Math.random()*n,c=0,s=Ao(e);try{for(s.s();!(a=s.n()).done;){var l=a.value;if((c+=l.weight)>=u)return l.baselink}}catch(t){s.e(t)}finally{s.f()}return null}function Ro(t,e,r){return Io.apply(this,arguments)}function Io(){return Io=_o(Lo().mark((function t(e,r,n){var o,i,a,u,c,s,l,f;return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(Rn(e)&&e.hasOwnProperty("data")&&e.data.hasOwnProperty("mirrors")&&Array.isArray(e.data.mirrors))){t.next=36;break}o=e.data.mirrors,i=Do(o),a=Un("mirror_timeout",null==e?void 0:e.data),u=function(){var t=_o(Lo().mark((function t(e,r,n){var o,i,a,u,c;return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new AbortController,i=o.signal,a=function(){o.abort()},u=setTimeout((function(){var t=new Error("Request timed out");t.isTimeout=!0,o.abort(t)}),n),r instanceof AbortSignal&&r.addEventListener("abort",a),c=fetch(e,{signal:i}),t.abrupt("return",c.finally((function(){clearTimeout(u),r instanceof AbortSignal&&r.removeEventListener("abort",a)})).catch((function(t){throw"AbortError"===(null==t?void 0:t.name)&&null!=i&&i.aborted?null!=t&&t.isTimeout?new Error("TimeoutError"):new Error("Request was canceled"):t})));case 7:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),c=0;case 7:if(!(c<i.length)){t.next=36;break}return s=i[c],t.prev=9,t.next=12,u(s,r,a);case 12:return l=t.sent,t.next=15,l.json();case 15:if(!Cn(f=t.sent)){t.next=20;break}return t.abrupt("return",f);case 20:return t.abrupt("continue",33);case 21:t.next=33;break;case 23:if(t.prev=23,t.t0=t.catch(9),null==n||!n.clicked){t.next=29;break}return t.abrupt("break",36);case 29:if("AbortError"!==t.t0.name){t.next=32;break}return t.abrupt("break",36);case 32:return t.abrupt("continue",33);case 33:c++,t.next=7;break;case 36:case"end":return t.stop()}}),t,null,[[9,23]])}))),Io.apply(this,arguments)}function Uo(t){t instanceof AbortController&&t.abort()}function Go(t){return a.MAINUIS.map((function(e){return t.find((function(t){return t.baselink===e&&t.isWorking}))})).filter((function(t){return void 0!==t}))}function Fo(t,e){if(0===t.length)return ko(e);var r=Math.ceil(t.length/2),n=t.slice(0,r),o=t.slice(r);return[].concat(ko(n),ko(e),ko(o))}function Do(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),n=[t[r],t[e]];t[e]=n[0],t[r]=n[1]}return t}function Mo(t){try{return new URL(t),!0}catch(t){return!1}}function Yo(t,e,r){return Ho.apply(this,arguments)}function Ho(){return Ho=_o(Lo().mark((function t(e,r,n){var o,i,u,c,s,l,f,h,p,d,v,y,m;return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=Un("mainbase_search_timeout",null==e?void 0:e.data),i=Math.round(o/1e3),u=i>10&&i<100?i:32,c=r.mainbase,s=Array.isArray(e.data.mainbase)?e.data.mainbase:[],l=Fo(a.MAINUIS,s),f=Do(l),h=[],p=Lo().mark((function t(){var e,r;return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=f[d],r=c.signal,ho(lo,{},{baselink:e,signal:r,timeout:o}).then((function(t){fo(t)?h.push({baselink:e,isWorking:!0,weight:null==t?void 0:t.weight}):h.push({baselink:e,isWorking:!1,weight:1})})).catch((function(t){h.push({baselink:e,isWorking:!1,weight:1})}));case 4:case"end":return t.stop()}}),t)})),d=0;case 11:if(!(d<f.length)){t.next=16;break}return t.delegateYield(p(),"t0",13);case 13:d++,t.next=11;break;case 16:v=0,n.put(Math.round(v/u*100)),y=Lo().mark((function t(){var e,r,o,i,a,s,l;return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yn(1);case 2:if(e=Yt(Sn),r=e.last,o=e.lastTTL,i=h.filter((function(t){return t.isWorking&&!(t.baselink===r&&o>Gn())})),a=Go(i),!Mo(s=Co(a))){t.next=13;break}return Uo(c),t.abrupt("return",{v:{link:s,type:"mainbase",last:s,lastTTL:Gn()}});case 13:case 14:if(!(Mo(l=Co(i))&&v>4)){t.next=21;break}return Uo(c),t.abrupt("return",{v:{link:l,type:"mainbase",last:l,lastTTL:Gn()}});case 21:if(!(h.length===f.length&&v>4)){t.next=24;break}return Uo(c),t.abrupt("return","break");case 24:v++,n.put(Math.round(v/u*100));case 26:case"end":return t.stop()}}),t)}));case 19:if(!(v<u)){t.next=28;break}return t.delegateYield(y(),"t1",21);case 21:if("break"!==(m=t.t1)){t.next=24;break}return t.abrupt("break",28);case 24:if("object"!==No(m)){t.next=26;break}return t.abrupt("return",m.v);case 26:t.next=19;break;case 28:return t.abrupt("return",null);case 29:case"end":return t.stop()}}),t)}))),Ho.apply(this,arguments)}function qo(t,e,r,n){return Bo.apply(this,arguments)}function Bo(){return Bo=_o(Lo().mark((function t(e,r,n,o){var i,a,u,c,s,l,f,h,p;return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=Un("tierbase_search_timeout",null==e?void 0:e.data),a=Array.isArray(e.data.tierbase)?e.data.tierbase:[],u=Do(a),c=u.length,s=0;case 5:if(!(s<u.length)){t.next=29;break}return t.next=8,Yn(1);case 8:if(!o.clicked){t.next=10;break}return t.abrupt("break",29);case 10:return l=Math.round((s+1)/c*100),n.put(l),f=u[s],h=r.tierbase,p=h.signal,t.prev=15,t.next=18,ho(lo,{},{baselink:f,signal:p,timeout:i});case 18:if(!fo(t.sent)){t.next=21;break}return t.abrupt("return",{link:f,type:"tierbase",last:f,lastTTL:Gn()});case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(15);case 26:s++,t.next=5;break;case 29:return t.abrupt("return",null);case 30:case"end":return t.stop()}}),t,null,[[15,23]])}))),Bo.apply(this,arguments)}function Vo(t,e,r,n){return Wo.apply(this,arguments)}function Wo(){return(Wo=_o(Lo().mark((function t(e,r,n,o){var i,a,u,c,s,l,f,h,p;return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=Vn(e,On)){t.next=3;break}return t.abrupt("return",null);case 3:return t.next=5,Yo(c,r,n);case 5:if(!(s=t.sent)){t.next=8;break}return t.abrupt("return",s);case 8:if(!o.clicked){t.next=11;break}return t.abrupt("return",null);case 11:return l=r.fetchMirror,f=l.signal,t.next=15,Ro(c,f,o);case 15:if(h=t.sent,!((null===(i=c)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.t)<(null==h||null===(u=h.data)||void 0===u?void 0:u.t))){t.next=25;break}try{v=void 0,y=void 0,m=void 0,g=void 0,200===(null==(d=h)?void 0:d.retcode)&&Array.isArray(null==d||null===(v=d.data)||void 0===v?void 0:v.mainbase)&&(null==d||null===(y=d.data)||void 0===y||null===(m=y.mainbase)||void 0===m?void 0:m.length)>2&&Array.isArray(null==d||null===(g=d.data)||void 0===g?void 0:g.tierbase)&&Pi.dispatch({type:kr,payload:h})}catch(t){}return c=h,t.next=21,Yo(c,r,n);case 21:if(!(s=t.sent)){t.next=25;break}return t.abrupt("return",s);case 25:return t.next=27,qo(c,r,n,o);case 27:if(!(p=t.sent)){t.next=30;break}return t.abrupt("return",p);case 30:return t.abrupt("return",null);case 31:case"end":return t.stop()}var d,v,y,m,g}),t)})))).apply(this,arguments)}function Ko(){var t,e,r,n,o,i;return Lo().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Yt();case 2:return t=a.sent,e=ae(),a.next=6,Ft(Lo().mark((function t(){var r;return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Ct(e);case 3:return r=t.sent,t.next=7,Rt({type:ar,payload:{progress:r}});case 7:t.next=0;break;case 9:case"end":return t.stop()}}),t)})));case 6:return r=a.sent,n={mainbase:new AbortController,tierbase:new AbortController,fetchMirror:new AbortController},o={clicked:!1},a.prev=9,a.next=12,Rt({type:ar,payload:{running:!0,progress:0,error:null}});case 12:return a.next=14,Gt(Vo,t,n,e,o);case 14:if(!(i=a.sent)){a.next=24;break}return a.next=18,Rt({type:sr,baselink:i});case 18:return a.next=20,Yt(Ln);case 20:!1===a.sent&&(u=Wn.getNoCacheUILink(i.link),chrome.tabs.create({url:u})),a.next=26;break;case 24:return a.next=26,Rt({type:ur});case 26:a.next=31;break;case 28:a.prev=28,a.t0=a.catch(9);case 31:return a.prev=31,a.next=34,Mt(r);case 34:return e.close(),a.next=37,jt(Tt,{});case 37:if(!a.sent){a.next=44;break}return o.clicked=!0,Object.keys(n).forEach((function(t){n[t].abort()})),a.next=42,Rt({type:ar,payload:{error:"SEARCH_CANCELLED"}});case 42:a.next=46;break;case 44:return a.next=46,Rt({type:ar,payload:{running:!1,error:"SEARCH_FAILED"}});case 46:return a.finish(31);case 47:case"end":return a.stop()}var u}),So,null,[[9,28,31,47]])}function zo(){var t,e,r,n;return Lo().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=4,Ct([ir,ur,cr]);case 4:if((t=o.sent).type!==ur){o.next=9;break}return o.next=9,Rt({type:ar,payload:{running:!1,error:"SEARCH_CANCELLED"}});case 9:return o.next=11,Yt(Sn);case 11:if(e=o.sent,r=(null==e?void 0:e.lastTTL)+6e4<Gn(),!(t.type===ir&&r||t.type===cr)){o.next=25;break}return o.next=16,Dt(Ko);case 16:return n=o.sent,o.next=19,Ct([ur,sr]);case 19:if(o.sent.type!==ur){o.next=25;break}return o.next=23,Mt(n);case 23:return o.next=25,Rt({type:ar,payload:{running:!1,error:"SEARCH_CANCELLED"}});case 25:o.next=0;break;case 28:case"end":return o.stop()}}),Oo)}const Xo=zo;function Jo(t){return Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jo(t)}function Qo(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Qo=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==Jo(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var $o=Qo().mark(ni),Zo=Qo().mark(oi),ti=Qo().mark(ii),ei=Qo().mark(ai),ri=Qo().mark(ui);function ni(t){var e,r,n,o;return Qo().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=t.payload,r=e.permissions,n=e.event,o=r.origins,"onAdded"!==n||!o.includes("<all_urls>")){i.next=6;break}return i.next=6,Rt({type:dr,payload:{permission:!0}});case 6:if("onRemoved"!==n||!o.includes("<all_urls>")){i.next=9;break}return i.next=9,Rt({type:dr,payload:{permission:!1}});case 9:case"end":return i.stop()}}),$o)}function oi(t){return Qo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Rt({type:Er,payload:{externalHost:t.payload.externalHost}});case 3:case"end":return e.stop()}}),Zo)}function ii(){return Qo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wn(pr,ni);case 2:case"end":return t.stop()}}),ti)}function ai(){return Qo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wn(xr,oi);case 2:case"end":return t.stop()}}),ei)}function ui(){return Qo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,It([Ft(ii),Ft(ai)]);case 2:case"end":return t.stop()}}),ri)}function ci(t){return ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ci(t)}function si(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */si=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==ci(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var li=si().mark(hi),fi=si().mark(pi);function hi(){var t,e,r,n,o,i,a,u,c;return si().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,Yt();case 3:return t=s.sent,e=t[Kr],r=t[Vr],n=t[Wr],s.next=9,Rt({type:wr,payload:chrome.runtime.getManifest().version});case 9:if(null!==n){s.next=13;break}return s.next=13,Rt({type:mr,payload:{id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})),t:(new Date).getTime()}});case 13:if(null!==r.os){s.next=22;break}return s.next=18,Gt(chrome.runtime.getPlatformInfo);case 18:return o=s.sent,i=o.os,s.next=22,Rt({type:gr,payload:{os:i}});case 22:if(null!==e){s.next=26;break}return s.next=26,Rt({type:br,payload:chrome.runtime.id});case 26:return s.next=28,Yt();case 28:if(a=s.sent,u=a[Fr],c=a[Dr],null!==u.link||c.running){s.next=34;break}return s.next=34,Rt({type:ir});case 34:case"end":return s.stop()}}),li)}function pi(){return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xn(or,hi);case 2:case"end":return t.stop()}}),fi)}const di=pi;function vi(t){return vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vi(t)}function yi(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */yi=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==vi(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var mi=yi().mark(gi);function gi(){return yi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,It([Ft(Xo),Ft(ui),Ft(di)]);case 2:case"end":return t.stop()}}),mi)}function bi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(t,e)||wi(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wi(t,e){if(t){if("string"==typeof t)return xi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xi(t,e):void 0}}function xi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ei=je(),Si="ext_",Oi={serialize:function(t){return t},deserialize:function(t){return t}},Li={key:"root",storage:{getItem:function(t){var e=Object.keys(cn).map((function(t){return"".concat(Si).concat(t)}));return e.push("".concat(Si,"_persist")),new Promise((function(t,r){chrome.storage.local.get(e,(function(e){if(null==chrome.runtime.lastError){var n={};Object.entries(e).forEach((function(t){var e=bi(t,2),r=e[0],o=e[1];n[r.replace(Si,"")]=o})),t(n)}else r()}))}))},setItem:function(t,e){return new Promise((function(t,r){var n={};Object.entries(e).forEach((function(t){var e=bi(t,2),r=e[0],o=e[1];n["".concat(Si).concat(r)]=o})),chrome.storage.local.set(n,(function(){null==chrome.runtime.lastError?t():r()}))}))},removeItem:function(t){var e="".concat(Si).concat(t);return new Promise((function(t,r){chrome.storage.local.remove(e,(function(){null==chrome.runtime.lastError?t():r()}))}))}},serialize:Oi.serialize,deserialize:Oi.deserialize,whitelist:Object.keys(cn)};cn.isextstore=!0;var ki,Ti=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n="function"!=typeof e[0]&&e.shift(),o=e;if(void 0===n)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(t,e){for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var u=void 0===t,c=void 0===e;return u&&c&&n?n:o.reduce((function(t,r,n){if(void 0===r)throw new TypeError("An undefined reducer was passed in at index "+n);return r.apply(void 0,[t,e].concat(i))}),u&&!c&&n?n:t)}}.apply(void 0,[cn].concat(function(t){if(Array.isArray(t))return xi(t)}(ki=pn)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(ki)||wi(ki)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),_i=function(t,e){var r=void 0!==t.version?t.version:-1,n=(t.debug,void 0===t.stateReconciler?He:t.stateReconciler),o=t.getStoredState||Ve,i=void 0!==t.timeout?t.timeout:5e3,a=null,u=!1,c=!0,s=function(t){return t._persist.rehydrated&&a&&!c&&a.update(t),t};return function(l,f){var h=l||{},p=h._persist,d=Qe(h,["_persist"]);if(f.type===Ue){var v=!1,y=function(e,r){v||(f.rehydrate(t.key,e,r),v=!0)};if(i&&setTimeout((function(){!v&&y(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(t.key,'"')))}),i),c=!1,a||(a=qe(t)),p)return Xe({},e(d,f),{_persist:p});if("function"!=typeof f.rehydrate||"function"!=typeof f.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return f.register(t.key),o(t).then((function(e){(t.migrate||function(t,e){return Promise.resolve(t)})(e,r).then((function(t){y(t)}),(function(t){y(void 0,t)}))}),(function(t){y(void 0,t)})),Xe({},e(d,f),{_persist:{version:r,rehydrated:!1}})}if(f.type===Ge)return u=!0,f.result(function(t){var e=t.storage,r="".concat(void 0!==t.keyPrefix?t.keyPrefix:Ne).concat(t.key);return e.removeItem(r,Ke)}(t)),Xe({},e(d,f),{_persist:p});if(f.type===Ce)return f.result(a&&a.flush()),Xe({},e(d,f),{_persist:p});if(f.type===Ie)c=!0;else if(f.type===Re){if(u)return Xe({},d,{_persist:Xe({},p,{rehydrated:!0})});if(f.key===t.key){var m=e(d,f),g=f.payload,b=Xe({},!1!==n&&void 0!==g?n(g,l,m,t):m,{_persist:Xe({},p,{rehydrated:!0})});return s(b)}}if(!p)return e(l,f);var w=e(d,f);return w===d?l:s(Xe({},w,{_persist:p}))}}(Li,Ti),Ai=O(_i,function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return function(){var r=t.apply(void 0,arguments),n=function(){throw new Error(b(15))},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=e.map((function(t){return t(o)}));return n=L.apply(void 0,i)(r.dispatch),g(g({},r),{},{dispatch:n})}}}(Ei));Ai.isHydrated=!1,Ai.onChange={addListener:function(t){var e=Ai.getState();return Ai.subscribe((function(){var r=Ai.getState(),n={};Object.keys(r).forEach((function(t){e[t]!==r[t]&&(n[t]={newValue:r[t],oldValue:e[t]})})),Object.keys(n).length>0&&Ai.isHydrated&&t(n),e=r}))}},Ei.run(gi),function(t,e,r){var n=r||!1,o=O(nr,rr,e&&e.enhancer?e.enhancer:void 0),i=function(t){o.dispatch({type:Fe,key:t})},a=function(e,r,i){var a={type:Re,payload:r,err:i,key:e};t.dispatch(a),o.dispatch(a),n&&u.getState().bootstrapped&&(n(),n=!1)},u=tr({},o,{purge:function(){var e=[];return t.dispatch({type:Ge,result:function(t){e.push(t)}}),Promise.all(e)},flush:function(){var e=[];return t.dispatch({type:Ce,result:function(t){e.push(t)}}),Promise.all(e)},pause:function(){t.dispatch({type:Ie})},persist:function(){t.dispatch({type:Ue,register:i,rehydrate:a})}});e&&e.manualPersist||u.persist()}(Ai,null,(function(){Ai.isHydrated=!0,Ai.dispatch({type:or})}));const Pi=Ai;var ji=r(622),Ni={chrome:"oofgbpoabipfcfjapgnbbjjaenockbdp",edge:"okhjkpgblgdjappgfgakbcecdblgffcl"};const Ci={extensionId:Ni.chrome,portName:"com.setupvpn.extension.main",mainIds:Ni};function Ri(t){return Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(t)}function Ii(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ii=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==Ri(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ui(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Gi(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ui(i,n,o,a,u,"next",t)}function u(t){Ui(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Fi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Ri(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Ri(i)?i:String(i)),n)}var o,i}const Di=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.alarmName=n,this.func=e,this.intervalMinutes=r,this.registerAlarmListener()}var e,r,n,o,i,a,u,c;return e=t,r=[{key:"registerAlarmListener",value:function(){var t=this;chrome.alarms.onAlarm.addListener((function(e){e.name===t.alarmName&&t.func()}))}},{key:"start",value:(c=Gi(Ii().mark((function t(){return Ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.isRunning();case 3:if(t.sent){t.next=6;break}return t.next=6,chrome.alarms.create(this.alarmName,{periodInMinutes:this.intervalMinutes});case 6:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"stop",value:(u=Gi(Ii().mark((function t(){return Ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,chrome.alarms.clear(this.alarmName);case 3:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"isRunning",value:(a=Gi(Ii().mark((function t(){var e,r=this;return Ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.alarms.getAll();case 2:return e=t.sent,t.abrupt("return",e.some((function(t){return t.name===r.alarmName&&t.periodInMinutes===r.intervalMinutes})));case 4:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"update",value:(i=Gi(Ii().mark((function t(e){return Ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.intervalMinutes=e,t.next=4,this.isRunning();case 4:if(!t.sent){t.next=9;break}return t.next=7,this.stop();case 7:return t.next=9,this.start();case 9:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"checkAlarmState",value:(o=Gi(Ii().mark((function t(){var e=this;return Ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.alarms.getAll();case 2:if(t.sent.some((function(t){return t.name===e.alarmName}))){t.next=7;break}return t.next=7,this.start();case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r&&Fi(e.prototype,r),n&&Fi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Mi(t){return Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mi(t)}function Yi(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Yi=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==Mi(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Hi(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function qi(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Hi(i,n,o,a,u,"next",t)}function u(t){Hi(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Bi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Mi(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Mi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Mi(i)?i:String(i)),n)}var o,i}var Vi=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this;this.errorCodes=["net::ERR_PROXY_CONNECTION_FAILED","NS_ERROR_PROXY_CONNECTION_REFUSED"],this.onRequestError=this.onRequestError.bind(this),this.onProxySettingChanged=this.onProxySettingChanged.bind(this),Pi.onChange.addListener(e.onStoreChange.bind(e)),chrome.webRequest.onErrorOccurred.addListener(e.onRequestError,{urls:["<all_urls>"]}),chrome.proxy.settings.onChange.addListener(e.onProxySettingChanged),this.timeLeft=0,this.LASTTIME=60,this.lastTimeLeft=60,this.isLastStop=!1,this.opening=!1,this.updateIntervalTime=1,this.updateInterval=!1,this.updateInterval=new Di(this.countDown.bind(this),this.updateIntervalTime,"int4"),this.checkProxyStatus()}var e,r,n,o,i,u,c,s,l,f;return e=t,r=[{key:"checkProxyStatus",value:(f=qi(Yi().mark((function t(){var e,r;return Yi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,io.proxy.settings.get({});case 2:"controlled_by_this_extension"===(null==(e=t.sent)?void 0:e.levelOfControl)&&(Eo(!0),(r=Pi.getState()[Ir])&&r.config&&this.getLeftTime(r.config)>0&&this.countDown());case 4:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"setTimeleft",value:function(t){Yn(1),Pi.dispatch({type:Or,payload:t})}},{key:"showConnectionNotification",value:function(t,e,r){var n={type:"basic",title:t,message:e,iconUrl:r?a.IMAGES.ONICON:a.IMAGES.OFFICON};chrome.notifications.create(n)}},{key:"onStoreChange",value:(l=qi(Yi().mark((function t(e){var r,n,o,i,a,u;return Yi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this,!Wn.isObject(e)||1!==Object.keys(e).length||!Object.keys(e).includes(Yr)){t.next=16;break}if(n=e[Yr],o="fixed_servers"===n.newValue.mode,i="fixed_servers"===n.oldValue.mode&&"fixed_servers"!==n.newValue.mode,!o){t.next=15;break}return a=Pi.getState()[Ir],u=r.getLeftTime(a.config),this.isLastStop=!1,u>0&&(this.setTimeleft({deadline:Gn()+60*u,interval:u,locked:!1}),this.setBadge(u+"m","#D2FF52"),u<2?this.lastMinuteCountDown():this.updateInterval.start()),this.showConnectionNotification("Connection Established","",!0),t.abrupt("return");case 15:i&&(this.updateInterval.stop(),this.isLastStop=!0,this.setBadge(""),this.setTimeleft({deadline:0,interval:0,locked:!1}),this.showConnectionNotification("Disconnected","",!1));case 16:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"getLeftTime",value:function(t){if(!(t&&Wn.isObject(t)&&t.hasOwnProperty("tinterval")&&t.tinterval.hasOwnProperty("every"))||Wn.isPremium(t))return 0;try{var e=parseInt(t.tinterval.every);return Number.isInteger(e)&&e>0?e:0}catch(t){return 0}}},{key:"lastMinuteCountDown",value:(s=qi(Yi().mark((function t(){var e;return Yi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.lastTimeLeft===this.LASTTIME){t.next=3;break}return t.abrupt("return");case 3:if(!(this.lastTimeLeft>0)){t.next=24;break}if(!this.isLastStop){t.next=9;break}return this.isLastStop=!1,this.lastTimeLeft=this.LASTTIME,t.abrupt("break",24);case 9:if(this.lastTimeLeft=this.lastTimeLeft-1,0!==this.lastTimeLeft){t.next=19;break}return this.isLastStop=!1,this.lastTimeLeft=this.LASTTIME,this.setTimeleft({deadline:0,interval:0,locked:!0}),this.setBadge(" X ","#D2FF52"),e={value:{mode:"fixed_servers",rules:{singleProxy:{scheme:a.TIMEOUT.PROXYSETTING.SCHEME,host:a.TIMEOUT.PROXYSETTING.HOST,port:a.TIMEOUT.PROXYSETTING.PORT},bypassList:Wn.getBypassList(Pi)}},scope:"regular"},t.next=18,io.proxy.settings.set(e);case 18:return t.abrupt("return");case 19:return this.lastTimeLeft%2==1?this.setBadge(this.lastTimeLeft+"","#D2FF52"):this.setBadge("","#D2FF52"),t.next=22,Yn(1);case 22:t.next=3;break;case 24:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"getMinutesBetweenTimestamps",value:function(t,e){var r=Math.abs(e-t);return Math.floor(r/60)}},{key:"countDown",value:(c=qi(Yi().mark((function t(){var e,r;return Yi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Pi.getState()[Xr].deadline,r=this.getMinutesBetweenTimestamps(e,Gn()),this.setTimeleft({interval:r}),!(r<2)){t.next=10;break}return this.updateInterval.stop(),this.lastTimeLeft=this.LASTTIME,this.lastMinuteCountDown(),t.abrupt("return");case 10:this.setBadge(r+"m","#D2FF52");case 11:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"setBadgeColor",value:function(t){return new Promise((function(e,r){chrome.action.setBadgeBackgroundColor({color:t},e)}))}},{key:"setBadge",value:(u=qi(Yi().mark((function t(e,r){return Yi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=4;break}return t.next=4,this.setBadgeColor(r);case 4:chrome.action.setBadgeText({text:e+""});case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return u.apply(this,arguments)})},{key:"onRequestError",value:(i=qi(Yi().mark((function t(e){var r,n,o,i,a,u,c,s,l,f;return Yi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=this).opening){t.next=3;break}return t.abrupt("return");case 3:o.opening=!0,setTimeout((function(){o.opening=!1}),1500),i=Pi.getState()[Yr],a=Pi.getState()[Xr],u="fixed_servers"===i.mode,c=!0===a.locked,s=null===(r=Pi.getState()[Ir])||void 0===r?void 0:r.config,l=null===(n=Pi.getState()[Fr])||void 0===n?void 0:n.link,!0===u&&!0===c&&Wn.isObject(s)&&s.hasOwnProperty("tinterval")&&!Wn.isPremium(s)&&e&&e.error&&o.errorCodes.includes(e.error)&&"main_frame"===e.type&&(f=Bn(l),chrome.tabs.query({url:f},(function(t){t.length>0?chrome.tabs.update(t[0].id,{active:!0}):chrome.tabs.create({url:Wn.getNoCacheUILink(l)})})));case 12:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"onProxySettingChanged",value:(o=qi(Yi().mark((function t(e){return Yi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.levelOfControl;case 1:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})}],r&&Bi(e.prototype,r),n&&Bi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();new Vi;var Wi=r(539);r(29);const Ki=(0,Wi.A)(fetch("/main.wasm").then((t=>t.arrayBuffer())));r(29);const zi=(0,Wi.A)(fetch("/main.wasm").then((t=>t.arrayBuffer())));function Xi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ji(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xi(Object(r),!0).forEach((function(e){Qi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Qi(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==ea(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ea(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ea(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */$i=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==ea(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Zi(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function ta(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Zi(i,n,o,a,u,"next",t)}function u(t){Zi(i,n,o,a,u,"throw",t)}a(void 0)}))}}function ea(t){return ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ea(t)}function ra(t){return t&&"object"===ea(t)&&null!==t&&t.hasOwnProperty("retcode")}var na={SUCCESS:function(t){return ra(t)&&200===t.retcode},CAPTCHA_REQUIRED:function(t){return ra(t)&&-30===t.retcode},CAPTCHA_WRONG:function(t){return ra(t)&&-11===t.retcode},AUTH_ERROR:function(t){return ra(t)&&-4===t.retcode},MINUS_ONE:function(t){return ra(t)&&-1===t.retcode},MINUS_TWENTY:function(t){return ra(t)&&-20===t.retcode},MINUS_FIVE:function(t){return ra(t)&&-5===t.retcode}},oa={CAPS:{endpoint:"/api3/caps",response:{SUCCESS:na.SUCCESS}},GUEST:{endpoint:"/api3/r/guest",response:{SUCCESS:na.SUCCESS,CAPTCHA_REQUIRED:na.CAPTCHA_REQUIRED}},REGISTER:{endpoint:"/api3/r/email",response:{SUCCESS:na.SUCCESS,MINUS_TWENTY:na.MINUS_TWENTY}},CAPTCHA:{endpoint:"/api3/captcha/solve",response:{SUCCESS:na.SUCCESS,CAPTCHA_REQUIRED:na.CAPTCHA_REQUIRED,CAPTCHA_WRONG:na.CAPTCHA_WRONG}},CONFIG:{endpoint:"/api3/c/4",response:{SUCCESS:na.SUCCESS,AUTH_ERROR:na.AUTH_ERROR,MINUS_TWENTY:na.MINUS_TWENTY,MINUS_ONE:na.MINUS_ONE}},LOGIN:{endpoint:"/api3/u/login",response:{SUCCESS:na.SUCCESS,AUTH_ERROR:na.AUTH_ERROR,MINUS_TWENTY:na.MINUS_TWENTY}},SESSION:{endpoint:function(t,e,r){return"/api3/c/4/".concat(t,"/").concat(e,"/").concat(r)},response:{SUCCESS:na.SUCCESS}},CLOSE:{endpoint:"/api3/u/ca",response:{SUCCESS:na.SUCCESS,AUTH_ERROR:na.AUTH_ERROR,MINUS_TWENTY:na.MINUS_TWENTY}},PRODUCTS:{endpoint:"/api2/i/p",response:{SUCCESS:na.SUCCESS}},PAYMENT_LINK:{endpoint:"/api2",response:{SUCCESS:na.SUCCESS,MINUS_TWENTY:na.MINUS_TWENTY}},CONTACT_SUPPORT:{endpoint:"/api2/support/ticket/new",response:{SUCCESS:na.SUCCESS,MINUS_TWENTY:na.MINUS_TWENTY}},TIER:{endpoint:"/api2/t/u",response:{SUCCESS:na.SUCCESS}},VERSIONSTATUS:{endpoint:"/api2/cu",response:{SUCCESS:na.SUCCESS}},FORGOTPASSWORD:{endpoint:"/api2/user/forgotpassword",response:{SUCCESS:na.SUCCESS,MINUS_TWENTY:na.MINUS_TWENTY}},REFRESHTOKEN:{endpoint:function(t){return"/api3/c/4/refresh/".concat(t)},response:{SUCCESS:na.SUCCESS,MINUS_TWENTY:na.MINUS_TWENTY,MINUS_ONE:na.MINUS_ONE}},APPS:{endpoint:"/api3/apps",response:{SUCCESS:na.SUCCESS,AUTH_ERROR:na.AUTH_ERROR,MINUS_TWENTY:na.MINUS_TWENTY}},REGISTEREMAIL:{endpoint:"/api3/r/email2",response:{SUCCESS:na.SUCCESS,MINUS_TWENTY:na.MINUS_TWENTY,MINUS_ONE:na.MINUS_ONE}},REGISTEREMAILTOKEN:{endpoint:function(t){return"/api3/r/email2/".concat(t)},response:{SUCCESS:na.SUCCESS,AUTH_ERROR:na.AUTH_ERROR,MINUS_TWENTY:na.MINUS_TWENTY,MINUS_ONE:na.MINUS_ONE,MINUS_FIVE:na.MINUS_FIVE}},CHANGEPASSWORD:{endpoint:"/api3/u/cp",response:{SUCCESS:na.SUCCESS,AUTH_ERROR:na.AUTH_ERROR,MINUS_TWENTY:na.MINUS_TWENTY}}},ia=function(){var t=ta($i().mark((function t(e,r,n,o,i){var a,u,c,s;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.isextstore,u=r.toLowerCase(),c={endpoint:a?oa.CONFIG.endpoint:oa.LOGIN.endpoint,params:{login:u,hpassword:n},state:e},s=!1,t.prev=6,t.next=9,zi.doRequest(c,i);case 9:s=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6);case 15:return t.abrupt("return",s);case 16:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e,r,n,o,i){return t.apply(this,arguments)}}(),aa=function(){var t=ta($i().mark((function t(e,r){var n,o,i,a,u,c;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.user){t.next=4;break}return t.abrupt("return",!1);case 4:return o=n.email,i=n.hpassword,n.isGuest,a=o.toLowerCase(),u={endpoint:oa.CONFIG.endpoint,params:{login:a,hpassword:i},state:e},c=!1,t.prev=8,t.next=11,zi.doRequest(u,r);case 11:c=t.sent,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8);case 17:return t.abrupt("return",c);case 18:case"end":return t.stop()}}),t,null,[[8,14]])})));return function(e,r){return t.apply(this,arguments)}}(),ua=function(){var t=ta($i().mark((function t(e,r,n,o,i){var a,u,c,s,l,f;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.user){t.next=4;break}return t.abrupt("return",!1);case 4:return u=a.email,c=a.hpassword,s=u.toLowerCase(),l={endpoint:oa.SESSION.endpoint(r,n,o),params:{login:s,hpassword:c},state:e},f=!1,t.prev=8,t.next=11,zi.doRequest(l,i);case 11:f=t.sent,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8);case 17:return t.abrupt("return",f);case 18:case"end":return t.stop()}}),t,null,[[8,14]])})));return function(e,r,n,o,i){return t.apply(this,arguments)}}(),ca=function(){var t=ta($i().mark((function t(e,r,n,o){var i,a;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={endpoint:oa.CLOSE.endpoint,params:{login:r.toLowerCase(),hpassword:n},state:e},a=!1,t.prev=3,t.next=6,zi.doRequest(i,o);case 6:a=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3);case 12:return t.abrupt("return",a);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r,n,o){return t.apply(this,arguments)}}(),sa=function(){var t=ta($i().mark((function t(e,r){var n,o;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={endpoint:oa.CAPS.endpoint,params:{},state:e},o=!1,t.prev=3,t.next=6,zi.doRequest(n,r);case 6:o=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3);case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r){return t.apply(this,arguments)}}(),la=function(){var t=ta($i().mark((function t(e,r){var n,o;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={endpoint:oa.GUEST.endpoint,params:{},state:e},o=!1,t.prev=3,t.next=6,zi.doRequest(n,r);case 6:o=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3);case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r){return t.apply(this,arguments)}}(),fa=function(){var t=ta($i().mark((function t(e,r,n,o){var i,a;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=oa.REGISTER.endpoint,t.t1=r.toLowerCase(),t.next=5,Fn(n);case 5:return t.t2=t.sent,t.t3={email:t.t1,hpassword:t.t2},t.t4=e,i={endpoint:t.t0,params:t.t3,state:t.t4},a=!1,t.prev=10,t.next=13,zi.doRequest(i,o);case 13:a=t.sent,t.next=19;break;case 16:t.prev=16,t.t5=t.catch(10);case 19:return t.abrupt("return",a);case 20:case"end":return t.stop()}}),t,null,[[10,16]])})));return function(e,r,n,o){return t.apply(this,arguments)}}(),ha=function(){var t=ta($i().mark((function t(e,r,n){var o,i;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={endpoint:oa.CAPTCHA.endpoint,params:e,state:r},i=!1,t.prev=3,t.next=6,zi.doRequest(o,n);case 6:i=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3);case 12:return t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r,n){return t.apply(this,arguments)}}(),pa=function(){var t=ta($i().mark((function t(e,r,n){var o,i;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={endpoint:oa.REGISTEREMAIL.endpoint,params:{email:r.toLowerCase()},state:e},i=!1,t.prev=3,t.next=6,zi.doRequest(o,n);case 6:i=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3);case 12:return t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r,n){return t.apply(this,arguments)}}(),da=function(){var t=ta($i().mark((function t(e,r,n,o){var i,a;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={endpoint:oa.REGISTEREMAILTOKEN.endpoint(r),params:{code:n},state:e},a=!1,t.prev=3,t.next=6,zi.doRequest(i,o);case 6:a=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3);case 12:return t.abrupt("return",a);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r,n,o){return t.apply(this,arguments)}}(),va=function(){var t=ta($i().mark((function t(e,r,n,o,i){var a,u;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=oa.CHANGEPASSWORD.endpoint,t.t1=r.toLowerCase(),t.t2=n,t.next=6,Fn(o);case 6:return t.t3=t.sent,t.t4={login:t.t1,hpassword:t.t2,newhpassword:t.t3},t.t5=e,a={endpoint:t.t0,params:t.t4,state:t.t5},u=!1,t.prev=11,t.next=14,zi.doRequest(a,i);case 14:u=t.sent,t.next=20;break;case 17:t.prev=17,t.t6=t.catch(11);case 20:return t.abrupt("return",u);case 21:case"end":return t.stop()}}),t,null,[[11,17]])})));return function(e,r,n,o,i){return t.apply(this,arguments)}}(),ya=function(){var t=ta($i().mark((function t(e,r){var n,o,i,a,u,c;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.user){t.next=4;break}return t.abrupt("return",!1);case 4:return o=n.email,i=n.hpassword,a=o.toLowerCase(),u={endpoint:oa.PRODUCTS.endpoint,params:{login:a,hpassword:i},state:e},c=!1,t.prev=8,t.next=11,zi.doRequest(u,r);case 11:c=t.sent,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8);case 17:return t.abrupt("return",c);case 18:case"end":return t.stop()}}),t,null,[[8,14]])})));return function(e,r){return t.apply(this,arguments)}}(),ma=function(){var t=ta($i().mark((function t(e,r,n,o){var i,a,u,c,s,l;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.user){t.next=4;break}return t.abrupt("return",!1);case 4:return a=i.email,u=i.hpassword,c=a.toLowerCase(),s={endpoint:oa.PAYMENT_LINK.endpoint+e,params:{login:c,hpassword:u,productid:r},state:n},l=!1,t.prev=8,t.next=11,zi.doRequest(s,o);case 11:l=t.sent,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8);case 17:return t.abrupt("return",l);case 18:case"end":return t.stop()}}),t,null,[[8,14]])})));return function(e,r,n,o){return t.apply(this,arguments)}}(),ga=function(){var t=ta($i().mark((function t(e,r){var n,o;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={endpoint:"/api2/m/debug",params:Ji({},e),state:r},o=!1,t.prev=3,t.next=6,zi.doRequest(n,(new AbortController).signal);case 6:o=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3);case 12:return t.abrupt("return",o);case 14:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r){return t.apply(this,arguments)}}(),ba=function(){var t=ta($i().mark((function t(e,r,n){var o,i,a,u,c;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(null==r||null===(o=r.configdata)||void 0===o||null===(i=o.config)||void 0===i?void 0:i.uid)||!1,u={endpoint:oa.CONTACT_SUPPORT.endpoint,params:e,state:r},a&&(u.params.uid=a),c=!1,t.prev=6,t.next=9,zi.doRequest(u,n);case 9:c=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6);case 15:return t.abrupt("return",c);case 16:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e,r,n){return t.apply(this,arguments)}}(),wa=function(){var t=ta($i().mark((function t(e,r){var n,o;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={endpoint:oa.TIER.endpoint,params:{},state:e},o=!1,t.prev=3,t.next=6,zi.doRequest(n,r);case 6:o=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3);case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r){return t.apply(this,arguments)}}(),xa=function(){var t=ta($i().mark((function t(e,r){var n,o;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={endpoint:oa.VERSIONSTATUS.endpoint,params:{},state:e},o=!1,t.prev=3,t.next=6,zi.doRequest(n,r);case 6:o=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3);case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r){return t.apply(this,arguments)}}(),Ea=function(){var t=ta($i().mark((function t(e,r,n){var o,i;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={endpoint:oa.FORGOTPASSWORD.endpoint,params:{email:e.toLowerCase()},state:r},i=!1,t.prev=3,t.next=6,zi.doRequest(o,n);case 6:i=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3);case 12:return t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r,n){return t.apply(this,arguments)}}(),Sa=function(){var t=ta($i().mark((function t(e,r,n){var o,i,a,u,c,s,l,f,h;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.user,a=r.configdata,u=r.proxysetting,i){t.next=4;break}return t.abrupt("return",!1);case 4:return c=i.email,s=i.hpassword,l=c.toLowerCase(),f={endpoint:oa.REFRESHTOKEN.endpoint(e),params:{login:l,hpassword:s,token:null==a||null===(o=a.config)||void 0===o?void 0:o.p_token,serverid:null==u?void 0:u.serverid},state:r},h=!1,t.prev=8,t.next=11,zi.doRequest(f,n);case 11:h=t.sent,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8);case 17:return t.abrupt("return",h);case 18:case"end":return t.stop()}}),t,null,[[8,14]])})));return function(e,r,n){return t.apply(this,arguments)}}(),Oa=function(){var t=ta($i().mark((function t(e,r){var n,o;return $i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={endpoint:oa.APPS.endpoint,params:{},state:e},o=!1,t.prev=3,t.next=6,zi.doRequest(n,r);case 6:o=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3);case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r){return t.apply(this,arguments)}}();const La={closeAccount:ca,login:ia,getConfig:aa,getSession:ua,checkCaps:sa,createGuestUser:la,createAccount:fa,solveCaptcha:ha,endpoints:oa,getProducts:ya,getPaymentLink:ma,verifyProxy:ga,contactSupport:ba,getTier:wa,getVersionStatus:xa,forgotPassword:Ea,refreshToken:Sa,getApps:Oa,registerEmail:pa,registerEmailToken:da,changePassword:va};function ka(t){return ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ka(t)}function Ta(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==ka(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ka(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===ka(i)?i:String(i)),n)}var o,i}const _a=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.permissionChangeSubscribers=[],this.permissionController=!1,chrome.runtime.onStartup.addListener(this.onStartup.bind(this)),chrome.runtime.onInstalled.addListener(this.onInstalled.bind(this)),"firefox"!==a.PLATFORM.toLowerCase()&&(chrome.permissions.onAdded.addListener(this.onPermissionAdded.bind(this)),chrome.permissions.onRemoved.addListener(this.onPermissionRemoved.bind(this))),this.migrateStorage=this.migrateStorage.bind(this),this.purgeOldStorage=this.purgeOldStorage.bind(this)}var e,r,n;return e=t,(r=[{key:"subscribePermissionChange",value:function(t){this.permissionChangeSubscribers.push(t)}},{key:"registerController",value:function(t){this.permissionController=t}},{key:"isPermissionValid",value:function(){return new Promise((function(t,e){chrome.permissions.getAll((function(e){if(e&&e.origins&&e.origins.indexOf("<all_urls>")>-1)return t(!0);t(!1)}))}))}},{key:"onPermissionAdded",value:function(t){var e=this;t&&t.origins&&t.origins.indexOf("<all_urls>")>-1&&(e.permissionChangeSubscribers.forEach((function(t){t(!0)})),e.permissionController&&e.permissionController(!0))}},{key:"onPermissionRemoved",value:function(t){var e=this;t&&t.origins&&t.origins.indexOf("<all_urls>")>-1&&(e.permissionChangeSubscribers.forEach((function(t){t(!1)})),e.permissionController&&e.permissionController(!1))}},{key:"onStartup",value:function(){chrome.storage.local.remove([a.STORAGEKEYS.ECACHE,a.STORAGEKEYS.DCACHE,a.STORAGEKEYS.ERRCACHE,a.STORAGEKEYS.HASHCACHE])}},{key:"migrateStorage",value:function(){var t=this;chrome.storage.local.get([a.STORAGEKEYS.USERDATA,a.STORAGEKEYS.SHOWWP],(function(e){var r,n,o=e[a.STORAGEKEYS.USERDATA];"done"===e[a.STORAGEKEYS.SHOWWP]&&Pi.dispatch({type:Sr,payload:!0}),null!=o&&o.email&&null!=o&&o.hpassword&&Pi.dispatch((r=o.email,n=o.hpassword,{type:vr,payload:{email:r,hpassword:n,isGuest:!1}})),t.purgeOldStorage()}))}},{key:"purgeOldStorage",value:function(){return new Promise((function(t,e){chrome.storage.local.get(null,(function(e){if(chrome.runtime.lastError)t();else{var r=Object.keys(e).filter((function(t){return!t.startsWith("ext_")}));0!==r.length?chrome.storage.local.remove(r,(function(){chrome.runtime.lastError,t()})):t()}}))}))}},{key:"onInstalled",value:function(t){t&&t.reason&&"update"===t.reason&&(chrome.storage.local.remove([a.STORAGEKEYS.DCACHE,a.STORAGEKEYS.ECACHE,a.STORAGEKEYS.ERRCACHE,a.STORAGEKEYS.HASHCACHE,a.STORAGEKEYS.VERSIONSTATUS,a.STORAGEKEYS.VERSIONSTATUSNEXTUPDATE,a.STORAGEKEYS.CONFIGDATA]),this.migrateStorage())}}])&&Ta(e.prototype,r),n&&Ta(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Aa(t){return Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aa(t)}function Pa(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Pa=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==Aa(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function ja(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}const Na={unsetProxy:function(){var t,e=(t=Pa().mark((function t(){return Pa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,io.proxy.settings.clear();case 2:Pi.dispatch({type:fr,payload:{scope:null,value:null}}),Eo(!1);case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ja(i,n,o,a,u,"next",t)}function u(t){ja(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}()};function Ca(t){return Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ca(t)}function Ra(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ra=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==Ca(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ia(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Ua(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ia(i,n,o,a,u,"next",t)}function u(t){Ia(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Ga(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Ca(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Ca(i)?i:String(i)),n)}var o,i}var Fa=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this;e.onAuthFirefoxHandler=this.onAuthFirefoxHandler.bind(this),e.onAuthChromeHandler=this.onAuthChromeHandler.bind(this),e.onPermissionChange=this.onPermissionChange.bind(this),chrome.proxy.settings.onChange.addListener(this.onProxySettingChanged.bind(this)),_a.subscribePermissionChange(e.onPermissionChange),_a.isPermissionValid().then((function(t){t&&e.registerListeners()})),e.registerListeners(),e.authPromise=this.authPromise.bind(this),e.asyncFirefoxHandle=this.asyncFirefoxHandle.bind(this),e.pending=[],e.onAuths=[],e.testReqRunning=!1,e.abortController=!1,e.testToken=""}var e,r,n,o,i,a,u,c,s,l,f;return e=t,r=[{key:"onPermissionChange",value:function(t){t?this.registerListeners():this.removeListeners()}},{key:"registerListeners",value:function(){var t=this;chrome.webRequest.onAuthRequired.hasListener(t.onAuthChromeHandler)||chrome.webRequest.onAuthRequired.addListener(t.onAuthChromeHandler,{urls:["<all_urls>"]},["asyncBlocking","extraHeaders"])}},{key:"removeListeners",value:function(){chrome.webRequest.onAuthRequired.removeListener(this.onAuthChromeHandler)}},{key:"getCachedToken",value:function(t){var e=Pi.getState()[Ir].config;if(e&&e.hasOwnProperty("p_login")&&e.hasOwnProperty("p_token")){var r=e.p_login,n=e.p_token;return{authCredentials:{username:r,password:t?this.testToken:n}}}return{cancel:!0}}},{key:"freshToken",value:(f=Ua(Ra().mark((function t(e){var r,n,o,i,a,u,c,s,l;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,f=Pi.getState(),o=f[an],i=Vn(Pi.getState(),En),!(o>Gn())&&i){t.next=8;break}return Pi.dispatch({type:yr,payload:{pendingDel:!0}}),t.abrupt("return",this.getCachedToken(e));case 8:if(Pi.dispatch({type:Pr,payload:Gn()+120}),Pi.getState()[Ur]){t.next=12;break}return t.abrupt("return",{cancel:!0});case 12:return a=new AbortController,u=a.signal,t.next=16,La.refreshToken(null==i||null===(r=i.config)||void 0===r?void 0:r.session,Pi.getState(),u);case 16:if(c=t.sent,!La.endpoints.REFRESHTOKEN.response.SUCCESS(c)||!c.config){t.next=29;break}return s=Object.assign({},i.config,c.config),i.config=s,Pi.dispatch({type:yr,payload:i}),l={authCredentials:{username:i.config.p_login,password:e?n.testToken:s.p_token}},t.abrupt("return",l);case 29:Pi.dispatch({type:yr,payload:{pendingDel:!0}});case 30:return t.abrupt("return",{cancel:!0});case 31:case"end":return t.stop()}var f}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"letsWait",value:(l=Ua(Ra().mark((function t(){return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){setTimeout(t,15e3)})));case 1:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)})},{key:"randomURL",value:function(t,e,r){var n=function(t){for(var e="abcdefghijklmnopqrstuvwxyz0123456789",r="",n=0;n<t;n++)r+=e[Math.floor(36*Math.random())];return r}(t),o="http://".concat(n,".").concat(e),i="".concat(n,".").concat(e);return r&&"firefox"===r.platform&&(o="https://".concat(r.host),i=r.host),{url:o,domain:i}}},{key:"startTestReq",value:(s=Ua(Ra().mark((function t(){var e,r,n,o,i,a,u,c;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this).testReqRunning){t.next=15;break}return e.testReqRunning=!0,r=e.randomURL(10,"test"),n=r.url,o=r.domain,Pi.dispatch({type:hr,payload:{host:o}}),t.next=7,fetch(n);case 7:if(i=t.sent){t.next=12;break}return t.next=12,e.disconnectProxy();case 12:for(a=0;a<e.pending.length;a++)u=e.pending[a],c=e.getCachedToken(),u(i?c:{cancel:!0});e.pending=[],e.testReqRunning=!1;case 15:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"disconnectProxy",value:(c=Ua(Ra().mark((function t(){return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Na.unsetProxy();case 2:case"end":return t.stop()}}),t)}))),function(){return c.apply(this,arguments)})},{key:"chanllengeAnswer",value:(u=Ua(Ra().mark((function t(e){var r,n,o,i,a,u,c,s,l,f,h,p,d,v,y,m;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Pi.getState(),n=r[Yr],o=r[Hr],i=n.host,a=n.mode,u=o.id,c=o.count,s=o.host,l={isOur:!1,isTest:!1,mode:a,testId:u,testIdCount:c},f=e.challenger,h=f.host,"string"==typeof i&&"string"==typeof h&&i.toLowerCase()===h.toLowerCase()&&(l.isOur=!0),("string"==typeof(p=e.url)&&p.includes(s)&&p.includes("/servicetest")||p.includes(s))&&(l.isTest=!0,(d=e.requestId)===u?Pi.dispatch({type:hr,payload:{count:c+1}}):Pi.dispatch({type:hr,payload:{id:d,count:0}}),v=Pi.getState()[Hr],y=v.id,m=v.count,l.testId=y,l.testIdCount=m),t.abrupt("return",l);case 10:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)})},{key:"onAuthChromeHandler",value:(a=Ua(Ra().mark((function t(e,r){var n,o,i,a,u,c,s,l,f,h;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,e.isProxy){t.next=4;break}return t.abrupt("return",r());case 4:return t.next=6,this.chanllengeAnswer(e);case 6:if(o=t.sent,i=o.isOur,a=o.isTest,u=o.mode,c=o.testIdCount,!i){t.next=40;break}if("pac_script"!==u){t.next=20;break}if(!a||0!==c){t.next=14;break}return s=this.getCachedToken(),t.abrupt("return",r(s));case 14:if(!a||1!==c){t.next=19;break}return t.next=17,this.freshToken();case 17:return l=t.sent,t.abrupt("return",r(l));case 19:return t.abrupt("return",r({cancel:!0}));case 20:if("fixed_servers"!==u){t.next=38;break}if(!a||0!==c){t.next=24;break}return f=this.getCachedToken(),t.abrupt("return",r(f));case 24:if(!a||1!==c){t.next=29;break}return t.next=27,this.freshToken();case 27:return h=t.sent,t.abrupt("return",r(h));case 29:if(!(a&&c>1)){t.next=34;break}return t.next=32,n.disconnectProxy();case 32:return n.pending.forEach((function(t){t({cancel:!0})})),t.abrupt("return",r({cancel:!0}));case 34:return n.pending.push(r),n.testReqRunning||n.startTestReq(),t.abrupt("return",!0);case 38:t.next=41;break;case 40:return t.abrupt("return",r());case 41:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"asyncFirefoxHandle",value:function(t){var e=this,r=this;return new Promise(function(){var n=Ua(Ra().mark((function n(o,i){var a,u,c,s,l,f,h,p,d;return Ra().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Ki.challengeAnswer(t);case 3:if(a=n.sent,u=a.isOur,c=a.isTest,s=a.mode,l=a.testIdCount,!u){n.next=41;break}if("pac"!=s){n.next=20;break}if(!c||0!=l){n.next=14;break}return n.next=12,e.getCachedToken();case 12:return f=n.sent,n.abrupt("return",o(f));case 14:if(!c||1!=l){n.next=19;break}return n.next=17,e.freshToken();case 17:return h=n.sent,n.abrupt("return",o(h));case 19:return n.abrupt("return",o({cancel:!0}));case 20:if("fixed"!=s){n.next=39;break}if(!c||0!=l){n.next=26;break}return n.next=24,e.getCachedToken();case 24:return p=n.sent,n.abrupt("return",o(p));case 26:if(!c||1!=l){n.next=31;break}return n.next=29,e.freshToken();case 29:return d=n.sent,n.abrupt("return",o(d));case 31:if(!(c&&l>1)){n.next=36;break}return n.next=34,r.disconnectProxy();case 34:return r.pending.forEach((function(t){t({cancel:!0})})),n.abrupt("return",o({cancel:!0}));case 36:r.testReqRunning||r.startTestReq(),r.pending.push(o);case 39:n.next=42;break;case 41:o();case 42:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())}},{key:"onAuthFirefoxHandler",value:(i=Ua(Ra().mark((function t(e){var r;return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this,e.isProxy){t.next=4;break}return t.abrupt("return");case 4:return t.abrupt("return",r.asyncFirefoxHandle(e));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"authPromise",value:function(){var t=this;return new Promise((function(e,r){t.pending.push(e)}))}},{key:"onProxySettingChanged",value:(o=Ua(Ra().mark((function t(e){return Ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"controlled_by_this_extension"===e.levelOfControl||Array.isArray(this.pending)&&this.pending.length>0&&this.pending.forEach((function(t){t({cancel:!0})}));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})}],r&&Ga(e.prototype,r),n&&Ga(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();new Fa;function Da(t){return Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Da(t)}function Ma(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ma=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==Da(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ya(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Ha(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Da(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Da(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Da(i)?i:String(i)),n)}var o,i}var qa=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.updateIntervalTime=10,this.updateInterval=!1,this.updateInterval=new Di(this.getTiers.bind(this),this.updateIntervalTime,"int1"),this.updateInterval.start(),this.getTiers()}var e,r,n,o,i;return e=t,r=[{key:"getTiers",value:(o=Ma().mark((function t(){var e,r,n,o;return Ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Pi.getState()[Qr],r=Pi.getState()[Fr],!(e>Wn.currentTime())){t.next=5;break}return t.abrupt("return");case 5:if(r&&null!=r&&r.link){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,La.getTier(Pi.getState(),(new AbortController).signal);case 9:if(n=t.sent,o=a.TTL.TIER,this.isValidTierResponse(n)){t.next=16;break}return this.updateNextTTL(Wn.currentTime()+o),t.abrupt("return");case 16:n.hasOwnProperty("update_interval_hours")&&Number.isInteger(n.update_interval_hours)&&n.update_interval_hours>1&&n.update_interval_hours<168&&(o=3600*n.update_interval_hours),this.updateNextTTL(Wn.currentTime()+o),this.updateServersjson(n);case 19:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){Ya(i,r,n,a,u,"next",t)}function u(t){Ya(i,r,n,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"isValidTierResponse",value:function(t){var e,r,n,o;return 200===(null==t?void 0:t.retcode)&&Array.isArray(null==t||null===(e=t.data)||void 0===e?void 0:e.mainbase)&&(null==t||null===(r=t.data)||void 0===r||null===(n=r.mainbase)||void 0===n?void 0:n.length)>2&&Array.isArray(null==t||null===(o=t.data)||void 0===o?void 0:o.tierbase)}},{key:"updateNextTTL",value:function(t){Pi.dispatch({type:Lr,payload:t})}},{key:"updateServersjson",value:function(t){Pi.dispatch({type:kr,payload:t})}}],r&&Ha(e.prototype,r),n&&Ha(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();new qa;var Ba=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3];r=Wa(r,n,o,i,e[0],7,-680876936),i=Wa(i,r,n,o,e[1],12,-389564586),o=Wa(o,i,r,n,e[2],17,606105819),n=Wa(n,o,i,r,e[3],22,-1044525330),r=Wa(r,n,o,i,e[4],7,-176418897),i=Wa(i,r,n,o,e[5],12,1200080426),o=Wa(o,i,r,n,e[6],17,-1473231341),n=Wa(n,o,i,r,e[7],22,-45705983),r=Wa(r,n,o,i,e[8],7,1770035416),i=Wa(i,r,n,o,e[9],12,-1958414417),o=Wa(o,i,r,n,e[10],17,-42063),n=Wa(n,o,i,r,e[11],22,-1990404162),r=Wa(r,n,o,i,e[12],7,1804603682),i=Wa(i,r,n,o,e[13],12,-40341101),o=Wa(o,i,r,n,e[14],17,-1502002290),n=Wa(n,o,i,r,e[15],22,1236535329),r=Ka(r,n,o,i,e[1],5,-165796510),i=Ka(i,r,n,o,e[6],9,-1069501632),o=Ka(o,i,r,n,e[11],14,643717713),n=Ka(n,o,i,r,e[0],20,-373897302),r=Ka(r,n,o,i,e[5],5,-701558691),i=Ka(i,r,n,o,e[10],9,38016083),o=Ka(o,i,r,n,e[15],14,-660478335),n=Ka(n,o,i,r,e[4],20,-405537848),r=Ka(r,n,o,i,e[9],5,568446438),i=Ka(i,r,n,o,e[14],9,-1019803690),o=Ka(o,i,r,n,e[3],14,-187363961),n=Ka(n,o,i,r,e[8],20,1163531501),r=Ka(r,n,o,i,e[13],5,-1444681467),i=Ka(i,r,n,o,e[2],9,-51403784),o=Ka(o,i,r,n,e[7],14,1735328473),n=Ka(n,o,i,r,e[12],20,-1926607734),r=za(r,n,o,i,e[5],4,-378558),i=za(i,r,n,o,e[8],11,-2022574463),o=za(o,i,r,n,e[11],16,1839030562),n=za(n,o,i,r,e[14],23,-35309556),r=za(r,n,o,i,e[1],4,-1530992060),i=za(i,r,n,o,e[4],11,1272893353),o=za(o,i,r,n,e[7],16,-155497632),n=za(n,o,i,r,e[10],23,-1094730640),r=za(r,n,o,i,e[13],4,681279174),i=za(i,r,n,o,e[0],11,-358537222),o=za(o,i,r,n,e[3],16,-722521979),n=za(n,o,i,r,e[6],23,76029189),r=za(r,n,o,i,e[9],4,-640364487),i=za(i,r,n,o,e[12],11,-421815835),o=za(o,i,r,n,e[15],16,530742520),n=za(n,o,i,r,e[2],23,-995338651),r=Xa(r,n,o,i,e[0],6,-198630844),i=Xa(i,r,n,o,e[7],10,1126891415),o=Xa(o,i,r,n,e[14],15,-1416354905),n=Xa(n,o,i,r,e[5],21,-57434055),r=Xa(r,n,o,i,e[12],6,1700485571),i=Xa(i,r,n,o,e[3],10,-1894986606),o=Xa(o,i,r,n,e[10],15,-1051523),n=Xa(n,o,i,r,e[1],21,-2054922799),r=Xa(r,n,o,i,e[8],6,1873313359),i=Xa(i,r,n,o,e[15],10,-30611744),o=Xa(o,i,r,n,e[6],15,-1560198380),n=Xa(n,o,i,r,e[13],21,1309151649),r=Xa(r,n,o,i,e[4],6,-145523070),i=Xa(i,r,n,o,e[11],10,-1120210379),o=Xa(o,i,r,n,e[2],15,718787259),n=Xa(n,o,i,r,e[9],21,-343485551),t[0]=tu(r,t[0]),t[1]=tu(n,t[1]),t[2]=tu(o,t[2]),t[3]=tu(i,t[3])},Va=function(t,e,r,n,o,i){return e=tu(tu(e,t),tu(n,i)),tu(e<<o|e>>>32-o,r)},Wa=function(t,e,r,n,o,i,a){return Va(e&r|~e&n,t,e,o,i,a)},Ka=function(t,e,r,n,o,i,a){return Va(e&n|r&~n,t,e,o,i,a)},za=function(t,e,r,n,o,i,a){return Va(e^r^n,t,e,o,i,a)},Xa=function(t,e,r,n,o,i,a){return Va(r^(e|~n),t,e,o,i,a)},Ja=function(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r},Qa="0123456789abcdef".split(""),$a=function(t){for(var e="",r=0;r<4;r++)e+=Qa[t>>8*r+4&15]+Qa[t>>8*r&15];return e},Za=function(t){return function(t){for(var e=0;e<t.length;e++)t[e]=$a(t[e]);return t.join("")}(function(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Ba(n,Ja(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(Ba(n,o),e=0;e<16;e++)o[e]=0;return o[14]=8*r,Ba(n,o),n}(t))},tu=function(t,e){return t+e&4294967295};if("5d41402abc4b2a76b9719d911017c592"!=Za("hello"))tu=function(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r};const eu=Za;function ru(t){return ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ru(t)}function nu(t,e,r){return(e=iu(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ou(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iu(n.key),n)}}function iu(t){var e=function(t,e){if("object"!==ru(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ru(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ru(e)?e:String(e)}var au=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=this;this.init(),this.qSize=10,this.batchSize=100,this.entryMaxLength=1e5,this.batchMaxLength=7e5,this.qMaxSize=2e6,this.sendInterval=15,this.batchInterval=new Di(e.sendCache.bind(this),this.sendInterval,"int2"),this.batchInterval.start(),this.autoProxy=[],this.returnedBatches=[],this.isCaching=!1,this.isSending=!1,this.checkProxyTimeout=!1,this.sendCacheTimeout=!1,this.recacheBatchesTimeout=!1,e.onRequestError=this.onRequestError.bind(this),e.onPermissionChange=this.onPermissionChange.bind(this),e.checkProxy=this.checkProxy.bind(this),_a.subscribePermissionChange(e.onPermissionChange),_a.isPermissionValid().then((function(t){t&&e.registerListeners()}))}var e,r,n;return e=t,r=[{key:"onPermissionChange",value:function(t){t?this.registerListeners():this.removeListeners()}},{key:"registerListeners",value:function(){chrome.webRequest.onErrorOccurred.hasListener(this.onRequestError)||chrome.webRequest.onErrorOccurred.addListener(this.onRequestError,{urls:["<all_urls>"]})}},{key:"removeListeners",value:function(){chrome.webRequest.onErrorOccurred.removeListener(this.onRequestError)}},{key:"init",value:function(){var t=this;t.autoProxy=[],t.isRunning=!1,t.current=""}},{key:"check",value:function(t){var e=this;t&&e.getOriginUrl(t).then((function(r){t.referer=r,t.errorSource=e.getUserTag(),t.s=e.getEntrySize(t),e.autoProxy.length>1e3&&(e.autoProxy=[]),e.isEntrySizeValid(t.s)&&(e.autoProxy.push(t),e.checkProxy())}))}},{key:"getEntrySize",value:function(t){try{var e=JSON.stringify(t).length;return e||-1}catch(t){return-1}}},{key:"isEntrySizeValid",value:function(t){return t<this.entryMaxLength}},{key:"addItemToQ",value:function(t,e,r){var n=this;if(t&&Array.isArray(t)||(t=[]),0===t.length){var o={s:e.s,b:[e]};t.push(o)}else{(t.length>=n.qSize||r>n.qMaxSize)&&t.shift();var i=t[t.length-1];i.b.length>=n.batchSize||i.s+e.s>n.batchMaxLength?(o={s:e.s,b:[e]},t.push(o)):(i.s+=e.s,i.b.push(e))}return t}},{key:"addBatchToQ",value:function(t,e,r){var n=this;if(e&&Array.isArray(e))return e.forEach((function(e){t=n.addItemToQ(t,e,r)})),t}},{key:"pushToCache",value:function(t){var e=this;return new Promise((function(r,n){e.getBytesInUse(a.STORAGEKEYS.RCACHE).then((function(o){chrome.storage.local.get(a.STORAGEKEYS.RCACHE,(function(i){try{var u=i[a.STORAGEKEYS.RCACHE];if(Array.isArray(t))u=e.addBatchToQ(u,t,o);else{var c=Object.assign({},t);c.cv=a.VERSION,u=e.addItemToQ(u,c,o)}chrome.storage.local.set(nu({},a.STORAGEKEYS.RCACHE,u),(function(){r(t)}))}catch(t){n(t)}}))}))}))}},{key:"getBytesInUse",value:function(t){var e=this;return"firefox"==a.PLATFORM.toLowerCase()?new Promise((function(r,n){chrome.storage.local.get(t,(function(n){r(e.getEntrySize(n[t]))}))})):new Promise((function(e,r){try{chrome.storage.local.getBytesInUse(t,(function(t){e(t)}))}catch(t){e(0)}}))}},{key:"getOriginUrl",value:function(t){var e=this;return new Promise((function(r,n){return t?t&&t.hasOwnProperty("originUrl")&&t.originUrl?r(Wn.escapeParamsOfUrl(t.originUrl)):chrome&&chrome.tabs&&chrome.tabs.get&&t.hasOwnProperty("tabId")&&e.isInt(t.tabId)&&t.tabId>0?void chrome.tabs.get(t.tabId,(function(t){return r(Wn.escapeParamsOfUrl(null==t?void 0:t.url))})):r(""):r("")}))}},{key:"getUserTag",value:function(){var t,e,r,n,o;return(null==Pi||null===(t=Pi.getState())||void 0===t||null===(e=t[Ir])||void 0===e||null===(r=e.config)||void 0===r?void 0:r.uid)||(null==Pi||null===(n=Pi.getState())||void 0===n||null===(o=n[Wr])||void 0===o?void 0:o.id)}},{key:"doneCaching",value:function(){this.isCaching=!1,this.checkProxy()}},{key:"checkProxy",value:function(){var t=this;if(0!=t.autoProxy.length)if(t.isCaching)clearTimeout(t.checkProxyTimeout),t.checkProxyTimeout=setTimeout(t.checkProxy.bind(t),500);else{var e=t.autoProxy.pop();e.url=Wn.escapeParamsOfUrl(e.url),t.isCaching=!0,t.checkIsCached(e.url).then((function(r){if(r)t.doneCaching();else try{e.cacheTime=Wn.getDateNow(),t.pushToCache(e).then((function(){t.doneCaching()})).catch((function(e){t.doneCaching()}))}catch(e){t.doneCaching()}})).catch((function(e){t.doneCaching()}))}}},{key:"isInt",value:function(t){var e;return!isNaN(t)&&(0|(e=parseFloat(t)))===e}},{key:"checkIsCached",value:function(t){return new Promise((function(e,r){chrome.storage.local.get([a.STORAGEKEYS.HASHCACHE,a.STORAGEKEYS.BYPASSHOSTS],(function(n){var o=n[a.STORAGEKEYS.BYPASSHOSTS];try{var i=eu(t),u=new URL(t);if(o&&Array.isArray(o)&&o.includes(u.hostname))return e(!0);var c=n[a.STORAGEKEYS.HASHCACHE],s=Wn.getDateMid();if(null!=c&&void 0!==c[s]&&void 0!==c[s][i]&&c[s][i]>=Wn.getDateNow())return e(!0);var l=null!=c?c:{};Object.keys(l).length>=10&&(l={});var f=Wn.getDateNow()-172800;Object.keys(l).forEach((function(t,e){if(l.hasOwnProperty(t)){var r=parseInt(t);(!Wn.isInt(r)||r<f)&&delete l[t]}})),void 0===l[s]&&(l[s]={}),void 0===l[s].length&&(l[s].length=0),l[s].length>1e3&&(l[s]={}),l[s].length+=1,l[s][i]=Wn.getDateNow()+3600,chrome.storage.local.set(nu({},a.STORAGEKEYS.HASHCACHE,l),(function(){e(!1)}))}catch(t){r(t)}}))}))}},{key:"recacheBatches",value:function(){var t=this;if(0!==t.returnedBatches.length){if(t.isCaching)return clearTimeout(t.recacheBatchesTimeout),void(t.recacheBatchesTimeout=setTimeout(t.recacheBatches.bind(this),500));t.isCaching=!0;var e=t.returnedBatches.pop();t.pushToCache(e).then((function(){t.isCaching=!1})).catch((function(e){t.isCaching=!1,t.recacheBatches()}))}}},{key:"isResponseValid",value:function(t){return!!t&&!!(t.hasOwnProperty("saved")&&t.hasOwnProperty("received")&&t.hasOwnProperty("retcode"))&&200===t.retcode&&!(!Wn.isInt(t.saved)||!Wn.isInt(t.received))}},{key:"getAllNotSaved",value:function(t,e){return t.saved===t.received?[]:t.saved<e.length?e.slice(t.saved):[]}},{key:"sendCache",value:function(){var t=this;t.isSending||(t.isCaching&&(clearTimeout(t.sendCacheTimeout),t.sendCacheTimeout=setTimeout(t.sendCache.bind(t),500)),t.isSending=!0,t.isCaching=!0,t.popCurrentBatch().then((function(e){t.verifyProxy(e).then((function(r){if(t.isCaching=!1,t.isSending=!1,t.isResponseValid(r)){var n=t.getAllNotSaved(r,e);n.length>0?(t.returnedBatches.push(n),t.recacheBatches()):t.sendCache()}else{if(r&&201===r.retcode)return;t.returnedBatches.push(e),t.recacheBatches()}})).catch((function(e){t.isSending=!1,t.isCaching=!1}))})).catch((function(e){t.isSending=!1,t.isCaching=!1})))}},{key:"popCurrentBatch",value:function(){return new Promise((function(t,e){chrome.storage.local.get([a.STORAGEKEYS.RCACHE],(function(r){try{if(!Pi.getState().baselink.link)return e();var n=r[a.STORAGEKEYS.RCACHE];if(!n||!Array.isArray(n)||Array.isArray(n)&&0===n.length)return e();var o=n.pop().b;chrome.storage.local.set(nu({},a.STORAGEKEYS.RCACHE,n),(function(){try{o.forEach((function(t,e){o[e].cacheTime&&o[e].cacheTime<Wn.getDateNow()?o[e].timedelta=Wn.getDateNow()-o[e].cacheTime:o[e].timedelta=0})),t(o)}catch(t){e(t)}}))}catch(t){e(t)}}))}))}},{key:"verifyProxy",value:function(t){return new Promise((function(e,r){try{var n={batch:JSON.stringify(t)};La.verifyProxy(n,Pi.getState()).then((function(t){e(t)}))}catch(t){r(t)}}))}},{key:"onRequestError",value:function(t){t&&(t.error===a.ERRORCODES.VERIFYERROR||void 0!==a.ERRORCODES.VERIFYERROR2&&t.error===a.ERRORCODES.VERIFYERROR2)&&this.check(t)}}],r&&ou(e.prototype,r),n&&ou(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();new au;function uu(t){return uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(t)}function cu(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */cu=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==uu(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function su(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function lu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==uu(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==uu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===uu(i)?i:String(i)),n)}var o,i}var fu=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.updateIntervalTime=60,this.updateInterval=!1,this.updateInterval=new Di(this.getClientVersionStatus.bind(this),this.updateIntervalTime,"int3"),this.updateInterval.start()}var e,r,n,o,i;return e=t,r=[{key:"getClientVersionStatus",value:(o=cu().mark((function t(){var e,r,n,o,i,u=arguments;return cu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]&&u[0],t.next=3,Yn(5);case 3:if(r=Pi.getState()[$r],n=Pi.getState()[Fr],!(r>Wn.currentTime())||e){t.next=8;break}return t.abrupt("return");case 8:if(n&&null!=n&&n.link){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,La.getVersionStatus(Pi.getState(),(new AbortController).signal);case 12:if(o=t.sent,i=a.TTL.VERSIONSTATUS,this.isValidVersionStatusResponse(o)){t.next=20;break}return this.updateNextStatusTTL(Wn.currentTime()+i),this.updateVersionStatus(null),t.abrupt("return");case 20:o.hasOwnProperty("update_interval_hours")&&Number.isInteger(o.update_interval_hours)&&o.update_interval_hours>6&&o.update_interval_hours<360&&(i=3600*o.update_interval_hours),this.updateNextStatusTTL(Wn.currentTime()+i),this.updateVersionStatus(o);case 23:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){su(i,r,n,a,u,"next",t)}function u(t){su(i,r,n,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"updateNextStatusTTL",value:function(t){Pi.dispatch({type:Tr,payload:t})}},{key:"updateVersionStatus",value:function(t){Pi.dispatch({type:_r,payload:t})}},{key:"isValidVersionStatusResponse",value:function(t){var e,r,n,o,i,a,u,c;return 200===(null==t?void 0:t.retcode)&&("update"===(null==t||null===(e=t.data)||void 0===e?void 0:e.action)||"stop"===(null==t||null===(r=t.data)||void 0===r?void 0:r.action))&&(null==t||null===(n=t.data)||void 0===n?void 0:n.hasOwnProperty("curversion"))&&(null==t||null===(o=t.data)||void 0===o?void 0:o.hasOwnProperty("minversion"))&&(null==t||null===(i=t.data)||void 0===i?void 0:i.hasOwnProperty("sources"))&&Array.isArray(null==t||null===(a=t.data)||void 0===a?void 0:a.sources)&&(null==t||null===(u=t.data)||void 0===u||null===(c=u.sources)||void 0===c?void 0:c.length)>0}}],r&&lu(e.prototype,r),n&&lu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();new fu;function hu(t){return hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hu(t)}function pu(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */pu=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==hu(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function du(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function vu(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){du(i,n,o,a,u,"next",t)}function u(t){du(i,n,o,a,u,"throw",t)}a(void 0)}))}}function yu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==hu(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==hu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===hu(i)?i:String(i)),n)}var o,i}new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cacheProxyExtensions()}var e,r,n,o,i;return e=t,r=[{key:"cacheProxyExtensions",value:(i=vu(pu().mark((function t(){var e,r;return pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAllProxyExtensions();case 2:e=t.sent,Array.isArray(e)&&(r=e.map((function(t){return t.name})),Array.isArray(r)&&this.updateProxyExtensions(r));case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"updateProxyExtensions",value:function(t){Pi.dispatch({type:Ar,payload:t})}},{key:"getAllProxyExtensions",value:(o=vu(pu().mark((function t(){var e,r,n;return pu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.prev=1,t.next=4,io.management.getAll();case 4:return r=t.sent,n=r.filter((function(t){return e.hasExtensionProxyPermission(t)&&chrome.runtime.id!==t.id&&!0===t.enabled})),t.abrupt("return",n);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",[]);case 13:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(){return o.apply(this,arguments)})},{key:"hasExtensionProxyPermission",value:function(t){var e;return(null==t||null===(e=t.permissions)||void 0===e?void 0:e.includes("proxy"))||!1}}],r&&yu(e.prototype,r),n&&yu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function mu(t){return mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(t)}function gu(t){return function(t){if(Array.isArray(t))return bu(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return bu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bu(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wu(Object(r),!0).forEach((function(e){Eu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Eu(t,e,r){return(e=Ou(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Su(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ou(n.key),n)}}function Ou(t){var e=function(t,e){if("object"!==mu(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==mu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===mu(e)?e:String(e)}var Lu=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.requestTimeouts={},this.timeoutDuration=1e4,Pi.onChange.addListener(this.onStoreChange.bind(this)),chrome.tabs.onUpdated.addListener(this.onTabUpdated.bind(this)),chrome.tabs.onCreated.addListener(this.onTabCreated.bind(this)),chrome.webRequest.onBeforeRequest.addListener(this.onBeforeRequest.bind(this),{urls:["<all_urls>"]}),chrome.webRequest.onErrorOccurred.addListener(this.onUILinkError.bind(this),{urls:["<all_urls>"]}),setTimeout(this.updateTimeoutDuration.bind(this),2e3)}var e,r,n;return e=t,r=[{key:"updateTimeoutDuration",value:function(){var t=Vn(Pi.getState(),On),e=Un("mainbase_api_timeout",null==t?void 0:t.data);this.timeoutDuration=e}},{key:"isUILink",value:function(t){var e,r=null==Pi||null===(e=Pi.getState())||void 0===e?void 0:e[Fr],n=Wn.getUILink(r.link),o=(null==t?void 0:t.pendingUrl)||(null==t?void 0:t.url);return null==o?void 0:o.startsWith(n)}},{key:"showBaselinkSearchPage",value:function(t){var e=chrome.runtime.getURL("baselink.html");chrome.tabs.update(t,{url:e})}},{key:"setRequestTimeout",value:function(t,e){var r=this;this.requestTimeouts[t]&&clearTimeout(this.requestTimeouts[t]),this.requestTimeouts[t]=setTimeout((function(){var e,n=null==Pi||null===(e=Pi.getState())||void 0===e?void 0:e[Fr];Pi.dispatch({type:sr,baselink:xu(xu({},n),{},{link:null})}),r.showBaselinkSearchPage(t),Pi.dispatch({type:ir})}),this.timeoutDuration)}},{key:"clearRequestTimeout",value:function(t){this.requestTimeouts[t]&&(clearTimeout(this.requestTimeouts[t]),delete this.requestTimeouts[t])}},{key:"onBeforeRequest",value:function(t){this.isUILink(t)&&"main_frame"===(null==t?void 0:t.type)&&"GET"===(null==t?void 0:t.method)&&this.setRequestTimeout(t.tabId,t.url)}},{key:"onUILinkError",value:function(t){if(this.isUILink(t)&&(this.clearRequestTimeout(t.tabId),"main_frame"===(null==t?void 0:t.type)&&"net::ERR_ABORTED"!==(null==t?void 0:t.error))){var e,r=null==Pi||null===(e=Pi.getState())||void 0===e?void 0:e[Fr];Pi.dispatch({type:sr,baselink:xu(xu({},r),{},{link:null})}),Pi.dispatch({type:ir}),this.showBaselinkSearchPage(t.tabId)}}},{key:"onTabUpdated",value:function(t,e,r){this.clearRequestTimeout(t),this.isUILink(e)&&chrome.tabs.query({},(function(r){r.forEach((function(r){r.url===e.url&&r.id!==t&&chrome.tabs.remove(r.id)}))}))}},{key:"onTabCreated",value:function(t){var e,r=this;null==Pi||null===(e=Pi.getState())||void 0===e||e[Fr],this.isUILink(t)&&chrome.tabs.query({},(function(e){e.forEach((function(e){r.isUILink(e)&&e.id!==t.id&&chrome.tabs.remove(e.id)}))}))}},{key:"isAnyBaselink",value:function(t){var e,r,n,o,i,a=[],u=null==Pi||null===(e=Pi.getState())||void 0===e?void 0:e[qr];return!!u&&(Array.isArray(null==u||null===(r=u.data)||void 0===r?void 0:r.mainbase)&&a.push.apply(a,gu(null==u||null===(o=u.data)||void 0===o?void 0:o.mainbase)),Array.isArray(null==u||null===(n=u.data)||void 0===n?void 0:n.tierbase)&&a.push.apply(a,gu(null==u||null===(i=u.data)||void 0===i?void 0:i.tierbase)),a.some((function(e){var r;return null==t||null===(r=t.url)||void 0===r?void 0:r.startsWith(Wn.getUILink(e))})))}},{key:"isLastUILink",value:function(t){var e,r,n=null==Pi||null===(e=Pi.getState())||void 0===e?void 0:e[Fr];if(!n)return!1;if(!n.last)return!1;var o=Wn.getUILink(n.last);return null==t||null===(r=t.url)||void 0===r?void 0:r.startsWith(o)}},{key:"onStoreChange",value:function(t){var e=this,r=this;Object.keys(t).includes(Fr)&&chrome.tabs.query({},(function(t){t.forEach((function(t){r.isLastUILink(t)&&e.showBaselinkSearchPage(t.id),r.isAnyBaselink(t)&&chrome.tabs.remove(t.id)}))}))}}],r&&Su(e.prototype,r),n&&Su(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();new Lu;function ku(t){return ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ku(t)}function Tu(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Tu=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==ku(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function _u(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Au(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_u(i,n,o,a,u,"next",t)}function u(t){_u(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Pu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==ku(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ku(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===ku(i)?i:String(i)),n)}var o,i}var ju=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isRunning=!1,this.intervalMin=5,this.isDev=1,this.updateInterval=new Di(this.update.bind(this),this.intervalMin*this.isDev,"int5"),chrome.proxy.settings.onChange.addListener(this.onProxySettingChanged.bind(this))}var e,r,n,o,i;return e=t,r=[{key:"update",value:(i=Au(Tu().mark((function t(){var e,r,n,o,i,a,u,c,s,l;return Tu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isRunning){t.next=2;break}return t.abrupt("return");case 2:if(o=null==Pi||null===(e=Pi.getState())||void 0===e?void 0:e[Ir]){t.next=5;break}return t.abrupt("return");case 5:if(null!=o&&null!==(r=o.config)&&void 0!==r&&r.session){t.next=7;break}return t.abrupt("return");case 7:return this.isRunning=!0,i=new AbortController,a=i.signal,t.next=12,La.refreshToken(null==o||null===(n=o.config)||void 0===n?void 0:n.session,Pi.getState(),a);case 12:if(u=t.sent,!(c=La.endpoints.REFRESHTOKEN.response).MINUS_TWENTY(u)){t.next=19;break}return t.next=18,Na.unsetProxy();case 18:Pi.dispatch({type:lr});case 19:c.MINUS_ONE(u)&&(this.updateInterval.stop(),Pi.dispatch({type:yr,payload:{pendingDel:!0}})),c.SUCCESS(u)&&u.hasOwnProperty("config")&&Wn.isObject(u.config)&&null!=(s=Vn(Pi.getState(),En))&&s.config&&Wn.isObject(s.config)&&(l=Object.assign({},s.config,u.config),s.config=l,Pi.dispatch({type:yr,payload:s})),this.isRunning=!1;case 22:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getRefreshValue",value:function(t){if(!t||"object"!==ku(t)||!t.config_intervals)return 5;var e=t.config_intervals;if("object"!==ku(e)||void 0===e.refresh)return 5;var r=e.refresh;return"number"!=typeof r||r<5||r>100?5:r}},{key:"onProxySettingChanged",value:(o=Au(Tu().mark((function t(e){return Tu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"controlled_by_this_extension"===e.levelOfControl&&"fixed_servers"===e.value.mode?this.updateInterval.start():this.updateInterval.stop();case 1:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})}],r&&Pu(e.prototype,r),n&&Pu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();new ju;function Nu(t){return Nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nu(t)}function Cu(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Cu=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:x(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};c(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,i)&&(v=m);var g=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==Nu(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,u,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ru(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var Iu={},Uu=function(t){var e=[];e.push("chrome-extension://".concat(chrome.runtime.id));var r=t[Fr];if(r&&null!=r.link)try{var n=new URL(r.link).origin;e.push(n)}catch(t){}return e},Gu=function(t){var e,r=Uu(Pi.getState());if(0===r.length||!Array.isArray(r))return!1;try{e=new URL(t.url).origin}catch(t){return!1}if(!e)return!1;for(var n=0;n<r.length;n++)if(e===r[n])return!0;return!1};Pi.subscribe((function(){Iu.isAllowedOrigin=Gu})),((t,{portName:e=d.portName,dispatchResponder:r=d.dispatchResponder,serializer:n=d.serializer,deserializer:o=d.deserializer,diffStrategy:i=d.diffStrategy,config:a=d.config,extensionId:c=d.extensionId}=d)=>{if(!e)throw new Error("portName is required in options");if(!a)throw new Error("config is required in options");if(!c)throw new Error("extensionId is required in options");if("function"!=typeof n)throw new Error("serializer must be a function");if("function"!=typeof o)throw new Error("deserializer must be a function");if("function"!=typeof i)throw new Error("diffStrategy must be one of the included diffing strategies or a custom diff function");const h=function(){let t;try{t=self.chrome||self.browser||browser}catch(e){t=browser}if(!t)throw new Error("Browser API is not present");return t}(),p=t=>t.id?t.id===c:!!t.url&&a.isAllowedOrigin(t),v=(n,o,i)=>{if(n.type===u&&n.portName===e&&p(o)){const e=Object.assign({},n.payload,{_sender:o});let a=null;try{a=t.dispatch(e)}catch(t){a=Promise.reject(t.message)}return r(a,i),!0}},y=r=>{if(r.name!==e||!p(r.sender))return;const o=((t=s)=>(e,r=0)=>(...n)=>{if(n.length<=r)throw new Error(`Message in request could not be serialized. Expected message in position ${r} but only received ${n.length} args.`);return n[r]=l(n[r],t),e(...n)})(n)(((...t)=>r.postMessage(...t)));let a=t.getState();const u=t.subscribe((()=>{const e=t.getState(),r=i(a,e);r.length&&(a=e,o({type:"chromex.patch_state",payload:r}))}));r.onDisconnect.addListener(u),o({type:"chromex.state",payload:a})},m=f(o),g=t=>t.type===u&&t.portName===e;m(((...t)=>h.runtime.onMessage.addListener(...t)))(v,g),h.runtime.onMessageExternal&&m(((...t)=>h.runtime.onMessageExternal.addListener(...t)))(v,g),h.runtime.onConnect.addListener(y),h.runtime.onConnectExternal&&h.runtime.onConnectExternal.addListener(y),h.tabs.query({},(t=>{for(const r of t)h.tabs.sendMessage(r.id,{action:"storeReady",portName:e},(()=>{chrome.runtime.lastError}))}))})(Pi,{portName:Ci.portName,config:Iu,extensionId:Ci.extensionId}),io.permissions.onAdded((function(t){Pi.dispatch({type:pr,payload:{permissions:t,event:"onAdded"}})})),io.permissions.onRemoved((function(t){Pi.dispatch({type:pr,payload:{permissions:t,event:"onRemoved"}})}));var Fu=new ji.Router((function(t,e){return Gu(e)?function(t){return"string"==typeof t?{name:t,params:{}}:"string"==typeof t.act?{name:t.act,params:{}}:"string"==typeof t.action?{name:t.action,params:{}}:{name:"__notfound",params:{}}}(t):{name:"__notfound",params:{}}}));function Du(){var t;return t=Cu().mark((function t(e){var r,n,o;return Cu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.proxySetting){t.next=6;break}return t.next=5,Na.unsetProxy();case 5:return t.abrupt("return",!0);case 6:return n=r.server,o=r.config,t.next=9,io.proxy.settings.set(o);case 9:return t.next=11,io.proxy.settings.get({});case 11:if("controlled_by_this_extension"!==t.sent.levelOfControl){t.next=18;break}return n.mode=o.value.mode,Pi.dispatch({type:fr,payload:n}),Eo(!0),t.abrupt("return",!0);case 18:return t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t)})),Du=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ru(i,n,o,a,u,"next",t)}function u(t){Ru(i,n,o,a,u,"throw",t)}a(void 0)}))},Du.apply(this,arguments)}Fu.on("SET_PROXYSETTING",(function(t){return function(t){return Du.apply(this,arguments)}(t)})),Fu.on("GET_PROXYSETTING",(function(t){try{return io.proxy.settings.get()}catch(t){return!1}})),Fu.on("SYNC_DISPATCH",(function(t){var e=t.type,r=t.payload;return Pi.dispatch({type:e,payload:r}),!0})),Fu.on("IS_READY",(function(t){return!0})),Fu.on("OPEN_URL",(function(t){var e=t.url;return chrome.tabs.create({url:e}),!0})),chrome.runtime.onMessageExternal.addListener(Fu.listener()),chrome.runtime.onMessage.addListener(Fu.listener()),chrome.tabs.query({},(function(t){t.forEach((function(t){try{var e=new URL(t.url);Uu(Pi.getState()).includes(e.origin)&&(r=t.id,chrome.tabs.reload(r,(function(){chrome.runtime.lastError})))}catch(t){}var r}))}))})()})();