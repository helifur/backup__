/*! For license information please see service_worker.js.LICENSE.txt */
(()=>{var t,e,r,n,o={9027:(t,e,r)=>{"use strict";r.d(e,{n:()=>o});var n=r(2296);async function o({apiBaseUrl:t,deviceId:e,deviceIp:r,onFail:o}){return await n.o.post(`https://${t}/api/v1/get-proxy`,{json:{device_id:e,device_ip:r??"unknown",on_fail:o}}).json()}},2296:(t,e,r)=>{"use strict";r.d(e,{o:()=>u});var n=r(4542),o=r.n(n),s=r(2787),i=r.n(s),a=r(3036),c=r(7036);(0,n.extend)(i());const u=a.Ay.extend({hooks:{afterResponse:[async(t,e,r)=>{if(r.ok){const e=r.clone(),n=o().utc().format();let s=null;try{s=await e.json()}catch(t){s=null}const i={timestampUtc:n,responseData:s,status:r.status,statusText:r.statusText,url:t.url};let{apiHttpSuccess:a}=await(0,c.S7)(c.lP.ApiHttpSuccess);a||(a={}),await(0,c._5)({apiHttpSuccess:{...a,[t.url]:i}})}return r}],beforeError:[async t=>{const{request:e,response:r,message:n}=t,s=r.clone(),i=e.clone();let a=null,u=null;try{a=await i.json(),u=await s.json()}catch{a=null,u=null}const d={timestampUtc:o().utc().format(),message:n,errorData:u,status:s.status,statusText:s.statusText,requestData:a};let{apiHttpErrors:l}=await(0,c.S7)(c.lP.ApiHttpErrors);return l||(l={}),await(0,c._5)({apiHttpErrors:{...l,[s.url]:d}}),t}]}})},4126:(t,e,r)=>{"use strict";r.d(e,{I:()=>o});var n=r(2296);async function o(){const t=await n.o.get("https://raw.githubusercontent.com/vpn-naruzhu/public/main/uboost-extension").json();return{apiBaseUrl:t.apiBaseUrl,currentVersion:t.currentVersion,showOnUpdateVersion:t.showOnUpdateVersion,proxyUpdatePeriod:t.proxyUpdatePeriod??360,requiredVersion:t.requiredVersion,supportedBrowsers:t.supportedBrowsers}.proxyUpdatePeriodPremium=t.proxyUpdatePeriodPremium??60,t}},5772:(t,e,r)=>{"use strict";r.d(e,{Qm:()=>i});var n=r(4292),o=r(2296),s=r(4987);async function i(t,{userId:e,deviceId:r,deviceIp:i}){try{const n=(0,s.lt)(t);return await o.o.post(n,{json:{userId:e,deviceId:r,deviceIp:i}}).json()}catch(t){if(t instanceof n.H){if(400===t.response.status){const e=await t.response.json();if(e.errors.find((t=>"change_device"===t.code)))return{error:"changeDevice"};if(e.errors.find((t=>"user_required"===t.code)))return{error:"userRequired"};if(e.errors.find((t=>"device_id_required"===t.code)))return{error:"deviceIdRequired"};if(e.errors.find((t=>"user_not_found"===t.code)))return{error:"userNotFound"}}if(500===t.response.status)return{error:"internal"}}return{error:"unknown"}}}},4987:(t,e,r)=>{"use strict";r.d(e,{TV:()=>s,lt:()=>a,wD:()=>u});const n="premium/api/v1/uboost-premium",o=`${n}/create-new-user`;function s(t){return d(t,o)}const i=`${n}/get-subscription`;function a(t){return d(t,i)}const c=`${n}/get-proxy`;function u(t){return d(t,c)}function d(t,e){return`https://${t}/${e}`}},3367:(t,e,r)=>{"use strict";r.d(e,{E:()=>n});let n=function(t){return t.FailedVideoOpen="FAILED_VIDEO_OPEN",t.DirectVideoOpen="DIRECT_VIDEO_OPEN",t.ShowPageLoader="SHOW_PAGE_LOADER",t.VideoOpenerReady="VIDEO_OPENER_READY",t.NetworkConnectionRetry="NETWORK_CONNECTION_RETRY",t.NetworkConnectionRetrySuccess="NETWORK_CONNECTION_RETRY_SUCCESS",t.NetworkConnectionRetryFail="NETWORK_CONNECTION_RETRY_FAIL",t.UpdateProxyData="UPDATE_PROXY_DATA",t.OpenPopup="OPEN_POPUP",t.NavigateToFreeTrial="NAVIGATE_TO_FREE_TRIAL",t.PopupReady="POPUP_READY",t}({})},2982:(t,e,r)=>{"use strict";r.d(e,{F:()=>n});let n=function(t){return t.UpdateProxyData="updateProxyData",t.EnableProxy="enableProxy",t.DisableProxy="disableProxy",t.EnableProxyOnFail="EnableProxyOnFail",t.UpdateMetaApiData="updateMetaApiData",t}({})},1735:(t,e,r)=>{"use strict";r.d(e,{G:()=>u,LocalStoragePremiumKey:()=>i,c:()=>c,getLocalStoragePremiumData:()=>a});var n=r(5772),o=r(2718),s=r(9813);let i=function(t){return t.UserId="userId",t.DaysLeft="daysLeft",t.HasPremium="hasPremium",t.PaidUntil="paidUntil",t.SecondsLeft="secondsLeft",t.Status="status",t.IsSubscriptionInfoError="isSubscriptionInfoError",t.IsChangeDeviceError="isChangeDeviceError",t.HasUsedTrial="hasUsedTrial",t}({});async function a(t){return Array.isArray(t),chrome.storage.local.get(t)}async function c(t){await chrome.storage.local.set(t)}async function u(){try{await c({isSubscriptionInfoError:!1});const[{apiBaseUrl:t},{deviceId:e,deviceIp:r,currentState:u},{userId:d,hasPremium:l}]=await Promise.all([(0,o.u)(),(0,s.vc)([s.UZ.DeviceId,s.UZ.DeviceIp,s.UZ.CurrentState]),a([i.UserId,i.HasPremium])]),h=await(0,n.Qm)(t,{userId:d,deviceId:e,deviceIp:r});if("error"in h){if("changeDevice"===h.error)return void await c({isChangeDeviceError:!0});throw new Error(h.error)}const{daysLeft:p,paidUntil:f,status:m,secondsLeft:y}=h;await c({daysLeft:p,paidUntil:f,status:m,secondsLeft:y}),"Paid"!==m||l?"Expired"===m&&l&&"connected"===u&&await(0,s.lR)({targetState:"disconnected"}):await c({hasPremium:!0})}catch(t){console.error(t),await c({isSubscriptionInfoError:!0})}}},9813:(t,e,r)=>{"use strict";r.d(e,{UZ:()=>n,lR:()=>s,vc:()=>o});let n=function(t){return t.FeedbackProvided="feedbackProvided",t.TargetState="targetState",t.CurrentState="currentState",t.Theme="theme",t.ConnectionCount="connectionCount",t.DeviceId="deviceId",t.DeviceIp="deviceIp",t.IsBrowserError="isBrowserError",t}({});async function o(t){return Array.isArray(t),chrome.storage.local.get(t)}async function s(t){await chrome.storage.local.set(t)}},2718:(t,e,r)=>{"use strict";r.d(e,{u:()=>s});var n=r(4126),o=r(7036);async function s(){const{metaApiData:t}=await(0,o.S7)(o.lP.MetaApiData);if(void 0!==t)return t;const e=await(0,n.I)();return await(0,o._5)({metaApiData:e}),e}},7036:(t,e,r)=>{"use strict";r.d(e,{S7:()=>o,_5:()=>s,f6:()=>i,lP:()=>n});let n=function(t){return t.IsProxyControlledByOtherExtensions="isProxyControlledByOtherExtensions",t.PopupWasOpened="popupWasOpened",t.MetaApiData="metaApiData",t.IsNetworkError="isNetworkError",t.ConnectRetryFailed="connectRetryFailed",t.LastProxyHost="lastProxyHost",t.LastProxyPort="lastProxyPort",t.IsInitialized="isInitialized",t.ApiHttpErrors="apiHttpErrors",t.ApiHttpSuccess="apiHttpSuccess",t}({});async function o(t){return Array.isArray(t),chrome.storage.session.get(t)}async function s(t){await chrome.storage.session.set(t)}async function i(t,e){await s({lastProxyHost:t,lastProxyPort:e})}},1450:(t,e,r)=>{"use strict";r.d(e,{d:()=>c});var n=r(4987),o=r(1735),s=r(2296),i=r(2718),a=r(9367);async function c(){const[t,e,{apiBaseUrl:r}]=await Promise.all([(0,a.I)(),(0,a.W)(),(0,i.u)()]),c=await async function({url:t,deviceId:e,deviceIp:r}){return await s.o.post(t,{json:{deviceId:e,deviceIp:r,withPaymentLink:!1}}).json()}({url:(0,n.TV)(r),deviceId:t,deviceIp:e});await(0,o.c)({userId:c.userId,hasPremium:!1})}},9367:(t,e,r)=>{"use strict";r.d(e,{I:()=>o,W:()=>s});var n=r(9813);async function o(){const{deviceId:t}=await(0,n.vc)(n.UZ.DeviceId);return t||await async function(){const t=crypto.randomUUID();return await(0,n.lR)({deviceId:t}),t}()}async function s(){try{const{deviceIp:t}=await(0,n.vc)(n.UZ.DeviceIp);if(t)return t;const e=await fetch("https://api.ipify.org?format=json"),r=await e.json();return await(0,n.lR)({deviceIp:r.ip}),r.ip}catch(t){console.warn("Error fetching public IP:",t)}}},9183:(t,e,r)=>{"use strict";r.d(e,{q:()=>p});var n=r(9027),o=r(4292),s=r(2296),i=r(4987);let a=function(t){return t.UpdateProxyPremiumData="updateProxyPremiumData",t.UpdateSubscriptionInfo="updateSubscriptionInfo",t}({});async function c(t){return await chrome.alarms.get(t)}var u=r(2982),d=r(1735),l=r(9813),h=r(2718);async function p({apiBaseUrl:t,deviceId:e,deviceIp:r,onFail:a}){const{userId:c,hasPremium:u}=await(0,d.getLocalStoragePremiumData)([d.LocalStoragePremiumKey.UserId,d.LocalStoragePremiumKey.HasPremium]);if(c&&u){const n=await async function({apiBaseUrl:t,deviceId:e,deviceIp:r,userId:n,onFail:a}){try{const o=(0,i.wD)(t);return await s.o.post(o,{json:{userId:n,deviceId:e,deviceIp:r,onFail:a}}).json()}catch(t){if(t instanceof o.H){if((await t.response.json()).errors.find((t=>"change_device"===t.code)))return{error:"changeDevice"};if(500===t.response.status)return{error:"internal"}}return{error:"unknown"}}}({apiBaseUrl:t,userId:c,deviceId:e,deviceIp:r,onFail:a});if("error"in n)throw"changeDevice"===n.error&&await(0,d.c)({isChangeDeviceError:!0}),new Error(n.error);return n}return(0,n.n)({apiBaseUrl:t,deviceId:e,deviceIp:r,onFail:a})}async function f(){try{const{status:t,hasPremium:e}=await(0,d.getLocalStoragePremiumData)([d.LocalStoragePremiumKey.Status,d.LocalStoragePremiumKey.HasPremium]);if(e&&"Paid"!==t)return void await(0,l.lR)({targetState:"disconnected"});await chrome.alarms.create(u.F.EnableProxy,{delayInMinutes:0})}catch(t){console.error(t),await(0,l.lR)({currentState:"error"})}}async function m(){if(!await c(a.UpdateProxyPremiumData)){const{proxyUpdatePeriodPremium:t,proxyUpdatePeriod:e}=await(0,h.u)(),{hasPremium:r}=await(0,d.getLocalStoragePremiumData)(d.LocalStoragePremiumKey.HasPremium),n=r?t:e;await chrome.alarms.create(a.UpdateProxyPremiumData,{periodInMinutes:n,delayInMinutes:n})}}chrome.alarms.onAlarm.addListener((async t=>{if(t.name===a.UpdateProxyPremiumData){const{currentState:t}=await(0,l.vc)(l.UZ.CurrentState);"connected"===t&&await f()}})),chrome.alarms.onAlarm.addListener((async t=>{t.name===a.UpdateSubscriptionInfo&&await(0,d.G)()})),chrome.storage.session.onChanged.addListener((async t=>{t.isInitialized?.newValue&&(await m(),await c(a.UpdateSubscriptionInfo)||await chrome.alarms.create(a.UpdateSubscriptionInfo,{periodInMinutes:25,delayInMinutes:25}))})),chrome.storage.local.onChanged.addListener((async t=>{if(t.hasPremium){await m();const{currentState:t}=await(0,l.vc)(l.UZ.CurrentState);"connected"===t&&await f()}}))},968:(t,e,r)=>{"use strict";r.d(e,{b:()=>l,B:()=>d});var n=r(9813),o=r(9367),s=r(9027),i=r(2982),a=r(2718),c=r(7036);const u=(t,e)=>`\n  function FindProxyForURL(url, host) {\n      if (dnsDomainIs(host, ".music.youtube.com")) {\n        return "DIRECT";\n      }\n\n      if (dnsDomainIs(host, ".googlevideo.com") ||\n          dnsDomainIs(host, ".youtube.com") ||\n          dnsDomainIs(host, ".ytimg.com") ||\n          dnsDomainIs(host, ".ggpht.com")) {\n          return "PROXY ${t}:${e}";\n      }\n      return "DIRECT";\n  }\n`,d=new class{_fetchProxyData=s.n;set fetchProxyData(t){this._fetchProxyData=t}get fetchProxyData(){return this._fetchProxyData}};async function l(){const{targetState:t}=await(0,n.vc)([n.UZ.TargetState]);void 0===t&&await(0,n.lR)({targetState:"connected"}),setTimeout(h,500)}async function h(){const{targetState:t}=await(0,n.vc)(n.UZ.TargetState);"connected"===t?await p():f()}async function p({onFail:t}={}){try{await(0,n.lR)({currentState:"connecting"});const[{apiBaseUrl:e},r,s]=await Promise.all([(0,a.u)(),(0,o.I)(),(0,o.W)()]),{host:l,port:h}=await d.fetchProxyData({apiBaseUrl:e,deviceId:r,deviceIp:s,onFail:t});!function(t,e){chrome.proxy.settings.set({value:{mode:"pac_script",pacScript:{data:u(t,e)}},scope:"regular"},(async()=>{if(chrome.runtime.lastError)await(0,n.lR)({currentState:"error"}),console.error("Error setting proxy:",chrome.runtime.lastError.message);else{const{connectionCount:r,targetState:o}=await(0,n.vc)([n.UZ.ConnectionCount,n.UZ.TargetState]),s=r??0;"disconnected"===o?chrome.alarms.create(i.F.DisableProxy,{delayInMinutes:0}):(await(0,c.f6)(t,e),await(0,n.lR)({currentState:"connected",connectionCount:s+1}))}}))}(l,h)}catch(t){console.error("Error loading configuration:",t),await(0,n.lR)({currentState:"error"})}}function f(){chrome.proxy.settings.clear({scope:"regular"},(async()=>{const{targetState:t}=await(0,n.vc)(n.UZ.TargetState);chrome.runtime.lastError?(await(0,n.lR)({currentState:"error"}),console.error("Error clearing proxy settings:",chrome.runtime.lastError.message)):"connected"===t?await chrome.alarms.create(i.F.EnableProxy,{delayInMinutes:0}):await(0,n.lR)({currentState:"disconnected"})}))}chrome.storage.onChanged.addListener((async t=>{t.targetState&&await h()})),chrome.alarms.onAlarm.addListener((t=>{t.name===i.F.DisableProxy&&f()})),chrome.alarms.onAlarm.addListener((async t=>{t.name===i.F.EnableProxy&&await p()})),chrome.alarms.onAlarm.addListener((async t=>{t.name===i.F.EnableProxyOnFail&&await p({onFail:!0})}))},6713:(t,e,r)=>{"use strict";r.a(t,(async(t,e)=>{try{var n=r(9813),o=r(9183),s=r(968),i=r(1450),a=r(1735),c=r(7036),u=r(2718),d=(r(7849),r(3367)),l=r(4126),h=r(5487).A;async function p(){try{const{userId:t}=await(0,a.getLocalStoragePremiumData)(a.LocalStoragePremiumKey.UserId);t||await(0,i.d)(),await(0,a.G)()}catch(t){console.error(t)}}async function f(){try{if("openPopup"in chrome.action){const t=await chrome.windows.getCurrent();t.id&&await chrome.windows.update(t.id,{focused:!0}),await chrome.action.openPopup({windowId:t.id})}}catch(t){console.warn(t)}}async function m(){try{await chrome.tabs.create(h.solve({url:"https://storage.googleapis.com/uboost/update/index.html"}))}catch(t){console.error(t)}}async function y(){try{const{isBrowserError:t}=await(0,n.vc)(n.UZ.IsBrowserError);t?(0,n.lR)({currentState:"disconnected",targetState:"disconnected"}):(await(0,u.u)(),await p(),await(0,s.b)(),await(0,c._5)({isInitialized:!0}))}catch(t){console.error(t),await(0,n.lR)({currentState:"error"})}}chrome.runtime.onMessage.addListener((async t=>{t.action===d.E.OpenPopup&&(await f(),chrome.runtime.onMessage.addListener((async function t(e){e.action===d.E.PopupReady&&(await chrome.runtime.sendMessage({action:d.E.NavigateToFreeTrial}),chrome.runtime.onMessage.removeListener(t))})))})),chrome.runtime.onInstalled.addListener((async t=>{if(await p(),t.reason===chrome.runtime.OnInstalledReason.INSTALL&&await f(),t.reason===chrome.runtime.OnInstalledReason.UPDATE){const e=await(0,l.I)(),r=chrome.runtime.getManifest().version.replace(/\./g,"");Number.parseInt(e.showOnUpdateVersion?.replace(/\./g,"")??r)>Number.parseInt(t.previousVersion?.replace(/\./g,"")??r)&&await m()}})),s.B.fetchProxyData=o.q;const{isInitialized:w}=await(0,c.S7)(c.lP.IsInitialized);w||await y(),e()}catch(g){e(g)}}),1)},7849:(t,e,r)=>{"use strict";var n=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,s=e.length;o<s;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},o=function(t,e,r){this.name=t,this.version=e,this.os=r,this.type="browser"},s=function(t){this.version=t,this.type="node",this.name="node",this.os=process.platform},i=function(t,e,r,n){this.name=t,this.version=e,this.os=r,this.bot=n,this.type="bot-device"},a=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},c=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},u=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,d=3,l=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],h=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function p(t){var e=function(t){return""!==t&&l.reduce((function(e,r){var n=r[0],o=r[1];if(e)return e;var s=o.exec(t);return!!s&&[n,s]}),!1)}(t);if(!e)return null;var r=e[0],s=e[1];if("searchbot"===r)return new a;var c=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);c?c.length<d&&(c=n(n([],c,!0),function(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}(d-c.length),!0)):c=[];var p=c.join("."),f=function(t){for(var e=0,r=h.length;e<r;e++){var n=h[e],o=n[0];if(n[1].exec(t))return o}return null}(t),m=u.exec(t);return m&&m[1]?new i(r,p,f,m[1]):new o(r,p,f)}var f=r(9813),m=r(3367),y=r(7036),w=r(2718),g=r(2982);const b=".youtube.com/generate_204",v=".youtube.com/youtubei",_=".youtube.com/api/stats",S=".googlevideo.com/videoplayback";var P=r(5487).A;async function I(){const{currentState:t,theme:e}=await(0,f.vc)([f.UZ.CurrentState,f.UZ.Theme]);let r;r="connected"===t?"/public/icons/icon128.png":"light"===e?"/public/icons/icon128-disabled-light.png":"/public/icons/icon128-disabled-dark.png",await chrome.action.setIcon(P.solve({path:r}))}var E=r(5487).A;async function $(t){try{const{currentState:e}=await(0,f.vc)(f.UZ.CurrentState);if("connected"!==e)return;if("controlled_by_other_extensions"===t.levelOfControl){const t=await chrome.windows.getCurrent(),e=await chrome.tabs.query({active:!0,currentWindow:!0}),r=e.length>0?e[0]:void 0;await(0,y._5)({isProxyControlledByOtherExtensions:!0}),t.id&&r?.url?.includes("youtube.com")?(await chrome.windows.update(t.id,{focused:!0}),await chrome.action.openPopup({windowId:t.id})):(chrome.tabs.onActivated.addListener(D),chrome.tabs.onUpdated.addListener(T))}else"controlled_by_this_extension"===t.levelOfControl&&await(0,y._5)({isProxyControlledByOtherExtensions:!1,popupWasOpened:!1})}catch(t){console.warn(t)}}async function D(t){const e=await chrome.tabs.get(t.tabId),r=await chrome.windows.getCurrent();if(r.id===e.windowId&&e.url?.includes("youtube.com")){const{isProxyControlledByOtherExtensions:t,popupWasOpened:e}=await(0,y.S7)([y.lP.IsProxyControlledByOtherExtensions,y.lP.PopupWasOpened]);t&&!e?await chrome.action.openPopup({windowId:r.id}):chrome.tabs.onActivated.removeListener(D)}}async function T(t,e,r){const n=await chrome.windows.getCurrent();if("complete"===e.status&&n.id===r.windowId&&r.url?.includes("youtube.com")){const{isProxyControlledByOtherExtensions:t,popupWasOpened:e}=await(0,y.S7)([y.lP.IsProxyControlledByOtherExtensions,y.lP.PopupWasOpened]);t&&!e?await chrome.action.openPopup({windowId:n.id}):chrome.tabs.onUpdated.removeListener(T)}}chrome.runtime.onInstalled.addListener((async t=>{if(t.reason===chrome.runtime.OnInstalledReason.INSTALL)try{await chrome.tabs.create(E.solve({url:"https://storage.googleapis.com/uboost/welcome/index.html"}));const{supportedBrowsers:t}=await(0,w.u)(),r=e?p(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new c:"undefined"!=typeof navigator?p(navigator.userAgent):"undefined"!=typeof process&&process.version?new s(process.version.slice(1)):null;if(!(r instanceof o&&t.includes(r.name))&&(await(0,f.lR)({isBrowserError:!0}),"openPopup"in chrome.action)){const t=await chrome.windows.getCurrent();t.id&&await chrome.windows.update(t.id,{focused:!0}),await chrome.action.openPopup({windowId:t.id})}}catch(t){console.error(t),await(0,f.lR)({currentState:"error"})}var e})),chrome.tabs.onActivated.addListener((async t=>{const{currentState:e}=await(0,f.vc)(f.UZ.CurrentState),r=await chrome.tabs.get(t.tabId);"connected"===e&&r.id&&r.url?.includes("google.com/sorry")&&r.title?.includes("youtube.com/watch")&&(await chrome.tabs.sendMessage(r.id,{action:m.E.ShowPageLoader}),await chrome.tabs.update(r.id,{url:r.title}))})),chrome.tabs.onUpdated.addListener((async t=>{const e=await chrome.tabs.query({active:!0,currentWindow:!0}),r=e.length>0?e[0]:void 0,{currentState:n}=await(0,f.vc)(f.UZ.CurrentState);r?.id===t&&"connected"===n&&r.url?.includes("google.com/sorry")&&r.title?.includes("youtube.com/watch")&&(await chrome.tabs.sendMessage(r.id,{action:m.E.ShowPageLoader}),await chrome.tabs.update(r.id,{url:r.title}))})),chrome.webRequest.onBeforeRedirect.addListener((async t=>{if(t.redirectUrl.includes("google.com/sorry")&&t.url.includes("youtube.com/watch")){const{currentState:e}=await(0,f.vc)(f.UZ.CurrentState);"connected"===e&&await async function(t,e){const r=new URL(t),n=r.searchParams.get("v");if(n){const t=`/watch?v=${n}`,o=await chrome.tabs.query({active:!0,currentWindow:!0}),s=o.length>0?o[0]:void 0;if(s?.id===e){chrome.runtime.onMessage.addListener((async function o(s,{tab:i}){s.action===m.E.VideoOpenerReady&&i?.id===e&&(await chrome.tabs.sendMessage(e,{action:m.E.DirectVideoOpen,payload:{watchUrl:t,videoId:n,time:r.searchParams.get("t")}}),chrome.runtime.onMessage.removeListener(o))}));const o=encodeURIComponent(`https://www.youtube.com${t}`);await chrome.tabs.update(e,{url:`https://www.youtube.com/results?search_query=${o}`})}}}(t.url,t.tabId)}}),{urls:["*://*.youtube.com/*"],types:["main_frame"]},[]),chrome.runtime.onMessage.addListener((async(t,{tab:e})=>{t.action===m.E.FailedVideoOpen&&e?.id&&(chrome.tabs.onUpdated.addListener((async function r(n,o){n===e.id&&"complete"===o.status&&(await chrome.tabs.sendMessage(n,t),chrome.tabs.onUpdated.removeListener(r))})),await chrome.tabs.update({url:"https://www.youtube.com/"}))})),chrome.proxy.settings.get({},$),chrome.proxy.settings.onChange.addListener($),chrome.storage.session.setAccessLevel({accessLevel:"TRUSTED_AND_UNTRUSTED_CONTEXTS"}),chrome.webRequest.onErrorOccurred.addListener(function(){let t=!1;return async e=>{const{isNetworkError:r,connectRetryFailed:n}=await(0,y.S7)([y.lP.IsNetworkError,y.lP.ConnectRetryFailed]),{currentState:o}=await(0,f.vc)(f.UZ.CurrentState),s="connected"===o;if(i=e.error,a=e.url,(function(t,e){return"net::ERR_PROXY_CONNECTION_FAILED"===t&&[b,v,_].some((t=>e.includes(t)))}(i,a)||function(t,e){return"net::ERR_CONNECTION_RESET"===t&&[v,S].some((t=>e.includes(t)))}(i,a)||function(t,e){return"net::ERR_TIMED_OUT"===t&&[v,S].some((t=>e.includes(t)))}(i,a)||function(t,e){return"net::ERR_CONNECTION_CLOSED"===t&&[v].some((t=>e.includes(t)))}(i,a))&&s&&!t&&!n){if(t=!0,r)await async function(){const t=await chrome.tabs.query({url:"*://*.youtube.com/*"});await Promise.all([t.map((t=>t.id?chrome.tabs.sendMessage(t.id,{action:m.E.NetworkConnectionRetryFail}):null))])}(),await(0,y._5)({connectRetryFailed:!0});else{await(0,y._5)({isNetworkError:!0}),await async function(){const t=await chrome.tabs.query({url:"*://*.youtube.com/*"});await Promise.all([t.map((t=>t.id?chrome.tabs.sendMessage(t.id,{action:m.E.NetworkConnectionRetry}):null))])}(),await chrome.alarms.create(g.F.EnableProxyOnFail,{delayInMinutes:0});const t=await chrome.tabs.query({url:"*://*.youtube.com/*"});await Promise.all(t.map((t=>t.id?chrome.tabs.reload(t.id):null)))}t=!1}var i,a}}(),{urls:["*://*.youtube.com/*"]}),chrome.webRequest.onCompleted.addListener((async function(t){const{isNetworkError:e}=await(0,y.S7)(y.lP.IsNetworkError);var r;r=t.url,[b,v,_,S].some((t=>r.includes(t)))&&e&&(await(0,y._5)({isNetworkError:!1,connectRetryFailed:!1}),await async function(){const t=await chrome.tabs.query({url:"*://*.youtube.com/*"});await Promise.all([t.map((t=>t.id?chrome.tabs.sendMessage(t.id,{action:m.E.NetworkConnectionRetrySuccess}):null))])}())}),{urls:["*://*.youtube.com/*"]}),chrome.storage.onChanged.addListener((async t=>{t.currentState&&await I()})),I()},4542:function(t){t.exports=function(){"use strict";var t=6e4,e=36e5,r="millisecond",n="second",o="minute",s="hour",i="day",a="week",c="month",u="quarter",d="year",l="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],r=t%100;return"["+t+(e[(r-20)%10]||e[r]||e[0])+"]"}},y=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},w={s:y,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),o=r%60;return(e<=0?"+":"-")+y(n,2,"0")+":"+y(o,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),o=e.clone().add(n,c),s=r-o<0,i=e.clone().add(n+(s?-1:1),c);return+(-(n+(r-o)/(s?o-i:i-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:d,w:a,d:i,D:l,h:s,m:o,s:n,ms:r,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g="en",b={};b[g]=m;var v="$isDayjsObject",_=function(t){return t instanceof E||!(!t||!t[v])},S=function t(e,r,n){var o;if(!e)return g;if("string"==typeof e){var s=e.toLowerCase();b[s]&&(o=s),r&&(b[s]=r,o=s);var i=e.split("-");if(!o&&i.length>1)return t(i[0])}else{var a=e.name;b[a]=e,o=a}return!n&&o&&(g=o),o||!n&&g},P=function(t,e){if(_(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new E(r)},I=w;I.l=S,I.i=_,I.w=function(t,e){return P(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var E=function(){function m(t){this.$L=S(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[v]=!0}var y=m.prototype;return y.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(I.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(p);if(n){var o=n[2]-1||0,s=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(e)}(t),this.init()},y.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},y.$utils=function(){return I},y.isValid=function(){return!(this.$d.toString()===h)},y.isSame=function(t,e){var r=P(t);return this.startOf(e)<=r&&r<=this.endOf(e)},y.isAfter=function(t,e){return P(t)<this.startOf(e)},y.isBefore=function(t,e){return this.endOf(e)<P(t)},y.$g=function(t,e,r){return I.u(t)?this[e]:this.set(r,t)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(t,e){var r=this,u=!!I.u(e)||e,h=I.p(t),p=function(t,e){var n=I.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return u?n:n.endOf(i)},f=function(t,e){return I.w(r.toDate()[t].apply(r.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},m=this.$W,y=this.$M,w=this.$D,g="set"+(this.$u?"UTC":"");switch(h){case d:return u?p(1,0):p(31,11);case c:return u?p(1,y):p(0,y+1);case a:var b=this.$locale().weekStart||0,v=(m<b?m+7:m)-b;return p(u?w-v:w+(6-v),y);case i:case l:return f(g+"Hours",0);case s:return f(g+"Minutes",1);case o:return f(g+"Seconds",2);case n:return f(g+"Milliseconds",3);default:return this.clone()}},y.endOf=function(t){return this.startOf(t,!1)},y.$set=function(t,e){var a,u=I.p(t),h="set"+(this.$u?"UTC":""),p=(a={},a[i]=h+"Date",a[l]=h+"Date",a[c]=h+"Month",a[d]=h+"FullYear",a[s]=h+"Hours",a[o]=h+"Minutes",a[n]=h+"Seconds",a[r]=h+"Milliseconds",a)[u],f=u===i?this.$D+(e-this.$W):e;if(u===c||u===d){var m=this.clone().set(l,1);m.$d[p](f),m.init(),this.$d=m.set(l,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},y.set=function(t,e){return this.clone().$set(t,e)},y.get=function(t){return this[I.p(t)]()},y.add=function(r,u){var l,h=this;r=Number(r);var p=I.p(u),f=function(t){var e=P(h);return I.w(e.date(e.date()+Math.round(t*r)),h)};if(p===c)return this.set(c,this.$M+r);if(p===d)return this.set(d,this.$y+r);if(p===i)return f(1);if(p===a)return f(7);var m=(l={},l[o]=t,l[s]=e,l[n]=1e3,l)[p]||1,y=this.$d.getTime()+r*m;return I.w(y,this)},y.subtract=function(t,e){return this.add(-1*t,e)},y.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=t||"YYYY-MM-DDTHH:mm:ssZ",o=I.z(this),s=this.$H,i=this.$m,a=this.$M,c=r.weekdays,u=r.months,d=r.meridiem,l=function(t,r,o,s){return t&&(t[r]||t(e,n))||o[r].slice(0,s)},p=function(t){return I.s(s%12||12,t,"0")},m=d||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(f,(function(t,n){return n||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return I.s(e.$y,4,"0");case"M":return a+1;case"MM":return I.s(a+1,2,"0");case"MMM":return l(r.monthsShort,a,u,3);case"MMMM":return l(u,a);case"D":return e.$D;case"DD":return I.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return l(r.weekdaysMin,e.$W,c,2);case"ddd":return l(r.weekdaysShort,e.$W,c,3);case"dddd":return c[e.$W];case"H":return String(s);case"HH":return I.s(s,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return m(s,i,!0);case"A":return m(s,i,!1);case"m":return String(i);case"mm":return I.s(i,2,"0");case"s":return String(e.$s);case"ss":return I.s(e.$s,2,"0");case"SSS":return I.s(e.$ms,3,"0");case"Z":return o}return null}(t)||o.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,l,h){var p,f=this,m=I.p(l),y=P(r),w=(y.utcOffset()-this.utcOffset())*t,g=this-y,b=function(){return I.m(f,y)};switch(m){case d:p=b()/12;break;case c:p=b();break;case u:p=b()/3;break;case a:p=(g-w)/6048e5;break;case i:p=(g-w)/864e5;break;case s:p=g/e;break;case o:p=g/t;break;case n:p=g/1e3;break;default:p=g}return h?p:I.a(p)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return b[this.$L]},y.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=S(t,e,!0);return n&&(r.$L=n),r},y.clone=function(){return I.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},m}(),$=E.prototype;return P.prototype=$,[["$ms",r],["$s",n],["$m",o],["$H",s],["$W",i],["$M",c],["$y",d],["$D",l]].forEach((function(t){$[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),P.extend=function(t,e){return t.$i||(t(e,E,P),t.$i=!0),P},P.locale=S,P.isDayjs=_,P.unix=function(t){return P(1e3*t)},P.en=b[g],P.Ls=b,P.p={},P}()},2787:function(t){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,o,s){var i=o.prototype;s.utc=function(t){return new o({date:t,utc:!0,args:arguments})},i.utc=function(e){var r=s(this.toDate(),{locale:this.$L,utc:!0});return e?r.add(this.utcOffset(),t):r},i.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var a=i.parse;i.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),a.call(this,t)};var c=i.init;i.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else c.call(this)};var u=i.utcOffset;i.utcOffset=function(n,o){var s=this.$utils().u;if(s(n))return this.$u?0:s(this.$offset)?u.call(this):this.$offset;if("string"==typeof n&&(n=function(t){void 0===t&&(t="");var n=t.match(e);if(!n)return null;var o=(""+n[0]).match(r)||["-",0,0],s=o[0],i=60*+o[1]+ +o[2];return 0===i?0:"+"===s?i:-i}(n),null===n))return this;var i=Math.abs(n)<=16?60*n:n,a=this;if(o)return a.$offset=i,a.$u=0===n,a;if(0!==n){var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(a=this.local().add(i+c,t)).$offset=i,a.$x.$localOffset=c}else a=this.utc();return a};var d=i.format;i.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,e)},i.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var l=i.toDate;i.toDate=function(t){return"s"===t&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():l.call(this)};var h=i.diff;i.diff=function(t,e,r){if(t&&this.$u===t.$u)return h.call(this,t,e,r);var n=this.local(),o=s(t).local();return h.call(n,o,e,r)}}}()},1748:(t,e,r)=>{"use strict";r.d(e,{Ky:()=>l});var n=r(4292),o=r(7547),s=r(390),i=r(8261),a=r(3797),c=r(5409),u=r(1008),d=r(4719);class l{static create(t,e){const r=new l(t,e),o=async()=>{if("number"==typeof r._options.timeout&&r._options.timeout>d.TK)throw new RangeError(`The \`timeout\` option cannot be greater than ${d.TK}`);await Promise.resolve();let t=await r._fetch();for(const e of r._options.hooks.afterResponse){const n=await e(r.request,r._options,r._decorateResponse(t.clone()));n instanceof globalThis.Response&&(t=n)}if(r._decorateResponse(t),!t.ok&&r._options.throwHttpErrors){let e=new n.H(t,r.request,r._options);for(const t of r._options.hooks.beforeError)e=await t(e);throw e}if(r._options.onDownloadProgress){if("function"!=typeof r._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!d.b0)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return r._stream(t.clone(),r._options.onDownloadProgress)}return t},s=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(o):o();for(const[t,n]of Object.entries(d.hT))s[t]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||n);const o=(await s).clone();if("json"===t){if(204===o.status)return"";if(0===(await o.clone().arrayBuffer()).byteLength)return"";if(e.parseJson)return e.parseJson(await o.text())}return o[t]()};return s}request;abortController;_retryCount=0;_input;_options;constructor(t,e={}){if(this._input=t,this._options={...e,headers:(0,s.lF)(this._input.headers,e.headers),hooks:(0,s.XN)({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},e.hooks),method:(0,i.q)(e.method??this._input.method),prefixUrl:String(e.prefixUrl||""),retry:(0,i.U)(e.retry),throwHttpErrors:!1!==e.throwHttpErrors,timeout:e.timeout??1e4,fetch:e.fetch??globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(d.xM){this.abortController=new globalThis.AbortController;const t=this._options.signal??this._input.signal;t?.addEventListener("abort",(()=>{this.abortController.abort(t.reason)})),this._options.signal=this.abortController.signal}if(d.xr&&(this._options.duplex="half"),void 0!==this._options.json&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const t="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),e=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,t);!(d.zq&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(e,{...this.request}),this._options)}}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount>this._options.retry.limit||t instanceof o.M)throw t;if(t instanceof n.H){if(!this._options.retry.statusCodes.includes(t.response.status))throw t;const e=t.response.headers.get("Retry-After")??t.response.headers.get("RateLimit-Reset")??t.response.headers.get("X-RateLimit-Reset")??t.response.headers.get("X-Rate-Limit-Reset");if(e&&this._options.retry.afterStatusCodes.includes(t.response.status)){let t=1e3*Number(e);Number.isNaN(t)?t=Date.parse(e)-Date.now():t>=Date.parse("2024-01-01")&&(t-=Date.now());const r=this._options.retry.maxRetryAfter??t;return t<r?t:r}if(413===t.response.status)throw t}const e=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,e)}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const r=Math.min(this._calculateRetryDelay(e),d.TK);if(this._retryCount<1)throw e;await(0,c.A)(r,{signal:this._options.signal});for(const t of this._options.hooks.beforeRetry)if(await t({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===d.ds)return;return this._retry(t)}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}const t=(0,u.I)(this.request,this._options),e=this.request;return this.request=e.clone(),!1===this._options.timeout?this._options.fetch(e,t):(0,a.A)(e,t,this.abortController,this._options)}_stream(t,e){const r=Number(t.headers.get("content-length"))||0;let n=0;return 204===t.status?(e&&e({percent:1,totalBytes:r,transferredBytes:n},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(o){const s=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array),await async function t(){const{done:i,value:a}=await s.read();i?o.close():(e&&(n+=a.byteLength,e({percent:0===r?0:n/r,transferredBytes:n,totalBytes:r},a)),o.enqueue(a),await t())}()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}},4719:(t,e,r)=>{"use strict";r.d(e,{E1:()=>a,Pu:()=>h,TK:()=>u,b0:()=>s,ds:()=>d,hT:()=>c,iA:()=>l,xM:()=>o,xr:()=>n,zq:()=>i});const n=(()=>{let t=!1,e=!1;const r="function"==typeof globalThis.ReadableStream,n="function"==typeof globalThis.Request;if(r&&n)try{e=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type")}catch(t){if(t instanceof Error&&"unsupported BodyInit type"===t.message)return!1;throw t}return t&&!e})(),o="function"==typeof globalThis.AbortController,s="function"==typeof globalThis.ReadableStream,i="function"==typeof globalThis.FormData,a=["get","post","put","patch","head","delete"],c={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},u=2147483647,d=Symbol("stop"),l={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},h={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0}},4292:(t,e,r)=>{"use strict";r.d(e,{H:()=>n});class n extends Error{response;request;options;constructor(t,e,r){const n=`${t.status||0===t.status?t.status:""} ${t.statusText||""}`.trim();super(`Request failed with ${n?`status code ${n}`:"an unknown error"}: ${e.method} ${e.url}`),this.name="HTTPError",this.response=t,this.request=e,this.options=r}}},7547:(t,e,r)=>{"use strict";r.d(e,{M:()=>n});class n extends Error{request;constructor(t){super(`Request timed out: ${t.method} ${t.url}`),this.name="TimeoutError",this.request=t}}},3036:(t,e,r)=>{"use strict";r.d(e,{Ay:()=>a});var n=r(1748),o=r(4719),s=r(390);const i=t=>{const e=(e,r)=>n.Ky.create(e,(0,s.sT)(t,r));for(const r of o.E1)e[r]=(e,o)=>n.Ky.create(e,(0,s.sT)(t,o,{method:r}));return e.create=t=>i((0,s.sT)(t)),e.extend=e=>("function"==typeof e&&(e=e(t??{})),i((0,s.sT)(t,e))),e.stop=o.ds,e},a=i()},5409:(t,e,r)=>{"use strict";async function n(t,{signal:e}){return new Promise(((r,n)=>{function o(){clearTimeout(s),n(e.reason)}e&&(e.throwIfAborted(),e.addEventListener("abort",o,{once:!0}));const s=setTimeout((()=>{e?.removeEventListener("abort",o),r()}),t)}))}r.d(e,{A:()=>n})},4912:(t,e,r)=>{"use strict";r.d(e,{G:()=>n});const n=t=>null!==t&&"object"==typeof t},390:(t,e,r)=>{"use strict";r.d(e,{XN:()=>a,lF:()=>s,sT:()=>o});var n=r(4912);const o=(...t)=>{for(const e of t)if((!(0,n.G)(e)||Array.isArray(e))&&void 0!==e)throw new TypeError("The `options` argument must be an object");return c({},...t)},s=(t={},e={})=>{const r=new globalThis.Headers(t),n=e instanceof globalThis.Headers,o=new globalThis.Headers(e);for(const[t,e]of o.entries())n&&"undefined"===e||void 0===e?r.delete(t):r.set(t,e);return r};function i(t,e,r){return Object.hasOwn(e,r)&&void 0===e[r]?[]:c(t[r]??[],e[r]??[])}const a=(t={},e={})=>({beforeRequest:i(t,e,"beforeRequest"),beforeRetry:i(t,e,"beforeRetry"),afterResponse:i(t,e,"afterResponse"),beforeError:i(t,e,"beforeError")}),c=(...t)=>{let e={},r={},o={};for(const i of t)if(Array.isArray(i))Array.isArray(e)||(e=[]),e=[...e,...i];else if((0,n.G)(i)){for(let[t,r]of Object.entries(i))(0,n.G)(r)&&t in e&&(r=c(e[t],r)),e={...e,[t]:r};(0,n.G)(i.hooks)&&(o=a(o,i.hooks),e.hooks=o),(0,n.G)(i.headers)&&(r=s(r,i.headers),e.headers=r)}return e}},8261:(t,e,r)=>{"use strict";r.d(e,{U:()=>i,q:()=>o});var n=r(4719);const o=t=>n.E1.includes(t)?t.toUpperCase():t,s={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:[413,429,503],maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:t=>.3*2**(t-1)*1e3},i=(t={})=>{if("number"==typeof t)return{...s,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...s,...t}}},1008:(t,e,r)=>{"use strict";r.d(e,{I:()=>o});var n=r(4719);const o=(t,e)=>{const r={};for(const o in e)o in n.Pu||o in n.iA||o in t||(r[o]=e[o]);return r}},3797:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var n=r(7547);async function o(t,e,r,o){return new Promise(((s,i)=>{const a=setTimeout((()=>{r&&r.abort(),i(new n.M(t))}),o.timeout);o.fetch(t,e).then(s).catch(i).then((()=>{clearTimeout(a)}))}))}},5487:(t,e,r)=>{"use strict";r.d(e,{A:()=>d});var n='Could not resolve file path. Ensure the file exists in the "public" or "pages" directory.',o=function(t){return console.error(`Could not resolve path ${t}. Either add it to the "public" directory or create a page in the "pages" directory.`),t},s=function(t){return`Could not resolve path ${t}. Either add it to the "public" directory or create a script in the "scripts" directory.`},i=function(t){return`Could not resolve path ${t}. If you want to preserve this file path, add the file to the "public" directory.`};function a(t){let e=t.split("/"),r=[];for(let t of e)".."===t||"."===t||""!==t&&r.push(t);return r.join("/")}var c={"public/.DS_Store":"public/.DS_Store","public/content-variables.css":"public/content-variables.css","public/icons/icon128-disabled-dark.png":"public/icons/icon128-disabled-dark.png","public/icons/icon128-disabled-light.png":"public/icons/icon128-disabled-light.png","public/icons/icon128.png":"public/icons/icon128.png","public/icons/icon16.png":"public/icons/icon16.png","public/icons/icon48.png":"public/icons/icon48.png","background/service_worker.js":"src/background/project/youboost.ts","content_scripts/content-0":["./src/content/loader/loader.ts"],"content_scripts/content-1":["./src/content/content.ts","./src/content/styles/content.css","/public/content-variables.css"],"content_scripts/content-2":["./src/content/scripts/youboostPremium.tsx","./src/content/styles/youboostPremium.css"],"action/default_popup.html":"./src/popup/popup.html"};function u(t){if(!t)return console.error(n),"";if(t?.startsWith("http")||t?.startsWith("chrome://")||t?.startsWith("about:"))return t;if(t?.startsWith("chrome-extension://")){let e=chrome.runtime.getURL("");if(t.startsWith(e)){let r=t.replace(e,"");return chrome.runtime.getURL(u(r))}return t}if(t?.startsWith("/_favicon"))return t;let e=Object.entries(c).find((([e,r])=>{let n=a(t);return(r===n||r===`pages/${n}`||r===`scripts/${n}`)&&e})),r=a(t);return r.includes("public/")?"/"+r:e&&e.length?e[0]:("/"!==t&&function(t){t?.endsWith(".html")?console.error(o(t)):t?.endsWith(".js")?console.error(s(t)):console.error(i(t))}(t),t)}var d={solve:function(t){if("string"==typeof t)return u(t);let e=t=>({...t,...t?.path&&{path:"string"==typeof t.path?u(t.path):Object.entries(t.path).reduce(((t,[e,r])=>(t[e]=u(r),t)),{})},...t?.popup&&{popup:u(t.popup)},...t?.url&&{url:u(t.url)},...t?.iconUrl&&{iconUrl:u(t.iconUrl)},...t?.files&&{files:t.files.map((t=>u(t)))},...t?.js&&{js:Array.isArray(t.js)?t.js.map((t=>u(t))):t.js},...t?.css&&{css:Array.isArray(t.css)?t.css.map((t=>u(t))):t.css}});return Array.isArray(t)?t.map((t=>e(t))):{...e(t||{})}}}}},s={};function i(t){var e=s[t];if(void 0!==e)return e.exports;var r=s[t]={exports:{}};return o[t].call(r.exports,r,r.exports,i),r.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},i.a=(o,s,i)=>{var a;i&&((a=[]).d=-1);var c,u,d,l=new Set,h=o.exports,p=new Promise(((t,e)=>{d=e,u=t}));p[e]=h,p[t]=t=>(a&&t(a),l.forEach(t),p.catch((t=>{}))),o.exports=p,s((o=>{var s;c=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[t])return o;if(o.then){var s=[];s.d=0,o.then((t=>{i[e]=t,n(s)}),(t=>{i[r]=t,n(s)}));var i={};return i[t]=t=>t(s),i}}var a={};return a[t]=t=>{},a[e]=o,a})))(o);var i=()=>c.map((t=>{if(t[r])throw t[r];return t[e]})),u=new Promise((e=>{(s=()=>e(i)).r=0;var r=t=>t!==a&&!l.has(t)&&(l.add(t),t&&!t.d&&(s.r++,t.push(s)));c.map((e=>e[t](r)))}));return s.r?u:i()}),(t=>(t?d(p[r]=t):u(h),n(a)))),a&&a.d<0&&(a.d=0)},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i(6713)})();